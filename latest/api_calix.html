

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>API Reference: calix &mdash; BrainScaleS-2 Documentation 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/visions.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="API Reference: hxcomm" href="api_hxcomm.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> BrainScaleS-2 Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="brainscales2-demos/index.html">Demos &amp; Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="apis.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="api_pynn-brainscales2.html">PyNN API</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_hxtorch.html">hxtorch API</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_grenade.html">grenade API</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_haldls.html">haldls API</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_lola.html">lola API</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_stadls.html">stadls API</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_fisch.html">fisch API</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_hxcomm.html">hxcomm API</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">calix API</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BrainScaleS-2 Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="apis.html">BrainScaleS-2 API Documentation</a> &raquo;</li>
        
      <li>API Reference: calix</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/api_calix.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="api-reference-calix">
<h1>API Reference: calix<a class="headerlink" href="#api-reference-calix" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1___calibration_result_internal"></span><code class="sig-name descname"><span class="pre">calix.spiking.neuron._CalibrationResultInternal</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">hagen_neuron.CalibrationResultInternal</span></code></dt>
<dd><p>Class providing array-like access to calibrated parameters. </p>
<p>Used internally during calibration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="set_neuron_configs_default">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1___calibration_result_internal_1a2d1703a62a0105aa9b12884763cc6b8f"></span><code class="sig-name descname"><span class="pre">set_neuron_configs_default</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[hal.NeuronConfig.MembraneCapacitorSize</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">membrane_capacitance</span></em>, <em class="sig-param"><span class="pre">pq.Quantity</span> <span class="pre">tau_syn</span></em>, <em class="sig-param"><span class="pre">Optional[halco.AtomicNeuronOnDLS]</span> <span class="pre">readout_neuron=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#set_neuron_configs_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill neuron configs with the given membrane capacitances, but otherwise default values. </p>
<p>:param membrane_capacitance: Desired membrane capacitance (in LSB). :param tau_syn: Synaptic input time constant. Used to decide whether the high resistance mode is enabled. :param readout_neuron: Neuron to enable readout for. </p>
</dd></dl>

<dl class="py function">
<dt id="to_atomic_neuron">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1___calibration_result_internal_1a3642aa7fcc5f21b8fb76687b0385ff56"></span><code class="sig-name descname"><span class="pre">to_atomic_neuron</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.AtomicNeuronOnDLS</span> <span class="pre">neuron_coord</span></em><span class="sig-paren">)</span><a class="headerlink" href="#to_atomic_neuron" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an AtomicNeuron with calibration applied. </p>
<p>:param neuron_coord: Coordinate of requirested neuron.</p>
<p>:return: Complete AtomicNeuron configuration. </p>
</dd></dl>

<dl class="py function">
<dt id="to_neuron_calib_result">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1___calibration_result_internal_1a0c23fcb6b74eeed9d31f2c91a3544457"></span><code class="sig-name descname"><span class="pre">to_neuron_calib_result</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">NeuronCalibTarget</span> <span class="pre">target</span></em>, <em class="sig-param"><span class="pre">NeuronCalibOptions</span> <span class="pre">options</span></em><span class="sig-paren">)</span><a class="headerlink" href="#to_neuron_calib_result" title="Permalink to this definition">¶</a></dt>
<dd><p>Conversion to NeuronCalibResult. </p>
<p>The numpy arrays get merged into lola AtomicNeurons.</p>
<p>:param target: Target parameters for calibration. :param options: Further options for calibration.</p>
<p>:return: Equivalent NeuronCalibResult. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="neuron_configs">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1___calibration_result_internal_1abfc2114b261b47630201b4dec7c78cdf"></span><code class="sig-name descname"><span class="pre">neuron_configs</span></code><a class="headerlink" href="#neuron_configs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="bool">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1___calibration_result_internal_1a41b3645a30a8329b5d41c03a40beb2ec"></span><code class="sig-name descname"><span class="pre">bool</span></code><a class="headerlink" href="#bool" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="dtype">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1___calibration_result_internal_1a292a400a860fb2f7ebc1740d6a16fdf1"></span><code class="sig-name descname"><span class="pre">dtype</span></code><a class="headerlink" href="#dtype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ndarray">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1___calibration_result_internal_1a6edadde24d0b5b0b26c9af5962108d15"></span><code class="sig-name descname"><span class="pre">ndarray</span></code><a class="headerlink" href="#ndarray" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="size">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1___calibration_result_internal_1a631c3d68d512ca5d2694a62d3263b576"></span><code class="sig-name descname"><span class="pre">size</span></code><a class="headerlink" href="#size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1___spike_counter_calibration"></span><code class="sig-name descname"><span class="pre">calix.spiking.neuron_threshold._SpikeCounterCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.Calibration</span></code></dt>
<dd><p>Base class for threshold calibrations that will use the spike counters in order to determine the spike rate of all neurons. </p>
<p>:ivar accumulation_time: Time to record spikes for during calibration. :ivar target: Target number of spikes during accumulation time. Has to be non-zero as the spike threshold would otherwise drift upwards. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1spiking_1_1neuron__threshold_1_1_leak_over_threshold_calib"><span class="std std-ref">calix.spiking.neuron_threshold.LeakOverThresholdCalib</span></a>, <a class="reference internal" href="#classcalix_1_1spiking_1_1neuron__threshold_1_1_neuron_threshold_calibration"><span class="std std-ref">calix.spiking.neuron_threshold.NeuronThresholdCalibration</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="init__">
<span id="__init__"></span><span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1___spike_counter_calibration_1a7cb216c2282e3327756f843d700ed1df"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="configure_parameters">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1___spike_counter_calibration_1a60e9afe107deb5506cbec75d0b001890"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#configure_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the given spike threshold potentials in the given builder. </p>
<p>:param builder: Builder to append configuration instructions to. :param parameters: Threshold potential for each neuron.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="measure_results">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1___spike_counter_calibration_1a04c8b13f13abfb132c819f62da606adc"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#measure_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the spike counters, waits for a suitable amount of time, and reads the spike counters. </p>
<p>:param connection: Connection to a chip. :param builder: Builder to append read instructions to.</p>
<p>:return: Array with the number of spikes during the accumulation time. If the counter has overflown, the value is set to a high value. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.hagen.synapse_driver._SynapseDriverResultInternal">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1___synapse_driver_result_internal"></span><em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">calix.hagen.synapse_driver.</span></code><code class="sig-name descname"><span class="pre">_SynapseDriverResultInternal</span></code><a class="headerlink" href="#calix.hagen.synapse_driver._SynapseDriverResultInternal" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal result object of a synapse driver calibration. </p>
<p>Holds numpy arrays containing STP ramp currents for each CapMem block, comparator offsets for every driver and their calibration success. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="calix.hagen.synapse_driver._SynapseDriverResultInternal.to_synapse_driver_calib_result">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1___synapse_driver_result_internal_1a2610a65a2f85a2d3be6123f897f7c0e5"></span><code class="sig-name descname"><span class="pre">to_synapse_driver_calib_result</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">SynapseDriverCalibOptions</span> <span class="pre">options</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.synapse_driver._SynapseDriverResultInternal.to_synapse_driver_calib_result" title="Permalink to this definition">¶</a></dt>
<dd><p>Conversion to <a class="reference internal" href="#classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_calib_result"><span class="std std-ref">SynapseDriverCalibResult</span></a>. </p>
<p>The numpy arrays get transformed to dicts.</p>
<p>:ivar options: Further options for calibration.</p>
<p>:return: Equivalent <a class="reference internal" href="#classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_calib_result"><span class="std std-ref">SynapseDriverCalibResult</span></a>. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="calix.hagen.synapse_driver._SynapseDriverResultInternal.dtype">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1___synapse_driver_result_internal_1a179e3e7605781f317f68befa577dfb48"></span><code class="sig-name descname"><span class="pre">dtype</span></code><a class="headerlink" href="#calix.hagen.synapse_driver._SynapseDriverResultInternal.dtype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.hagen.synapse_driver._SynapseDriverResultInternal.ndarray">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1___synapse_driver_result_internal_1a800c692114c667b44da7c9722c7addb3"></span><code class="sig-name descname"><span class="pre">ndarray</span></code><a class="headerlink" href="#calix.hagen.synapse_driver._SynapseDriverResultInternal.ndarray" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.hagen.synapse_driver._SynapseDriverResultInternal.size">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1___synapse_driver_result_internal_1a05caebe3ef0d986fef21bae99431f043"></span><code class="sig-name descname"><span class="pre">size</span></code><a class="headerlink" href="#calix.hagen.synapse_driver._SynapseDriverResultInternal.size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1base_1_1_algorithm"></span><code class="sig-name descname"><span class="pre">calix.common.base.Algorithm</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">ABC</span></code></dt>
<dd><p>Base class for calibration Algorithms. </p>
<p>From here, algorithms are derived, which implement a <a class="reference internal" href="#classcalix_1_1common_1_1base_1_1_algorithm_1ac95f8f1a610598517a900bb276fe2d2b"><span class="std std-ref">run()</span></a> method.</p>
<p>:ivar calibration: <a class="reference internal" href="#classcalix_1_1common_1_1base_1_1_calibration"><span class="std std-ref">Calibration</span></a> instance that contains important parameters and functions for the <a class="reference internal" href="#classcalix_1_1common_1_1base_1_1_algorithm"><span class="std std-ref">Algorithm</span></a> to run. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1common_1_1algorithms_1_1_binary_search"><span class="std std-ref">calix.common.algorithms.BinarySearch</span></a>, <a class="reference internal" href="#classcalix_1_1common_1_1algorithms_1_1_linear_search"><span class="std std-ref">calix.common.algorithms.LinearSearch</span></a>, <a class="reference internal" href="#classcalix_1_1common_1_1algorithms_1_1_predictive_model"><span class="std std-ref">calix.common.algorithms.PredictiveModel</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id0">
<span class="target" id="classcalix_1_1common_1_1base_1_1_algorithm_1aee8d2c57f3ee2df842d66849eeaede33"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="hook_to_calibration">
<span class="target" id="classcalix_1_1common_1_1base_1_1_algorithm_1afa52acfade72faa9c9714a0f836ca9ea"></span><code class="sig-name descname"><span class="pre">hook_to_calibration</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Calibration</span> <span class="pre">calibration</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hook_to_calibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Make an instance of a calibration known to the algorithm, allowing to use parameters set there. </p>
<p>:param calibration: Instance of calibration class that will be run with this algorithm. </p>
</dd></dl>

<dl class="py function">
<dt id="run">
<span class="target" id="classcalix_1_1common_1_1base_1_1_algorithm_1ac95f8f1a610598517a900bb276fe2d2b"></span><code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">Union[float</span></em>, <em class="sig-param"><span class="pre">int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">target_result</span></em><span class="sig-paren">)</span><a class="headerlink" href="#run" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that iterates setting parameters up, testing the results, comparing them to the target result(s) and changing the parameters. </p>
<p>The specifics are implemented in the derived algorithms. Generally, the run function also configures the optimum parameters on hardware, in addition to returning them.</p>
<p>:param connection: Connection that will be used when setting up parameters and measuring results. :param target_result: Target for the calibration. The parameters will be set up such that the results match the target as close as possible. The target can be either a single value that will be used for all instances of parameters or an array containing a specific target for each instance. When using an array, its length has to match n_instances.</p>
<p>:return: Best suited parameters to reach given targets. </p>
</dd></dl>

<dl class="py function">
<dt id="unhook_from_calibration">
<span class="target" id="classcalix_1_1common_1_1base_1_1_algorithm_1a66c5930d08e5943ad742d7628b3754bb"></span><code class="sig-name descname"><span class="pre">unhook_from_calibration</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unhook_from_calibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear a calibration instance previously hooked to this algorithm. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="calibration">
<span class="target" id="classcalix_1_1common_1_1base_1_1_algorithm_1ac88db0b90b78c18d5dc9d7f856314c0c"></span><code class="sig-name descname"><span class="pre">calibration</span></code><a class="headerlink" href="#calibration" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1exceptions_1_1_algorithm_error"></span><code class="sig-name descname"><span class="pre">calix.common.exceptions.AlgorithmError</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">Exception</span></code></dt>
<dd><p>Base class for Exceptions raised from Algorithms. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1common_1_1exceptions_1_1_excessive_noise_error"><span class="std std-ref">calix.common.exceptions.ExcessiveNoiseError</span></a></p>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_baseline_calibration"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_potentials.BaselineCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">cadc.ChannelOffsetCalibration</span></code></dt>
<dd><p>Calibrate all CADC channels offsets such that the neurons read a given value shortly after reset. </p>
<p>Requirements:<ul class="simple">
<li><p>Neuron membrane readout is connected to the CADCs (causal and acausal).</p></li>
<li><p>The potential shortly after a neuron reset is stable and does not quickly drift away. Also, it has to be in a suitable range for the CADCs, ideally near the middle of their dynamic range. </p></li>
</ul>
</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id1">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_baseline_calibration_1a3f4f75cc9a6c0b872020b664a8ec0bda"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id2">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_baseline_calibration_1a3ab800ffe91bc954ab9e98f37996b6a9"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id2" title="Permalink to this definition">¶</a></dt>
<dd><p>Read all CADC channels at the neuron’s baseline voltage. </p>
<p>This read is executed multiple times to get a more accurate result.</p>
<p>:param connection: Connection to the chip to run on. :param builder: Builder to append read instructions to.</p>
<p>:return: Array of read values for both synrams. </p>
</dd></dl>

<dl class="py function">
<dt id="postlude">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_baseline_calibration_1a031e7aa24f44572242dd27dc5c4f8be8"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#postlude" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="prelude">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_baseline_calibration_1a6fac31a1417c5b233e24aad9c0cc9c70"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#prelude" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="target">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_baseline_calibration_1a743e6b645ba2341cb64e3f30a32e6931"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#target" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_binary_search"></span><code class="sig-name descname"><span class="pre">calix.common.algorithms.BinarySearch</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.base.Algorithm</span></code></dt>
<dd><p>Perform a binary search within the parameter range of a calibration. </p>
<p>Using the class requires basic settings, which come from an instance of a Calibration class. Therefore it is required to hook the algorithm to a calibration before calling <a class="reference internal" href="#classcalix_1_1common_1_1algorithms_1_1_binary_search_1aa55cc6f03c55d1af931802280e23b2d0"><span class="std std-ref">run()</span></a>. Calling run(connection, target_result) then performs the calibration. The algorithm starts with the usual binary search algorithms and adds two additional steps in the end. This aims to explore the value above as well as below the last tested value of the normal binary search algorithm. The best-suited parameter tested during the last few steps is returned.</p>
<p>:ivar calibration: Class derived from base class Calibration implementing functions for configuring parameters and measuring results as well as yielding important parameters for the algorithm to run. :ivar n_steps: Number of steps to use during calibration. :ivar step_increments: Amount to change parameter with each step. :ivar initial_parameters: Parameters to start calibration with.</p>
<p>:cvar n_steps_best: Number of steps (counted from last) to take into account when finding the best parameters in the end. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1common_1_1algorithms_1_1_noisy_binary_search"><span class="std std-ref">calix.common.algorithms.NoisyBinarySearch</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id3">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_binary_search_1ad4c504842dc198a6627256829d152a89"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id3" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id4">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_binary_search_1a49a072342205be44ce9e25584658684e"></span><code class="sig-name descname"><span class="pre">hook_to_calibration</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">base.Calibration</span> <span class="pre">calibration</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id4" title="Permalink to this definition">¶</a></dt>
<dd><p>Make an instance of a calibration known to the algorithm, allowing to use parameters set there. </p>
<p>:param calibration: Instance of calibration class that will be run with this algorithm. </p>
</dd></dl>

<dl class="py function">
<dt id="id5">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_binary_search_1aa55cc6f03c55d1af931802280e23b2d0"></span><code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">float</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">target_result</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id5" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a binary search within given parameter range. </p>
<p>In the end, the parameter is moved by 1 additionally. This way, the result of the binary search and the two neighboring settings are tested and the best-suitable parameter is returned.</p>
<p>:param connection: Connection that will be used when setting up parameters and measuring results. :param target_result: Target for the calibration. The parameters will be set up such that the results match the target as close as possible. The target can be either a single value that will be used for all instances of parameters or an array containing a specific target for each instance. When using an array, its length has to match n_instances.</p>
<p>:return: Best suited parameters to reach given targets.</p>
<p>:raises ValueError: if the measure_parameters() function of the provided calibration class returns an array with bad length. :raises ValueError: if the number of steps to take into account when finding the best parameters in the end is smaller than 3. A value of 3 is required for the additional step to make sense. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="initial_parameters">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_binary_search_1a94a003b20bbf3543f65012cfc22d9ed7"></span><code class="sig-name descname"><span class="pre">initial_parameters</span></code><a class="headerlink" href="#initial_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="n_steps">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_binary_search_1abb3a32c5083dcb8bd343a47f276e2534"></span><code class="sig-name descname"><span class="pre">n_steps</span></code><a class="headerlink" href="#n_steps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="step_increments">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_binary_search_1a7e182cc3dea6c9841532ee439d4b13ba"></span><code class="sig-name descname"><span class="pre">step_increments</span></code><a class="headerlink" href="#step_increments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.common.boundary_check.BoundaryCheckResult">
<span class="target" id="classcalix_1_1common_1_1boundary__check_1_1_boundary_check_result"></span><em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">BoundaryCheckResult</span></code><a class="headerlink" href="#calix.common.boundary_check.BoundaryCheckResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Result object for boundary checks. </p>
<p>Contains:<ul class="simple">
<li><p>Parameters clipped to a desired parameter range.</p></li>
<li><p>Boolean mask of parameters which initially exceeded the desired parameter range. Values of True indicate reaching the boundaries.</p></li>
<li><p>List of strings containing error messages. May be empty, as messages are only returned if errors are given. </p></li>
</ul>
</p>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_options"></span><code class="sig-name descname"><span class="pre">calix.common.cadc.CADCCalibOptions</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.base.CalibrationOptions</span></code></dt>
<dd><p>Further configuration parameters for the CADC calibration, that are not directly calibration targets. </p>
<p>:ivar calibrate_offsets: Decide whether the individual channel offsets are calibrated. For standard usecases, including neuron and correlation measurements, this should be enabled (default). Only in case the auto-calibrating correlation reset (cf. hal.CommonCorrelationConfig) is used, this should be disabled. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id6">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_options_1a2c1d75fe2721f16d786f363864ba5b3d"></span><code class="sig-name descname"><span class="pre">bool</span></code><a class="headerlink" href="#id6" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_result"></span><code class="sig-name descname"><span class="pre">calix.common.cadc.CADCCalibResult</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.base.CalibrationResult</span></code></dt>
<dd><p>Result object for the CADC calibration. </p>
<p>Contains:<ul class="simple">
<li><p>Calibrated values for cadc_v_ramp_offset. One per quadrant.</p></li>
<li><p>Calibrated values for cadc_i_ramp_slope. One per quadrant.</p></li>
<li><p>Calibrated digital channel offsets. One per channel.</p></li>
<li><p>Success mask for calibration. Successfully calibrated channels are indicated by True, for any failure the channels will be flagged False. Failing quadrants result in all channels on that quadrant being flagged False. </p></li>
</ul>
</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="apply">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_result_1abbe5750fc13d26cee7c86cf019c92e35"></span><code class="sig-name descname"><span class="pre">apply</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[sta.PlaybackProgramBuilder</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilderDumper]</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the calibration into the given builder. </p>
<p>Applying configures and enables the CADC so that it is ready for usage, just like after running the calibration.</p>
<p>:param builder: Builder or dumper to append configuration instructions to. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id7">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_result_1afe13a76dc675b675438c299f89ff36e0"></span><code class="sig-name descname"><span class="pre">dtype</span></code><a class="headerlink" href="#id7" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id8">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_result_1a20ec4dabda8b5691c22c6797a8ed7d86"></span><code class="sig-name descname"><span class="pre">ndarray</span></code><a class="headerlink" href="#id8" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id9">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_result_1a47aee91ef2e6eccedf4f8d722669789a"></span><code class="sig-name descname"><span class="pre">size</span></code><a class="headerlink" href="#id9" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_target"></span><code class="sig-name descname"><span class="pre">calix.common.cadc.CADCCalibTarget</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.base.CalibrationTarget</span></code></dt>
<dd><p>Target parameters for the CADC calibration. </p>
<p>:ivar dynamic_range: CapMem settings (LSB) at the minimum and maximum of the desired dynamic range. By default, the full dynamic range of the CADC is used, which corresponds to some 0.15 to 1.05 V. The voltages are configured as <code class="docutils literal notranslate"><span class="pre">stp_v_charge_0</span></code>, which gets connected to the CADCs via the CapMem debug readout. :ivar read_range: Target CADC reads at the lower and upper end of the dynamic range. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="check_values">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_target_1a3a20c2a27b8893738997b6d08983ed10"></span><code class="sig-name descname"><span class="pre">check_values</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#check_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the given parameters are possible within the CapMem and CADC value ranges. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="feasible_ranges">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_target_1ae215a56962b8b81efe3e13fb13a9ae36"></span><code class="sig-name descname"><span class="pre">feasible_ranges</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{&quot;dynamic_range&quot;:</span> <span class="pre">base.ParameterRange(70,</span> <span class="pre">550),&quot;read_range&quot;:</span> <span class="pre">base.ParameterRange(20,</span> <span class="pre">220)}</span></em><a class="headerlink" href="#feasible_ranges" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ParameterRange">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_target_1ab919e54377ca0f48bde568af41598e34"></span><code class="sig-name descname"><span class="pre">ParameterRange</span></code><a class="headerlink" href="#ParameterRange" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__helpers_1_1_c_a_d_c_read_neurons"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_helpers.CADCReadNeurons</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">sta.PlaybackGenerator</span></code></dt>
<dd><p>Read CADC channels in both synrams, and return a <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__helpers_1_1_c_a_d_c_read_neurons_1_1_result"><span class="std std-ref">Result</span></a> object, which interprets the reads as neuron results. </p>
<p>Note that the CADCs have to be connected to the neurons for this to make sense. After the builder has been run, the <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__helpers_1_1_c_a_d_c_read_neurons_1_1_result"><span class="std std-ref">Result</span></a> can be evaluated. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="generate">
<span class="target" id="classcalix_1_1hagen_1_1neuron__helpers_1_1_c_a_d_c_read_neurons_1ac14cd25cf28e6b74a29dbf1fc7a80071"></span><code class="sig-name descname"><span class="pre">generate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a builder with CADC read instructions for both synrams. </p>
<p>:return: Tuple containing:<ul class="simple">
<li><p>Builder containing the read instructions.</p></li>
<li><p><a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__helpers_1_1_c_a_d_c_read_neurons_1_1_result"><span class="std std-ref">Result</span></a> object that can be processed. </p></li>
</ul>
</p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c"></span><code class="sig-name descname"><span class="pre">neuron_icc_bias.CalibrateICCMADC</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">madc_base.Calibration</span></code></dt>
<dd><p>Calibrate the inter-compartment conductance time constant of all neurons to the provided target value. </p>
<p>Two neighboring, unconnected neuron circuits are set to different leak potentials. Then the two neurons are connected using the inter-compartment conductance. During that connection process the membrane of the neuron of interest is recorded with the MADC. Throughout this process the leak potential of the neighboring neurons approach one another exponentially. An exponential is fitted to the recorded trace and the bias current responsible for the inter-compartment conductance is tweaked such that the desired value for the time constant is reached.</p>
<p>The membrane potentials decay with a time constant tau_total, which is given by: tau_total = 1 / (2 / tau_icc + 1 / tau_leak) &lt;=&gt; tau_icc = 2 * tau_leak * tau_total / (tau_leak - tau_total)</p>
<p>If the membrane time constant (tau_leak) is large compared to tau_icc, tau_total is approximately half of tau_icc (the factor 2 in the equation above originates from the two membrane time constants of the two involved neurons). For that reason the leak conductance is set minimal during calibration.</p>
<p>This calibration decides whether inter-compartment conductance bias current division or multiplication is required during prelude. The given neuron configs are therefore altered. To be able to measure the total time constant some requirements have to be fulfilled which are set by calling <a class="reference internal" href="#classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1a2ee9e5c0de8f5a315edb7fdfa1a3bb7a"><span class="std std-ref">prepare_for_measurement()</span></a>.</p>
<p>Note:<ul class="simple">
<li><p>Leak potentials should be set alternatingly with a difference of a few 10 LSB (in CADC reads) between even and odd neurons. As the conductance between the compartments depends on the base voltages, it is recommended to choose a range, which will later also be used for experiments.</p></li>
</ul>
</p>
<p>:ivar neuron_configs: List of desired neuron configurations. Necessary to enable inter-compartment conductance bias division/multiplication. :ivar v_leak: List of target leak potentials. When calibrating the icc the leak potential will be calibrated to the provided leak potentials in the prelude. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id12">
<span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1a32be58b0e7e39f7c01c0fa45c4d760f0"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self,</span> <span class="pre">pq.quantity.Quantity</span> <span class="pre">target=2</span> <span class="pre">*pq.us,</span> <span class="pre">np.ndarray</span> <span class="pre">v_leak=np.tile([80,</span> <span class="pre">110],</span> <span class="pre">int(halco.NeuronConfigOnDLS.size/2)),</span> <span class="pre">Optional[List[hal.NeuronConfig]]</span> <span class="pre">neuron_configs=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id12" title="Permalink to this definition">¶</a></dt>
<dd><p>:param target: Calibration target for the inter-compartment conductance. </p>
<p>Note that we measure the total time constant tau_total. Please refer to the class doc-string for further reading. :param v_leak: Target for the leak potentials. :param neuron_configs: List of neuron configurations. If None, the hagen-mode default neuron config is used for all neurons. </p>
</dd></dl>

<dl class="py function">
<dt id="id13">
<span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1a6a68c05a840ede446228df772300a330"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id13" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the given array of inter-compartment conductance bias currents. </p>
<p>:param builder: Builder to append configuration instructions to. :param parameters: Array of nmda bias currents to set up.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="evaluate">
<span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1aaa1546fa4b62153287c0ce691fecf241"></span><code class="sig-name descname"><span class="pre">evaluate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">List[np.ndarray]</span> <span class="pre">samples</span></em><span class="sig-paren">)</span><a class="headerlink" href="#evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the obtained MADC samples. </p>
<p>To each neuron’s MADC samples, an exponential decay is fitted and the resulting time constant is returned.</p>
<p>:param samples: MADC samples obtained for each neuron.</p>
<p>:return: Array of the fitted total time constants as quantity. </p>
</dd></dl>

<dl class="py function">
<dt id="neuron_config_disabled">
<span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1a7c48eca70e44a0713c025159251be411"></span><code class="sig-name descname"><span class="pre">neuron_config_disabled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em><span class="sig-paren">)</span><a class="headerlink" href="#neuron_config_disabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout disabled. </p>
<p>:param neuron_coord: Coordinate of neuron to get config for.</p>
<p>:return: Neuron config with readout disabled. </p>
</dd></dl>

<dl class="py function">
<dt id="neuron_config_readout">
<span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1a1f5f4dd4fe86ef5e9d343c79e1839829"></span><code class="sig-name descname"><span class="pre">neuron_config_readout</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em><span class="sig-paren">)</span><a class="headerlink" href="#neuron_config_readout" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout active and connected to the readout lines. </p>
<p>:param neuron_coord: Coordinate of neuron to get config for.</p>
<p>:return: Neuron config with readout enabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id14">
<span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1a061a9f5d3735a1d88461cbd35085a743"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id14" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares chip for calibration. </p>
<p>Disable all multicompartment related switches, which are required to be turned off initially during the calibration.</p>
<p>Also measures the inter-compartment conductance time constant at low and high bias currents to decide whether multiplication or division of the bias is required to reach the given targets.</p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

<dl class="py function">
<dt id="prepare_for_measurement">
<span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1a2ee9e5c0de8f5a315edb7fdfa1a3bb7a"></span><code class="sig-name descname"><span class="pre">prepare_for_measurement</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">Optional[np.ndarray]</span> <span class="pre">v_leak=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#prepare_for_measurement" title="Permalink to this definition">¶</a></dt>
<dd><p>Set all necessary chip parameters such that a calibration of the inter- compartment conductance can be executed. </p>
<p>In order to calibrate the inter compartment conductance the leak conductance is set to a small value, while preventing the membrane to float. Furthermore, the threshold comparator is disabled as well as the synaptic input. Note: The leak potential between two neighboring neurons on the same hemisphere should be calibrated some 10 LSB apart to ensure a gap large enough for a recordable decay.</p>
<p>:param connection: Connection to the chip to calibrate. :param v_leak: List of targets for the leak potential calibration. If None is given the ivar v_leak will be used. </p>
</dd></dl>

<dl class="py function">
<dt id="stimulate">
<span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1a22c533e53c55d54e747c47c85310939d"></span><code class="sig-name descname"><span class="pre">stimulate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em>, <em class="sig-param"><span class="pre">hal.Timer.Value</span> <span class="pre">stimulation_wait</span></em><span class="sig-paren">)</span><a class="headerlink" href="#stimulate" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables the inter-compartment conductance (ICC) between the compartments resulting in an approach of their membrane potentials. </p>
<p>A multicompartment neuron will be created by connecting two neurons via the somatic line with one ICC enabled. If neuron_coord is even the neuron will be connected with its right neighbor otherwise it will be connected with its left neighbor.</p>
<p>:param builder: Builder to append instructions to. :param neuron_coord: Coordinate of neuron which is currently recorded. :param stimulation_wait: Timer value at beginning of stimulation.</p>
<p>:return: Builder with instructions appended. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="id10">
<span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1a19204b2d2d2fe351d691f036148bf663"></span><code class="sig-name descname"><span class="pre">neuron_configs</span></code><a class="headerlink" href="#id10" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="sampling_time">
<span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1a7b624cbc8b6256b5e59b27a177f224d4"></span><code class="sig-name descname"><span class="pre">sampling_time</span></code><a class="headerlink" href="#sampling_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id11">
<span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1a8daa78edc2ed2033fedeffcf759a4799"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id11" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="v_leak">
<span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1a6268d3f4a3a482c6123753493b0df152"></span><code class="sig-name descname"><span class="pre">v_leak</span></code><a class="headerlink" href="#v_leak" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="wait_between_neurons">
<span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1afb11c0585d31ba7ff3b0db5bc324a08e"></span><code class="sig-name descname"><span class="pre">wait_between_neurons</span></code><a class="headerlink" href="#wait_between_neurons" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-members">Private Members</p>
<dl class="py attribute">
<dt id="dead_time">
<span id="_dead_time"></span><span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1ac7a755c080e3c3468284060a1182b8c1"></span><code class="sig-name descname"><span class="pre">_dead_time</span></code><a class="headerlink" href="#dead_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="wait_before_stimulation">
<span id="_wait_before_stimulation"></span><span class="target" id="classneuron__icc__bias_1_1_calibrate_i_c_c_m_a_d_c_1aa9bedd409104ae6536ec6d2f2d159416"></span><code class="sig-name descname"><span class="pre">_wait_before_stimulation</span></code><a class="headerlink" href="#wait_before_stimulation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration"></span><code class="sig-name descname"><span class="pre">calix.common.base.Calibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">ABC</span></code></dt>
<dd><p>Base class for calibration applications. </p>
<p>Accepts parameter range and other generally important settings. From here, Calibrations can be derived, implementing functions for at least measuring results and configuring parameters. Only one-dimensional calibrations are supported, i.e. only one variable is adjusted to move towards a desired target value.</p>
<p>:ivar parameter_range: Allowed range for parameter. :ivar inverted: Invert calibration, i.e. expect a higher parameter returning a lower result. Defaults to False. :ivar n_instances: Number of objects (e.g. neurons) to calibrate. :ivar errors: Error messages to be logged when instances of the calibration have reached the parameter_range boundaries. If None, nothing will be logged. The first (second) error message is used when the lower (upper) bound is reached. Error messages are expected to support the .format() operation. As parameter {0}, the indices of failed instances are inserted, as parameter {1}, the respective boundary value is inserted. :ivar target: Target read for calibration. Can be found during prelude, otherwise needs to be supplied to the <a class="reference internal" href="#classcalix_1_1common_1_1base_1_1_calibration_1a9787c7a10f10e057c664655f6172bed7"><span class="std std-ref">run()</span></a> method. :ivar result: List: Calibrated parameters and success mask. Only available after <a class="reference internal" href="#classcalix_1_1common_1_1base_1_1_calibration_1a9787c7a10f10e057c664655f6172bed7"><span class="std std-ref">run()</span></a> has been called.</p>
<p>:raises ValueError: if parameter_range has a bad shape or is too small. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1common_1_1cadc_1_1_channel_offset_calibration"><span class="std std-ref">calix.common.cadc.ChannelOffsetCalibration</span></a>, <a class="reference internal" href="#classcalix_1_1common_1_1cadc_1_1_ramp_offset_calibration"><span class="std std-ref">calix.common.cadc.RampOffsetCalibration</span></a>, <a class="reference internal" href="#classcalix_1_1common_1_1cadc_1_1_ramp_slope_calibration"><span class="std std-ref">calix.common.cadc.RampSlopeCalibration</span></a>, <a class="reference internal" href="#classcalix_1_1common_1_1madc__base_1_1_calibration"><span class="std std-ref">calix.common.madc_base.Calibration</span></a>, <a class="reference internal" href="#classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_c_a_d_c"><span class="std std-ref">calix.common.synapse.DACBiasCalibCADC</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id16">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_1a8dd0b507ee269717b5759e1e09553b91"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">ParameterRange</span> <span class="pre">parameter_range</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">n_instances</span></em>, <em class="sig-param"><span class="pre">bool</span> <span class="pre">inverted=False</span></em>, <em class="sig-param"><span class="pre">Optional[List[str]]</span> <span class="pre">errors=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id16" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id17">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_1a880b2a7cf1c8fda441fd4eeada462ad8"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id17" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to set up parameters for testing. </p>
<p>Use the provided builder to append instructions that configure the provided parameters. Then return the builder again. If one needs to wait between configuring the parameters and measuring, e.g. after setting a new CapMem value, this should be done here.</p>
<p>:param builder: Program Builder to which configuration instructions can be appended. :param parameters: Array of parameters that should be set up. Only integer parameters will be used.</p>
<p>:return: The Program Builder with instructions to set up the given parameters appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id18">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_1a6842c5cf9f6d56f41a4cc8981be9a8c4"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id18" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to measure the observable. </p>
<p>Typically this will read the CADC channels and return an array of the obtained reads. Use the provided builder to append read instructions, run it using the provided connection. If necessary, treat the results in any way, e.g. calculate statistics per quadrant if calibrating global settings. Then return an array that fits the number of parameters to update.</p>
<p>:param connection: Connection where builder can be executed in order to measure results. :param builder: Builder where instructions to read something can be appended.</p>
<p>:return: An array with the measurement results in a shape that corresponds to the calibration instances. Any type that allows comparison to a calibration target using an operator <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> is allowed, in particular int and float. </p>
</dd></dl>

<dl class="py function">
<dt id="id19">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_1a24ace89dc6e7cf2634217b0889929f87"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id19" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to do necessary postconfiguring of the chip. </p>
<p>If not overwritten, this function does nothing.</p>
<p>:param connection: Connection to the chip to be calibrated. </p>
</dd></dl>

<dl class="py function">
<dt id="id20">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_1a6a7fd48713c9b0b14c3d87f656070ed2"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id20" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to do necessary pre-configuration or other things that are required during the actual calibration, like finding the target values. </p>
<p>If not overwritten, this function does nothing.</p>
<p>:param connection: Connection to the chip to be calibrated. </p>
</dd></dl>

<dl class="py function">
<dt id="id21">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_1a9787c7a10f10e057c664655f6172bed7"></span><code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">Algorithm</span> <span class="pre">algorithm</span></em>, <em class="sig-param"><span class="pre">Union[numbers.Integral</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span></em>, <em class="sig-param"><span class="pre">None]</span> <span class="pre">target=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id21" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the provided algorithm to find optimal parameters. </p>
<p>Calls prelude function, calls <a class="reference internal" href="#namespacecalix_1_1common_1_1base_1abbc6a85b6bf3e20ed62493a3220ee83e"><span class="std std-ref">algorithm.run()</span></a>, calls postlude function. If self.target is not defined after the prelude function, the calibration target is required as a parameter to this function.</p>
<p>:param connection: Connection to the chip to calibrate. :param algorithm: Instance of an algorithm to be used for calibration. Will be hooked to the calibration during running and unhooked afterwards. :param target: Target result to be aimed for. If given, this target is used. If None, the attribute self.target is used.</p>
<p>:raises TypeError: If neither the target parameter or the attribute self.target are defined.</p>
<p>:return: <a class="reference internal" href="#classcalix_1_1common_1_1base_1_1_parameter_calibration_result"><span class="std std-ref">ParameterCalibrationResult</span></a>, containing the optimal parameters. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="errors">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_1a564894ad4db69247bfa07cb9b787b51b"></span><code class="sig-name descname"><span class="pre">errors</span></code><a class="headerlink" href="#errors" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="inverted">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_1a75fc9f9bf9652c0c6851fa9a565a5f6f"></span><code class="sig-name descname"><span class="pre">inverted</span></code><a class="headerlink" href="#inverted" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="n_instances">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_1abc4d1581504cb0bf8fb123238fd80a20"></span><code class="sig-name descname"><span class="pre">n_instances</span></code><a class="headerlink" href="#n_instances" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="parameter_range">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_1a3f2ca5b10daabfd199bbc63393e04ad4"></span><code class="sig-name descname"><span class="pre">parameter_range</span></code><a class="headerlink" href="#parameter_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="result">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_1af72e2b7e0432802cdb2f501e23f6caa8"></span><code class="sig-name descname"><span class="pre">result</span></code><a class="headerlink" href="#result" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id15">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_1a690201450725ca311bbdf0e394ecd543"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id15" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_calibration"></span><code class="sig-name descname"><span class="pre">calix.common.madc_base.Calibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.base.Calibration</span> <span class="pre">,</span> <span class="pre">public</span> <span class="pre">calix.common.madc_base.Recorder</span></code></dt>
<dd><p>Abstract base class for neuron calibrations using the MADC. </p>
<p>During prelude, the MADC is enabled and the current readout section config is saved. During calibration, the readout config is changed continuously to measure one neuron’s properties after another. The stimuli during measurement have to be implemented as well as the evaluation of samples. Also, the recording timing per neuron can be set. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_m_a_d_c"><span class="std std-ref">calix.common.synapse.DACBiasCalibMADC</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id22">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_calibration_1a0698134ad6e5684fa08247258847c5e2"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">base.ParameterRange</span> <span class="pre">parameter_range</span></em>, <em class="sig-param"><span class="pre">bool</span> <span class="pre">inverted</span></em>, <em class="sig-param"><span class="pre">Optional[List[str]]</span> <span class="pre">errors=None</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">n_instances=halco.NeuronConfigOnDLS.size</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id22" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id23">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_calibration_1ae37a8c26bf38551952aa333638e1a37a"></span><code class="sig-name descname"><span class="pre">evaluate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">List[np.ndarray]</span> <span class="pre">samples</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id23" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the given array of samples and return an array of results. </p>
<p>The given samples are a list of samples for each neuron. Evaluation will typically involve fitting some parameters. The relevant obtained result is to be returned.</p>
<p>:param samples: MADC samples received per neuron.</p>
<p>:return: Array containing results per neuron. </p>
</dd></dl>

<dl class="py function">
<dt id="id24">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_calibration_1a23e65d9db8c9b37b3e6838b06c211498"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id24" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure and evaluate the results. </p>
<p>Calls <a class="reference internal" href="#classcalix_1_1common_1_1madc__base_1_1_recorder_1a3538bf5e59dd76ec8aef61798ad22b4d"><span class="std std-ref">record_traces()</span></a> to acquire an MADC trace per neuron, and calls <a class="reference internal" href="#classcalix_1_1common_1_1madc__base_1_1_calibration_1ae37a8c26bf38551952aa333638e1a37a"><span class="std std-ref">evaluate()</span></a> to get an array of results from, e.g., fits.</p>
<p>:param connection: Connection to the chip to calibrate. :param builder: Builder to append measurement program to.</p>
<p>:return: Numpy array, containing evaluated results. </p>
</dd></dl>

<dl class="py function">
<dt id="id25">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_calibration_1a86834785575cee940dcd89e057f7e9cc"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id25" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore original readout and neuron configuration. </p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

<dl class="py function">
<dt id="id26">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_calibration_1a6f19e6f2c2837c297d097dacc21c8681"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id26" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares chip for the experiment. </p>
<p>Configures the MADC and sets necessary bias currents. Reads and saves readout config and neuron config to restore original state after the experiment.</p>
<p>:param connection: Connection to the chip. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix__generate__default__calibration_1_1_calibration_dumper"></span><code class="sig-name descname"><span class="pre">calix_generate_default_calibration.CalibrationDumper</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">metaclass</span> <span class="pre">,</span> <span class="pre">public</span> <span class="pre">ABCMeta</span></code></dt>
<dd><p>Dumper for calibration data into various formats, e.g. </p>
<p>calix internal, write instructions etc. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix__generate__default__calibration_1_1_calix_format_dumper"><span class="std std-ref">calix_generate_default_calibration.CalixFormatDumper</span></a>, <a class="reference internal" href="#classcalix__generate__default__calibration_1_1_coco_list_json_format_dumper"><span class="std std-ref">calix_generate_default_calibration.CocoListJsonFormatDumper</span></a>, <a class="reference internal" href="#classcalix__generate__default__calibration_1_1_coco_list_portable_binary_format_dumper"><span class="std std-ref">calix_generate_default_calibration.CocoListPortableBinaryFormatDumper</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="dump_calibration">
<span class="target" id="classcalix__generate__default__calibration_1_1_calibration_dumper_1a565051372628787da47e80e3cf79db28"></span><code class="sig-name descname"><span class="pre">dump_calibration</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">CalibrationResult</span> <span class="pre">calibration_result</span></em>, <em class="sig-param"><span class="pre">Path</span> <span class="pre">target_file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dump_calibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a calibration result and serialize it to a given file. </p>
<p>:param calibration_result: Calibration result to be serialized. :param target_file: Path to the file the result is written to. </p>
</dd></dl>

<dl class="py function">
<dt id="format_extension">
<span class="target" id="classcalix__generate__default__calibration_1_1_calibration_dumper_1aff14738fe19199cf3d78a1a4b238d9c9"></span><code class="sig-name descname"><span class="pre">format_extension</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#format_extension" title="Permalink to this definition">¶</a></dt>
<dd><p>File extension for the dumped data format, including a leading ‘. </p>
<p>‘. </p>
</dd></dl>

<dl class="py function">
<dt id="format_name">
<span class="target" id="classcalix__generate__default__calibration_1_1_calibration_dumper_1a5adf929184b942e019f47236e0fe649f"></span><code class="sig-name descname"><span class="pre">format_name</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#format_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifier for the dumped data format. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1exceptions_1_1_calibration_error"></span><code class="sig-name descname"><span class="pre">calix.common.exceptions.CalibrationError</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">Exception</span></code></dt>
<dd><p>Base class for Exceptions raised from Calibrations. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1common_1_1exceptions_1_1_calibration_not_successful"><span class="std std-ref">calix.common.exceptions.CalibrationNotSuccessful</span></a>, <a class="reference internal" href="#classcalix_1_1common_1_1exceptions_1_1_calibration_not_supported"><span class="std std-ref">calix.common.exceptions.CalibrationNotSupported</span></a>, <a class="reference internal" href="#classcalix_1_1common_1_1exceptions_1_1_too_few_samples_error"><span class="std std-ref">calix.common.exceptions.TooFewSamplesError</span></a></p>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1exceptions_1_1_calibration_not_successful"></span><code class="sig-name descname"><span class="pre">calix.common.exceptions.CalibrationNotSuccessful</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.exceptions.CalibrationError</span></code></dt>
<dd><p>Raised if a calibration fails to run successfully. </p>
<p>This may happen if actions during the prelude fail, which may be a result of not satisfying the calibration’s requirements. </p>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1exceptions_1_1_calibration_not_supported"></span><code class="sig-name descname"><span class="pre">calix.common.exceptions.CalibrationNotSupported</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.exceptions.CalibrationError</span></code></dt>
<dd><p>Raised if a calibration is not possible with the given algorithm or calibration routine. </p>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_options"></span><code class="sig-name descname"><span class="pre">calix.common.base.CalibrationOptions</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">ABC</span></code></dt>
<dd><p>Data structure for collecting other configuration parameters for higher-level calibration functions. </p>
<p>These options are not targets in the sense that they are more technical parameters. They may still affect the result, though.</p>
<p>The available choices (ranges) will be clear from the expected data types. For example, boolean switches can allow to perform the calibration differently, or a priority setting can be applied to some targets, at the cost of accuracy at other targets. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_options"><span class="std std-ref">calix.common.cadc.CADCCalibOptions</span></a></p>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix__generate__default__calibration_1_1_calibration_recorder"></span><code class="sig-name descname"><span class="pre">calix_generate_default_calibration.CalibrationRecorder</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">metaclass</span> <span class="pre">,</span> <span class="pre">public</span> <span class="pre">ABCMeta</span></code></dt>
<dd><p>Recorder for various calibration results, to be implemented for HAGEN, Spiking etc. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix__generate__default__calibration_1_1_hagen_calib_recorder"><span class="std std-ref">calix_generate_default_calibration.HagenCalibRecorder</span></a>, <a class="reference internal" href="#classcalix__generate__default__calibration_1_1_hagen_synin_calib_recorder"><span class="std std-ref">calix_generate_default_calibration.HagenSyninCalibRecorder</span></a>, <a class="reference internal" href="#classcalix__generate__default__calibration_1_1_spiking_calib_recorder"><span class="std std-ref">calix_generate_default_calibration.SpikingCalibRecorder</span></a>, <a class="reference internal" href="#classcalix__generate__default__calibration_1_1_spiking_calib_recorder2"><span class="std std-ref">calix_generate_default_calibration.SpikingCalibRecorder2</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="calibration_type">
<span class="target" id="classcalix__generate__default__calibration_1_1_calibration_recorder_1a8d1e8081514744c6520f99b216a836a8"></span><code class="sig-name descname"><span class="pre">calibration_type</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#calibration_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifier for the acquired calibration data. </p>
</dd></dl>

<dl class="py function">
<dt id="generate_calib">
<span class="target" id="classcalix__generate__default__calibration_1_1_calibration_recorder_1a46888211be2961f021c4ab9c607fadc8"></span><code class="sig-name descname"><span class="pre">generate_calib</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#generate_calib" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute calibration routines and create a result object. </p>
<p>:param connection: Connection used for acquiring calibration data. :return: Calibration result data </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_result"></span><code class="sig-name descname"><span class="pre">calix.common.base.CalibrationResult</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">ABC</span></code></dt>
<dd><p>Data structure for higher-level calibration results, that combine multiple parameters into a logal unit. </p>
<p>Used as base type for hagen and spiking calibration results.</p>
<p>:ivar target: Target parameters that were used to achieve these results. :ivar options: Further options for calibration, that also may affect the results. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_result"><span class="std std-ref">calix.common.cadc.CADCCalibResult</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id27">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_result_1a7d202d7f9010e21b4d3ba3b64d9bdb94"></span><code class="sig-name descname"><span class="pre">apply</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[sta.PlaybackProgramBuilder</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilderDumper]</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id27" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the saved calib result to the chip. </p>
<p>This function should work with either a builder or a dumper.</p>
<p>:param builder: Builder or dumper to append instructions to. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.hagen.neuron.CalibrationResultInternal">
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_calibration_result_internal"></span><em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">calix.hagen.neuron.</span></code><code class="sig-name descname"><span class="pre">CalibrationResultInternal</span></code><a class="headerlink" href="#calix.hagen.neuron.CalibrationResultInternal" title="Permalink to this definition">¶</a></dt>
<dd><p>Class providing numpy-array access to calibrated parameters. </p>
<p>Used internally during calibration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="calix.hagen.neuron.CalibrationResultInternal.to_atomic_neuron">
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_calibration_result_internal_1aa744ec4d2469e38265ad6d15fe79de82"></span><code class="sig-name descname"><span class="pre">to_atomic_neuron</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.AtomicNeuronOnDLS</span> <span class="pre">neuron_coord</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron.CalibrationResultInternal.to_atomic_neuron" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an AtomicNeuron with calibration applied. </p>
<p>:param neuron_coord: Coordinate of requested neuron.</p>
<p>:return: Complete AtomicNeuron configuration. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron.CalibrationResultInternal.to_neuron_calib_result">
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_calibration_result_internal_1a61779609355db796ff53bda60bd78219"></span><code class="sig-name descname"><span class="pre">to_neuron_calib_result</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">NeuronCalibTarget</span> <span class="pre">target</span></em>, <em class="sig-param"><span class="pre">NeuronCalibOptions</span> <span class="pre">options</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron.CalibrationResultInternal.to_neuron_calib_result" title="Permalink to this definition">¶</a></dt>
<dd><p>Conversion to <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_result"><span class="std std-ref">NeuronCalibResult</span></a>. </p>
<p>The numpy arrays get merged into lola AtomicNeurons.</p>
<p>:param target: Target parameters for calibration. :param options: Further options for calibration.</p>
<p>:return: Equivalent <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_result"><span class="std std-ref">NeuronCalibResult</span></a>. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="calix.hagen.neuron.CalibrationResultInternal.bool">
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_calibration_result_internal_1a48f4dfb583b695640244660a530d328b"></span><code class="sig-name descname"><span class="pre">bool</span></code><a class="headerlink" href="#calix.hagen.neuron.CalibrationResultInternal.bool" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.hagen.neuron.CalibrationResultInternal.dtype">
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_calibration_result_internal_1a485be7ee9cb1b0ba192c87381220ef44"></span><code class="sig-name descname"><span class="pre">dtype</span></code><a class="headerlink" href="#calix.hagen.neuron.CalibrationResultInternal.dtype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.hagen.neuron.CalibrationResultInternal.ndarray">
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_calibration_result_internal_1a37e863204bac9a2488e4c8194ebbae49"></span><code class="sig-name descname"><span class="pre">ndarray</span></code><a class="headerlink" href="#calix.hagen.neuron.CalibrationResultInternal.ndarray" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.hagen.neuron.CalibrationResultInternal.size">
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_calibration_result_internal_1ad8ad9f451e05426d427e2336295c747b"></span><code class="sig-name descname"><span class="pre">size</span></code><a class="headerlink" href="#calix.hagen.neuron.CalibrationResultInternal.size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_target"></span><code class="sig-name descname"><span class="pre">calix.common.base.CalibrationTarget</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">ABC</span></code></dt>
<dd><p>Data structure for collecting targets for higher-level calibration functions into one logical unit. </p>
<p>Targets are parameters that directly affect how a circuit is configured. They have a standard range, where the circuits will work well. Exceeding the standard range may work better for some instances (e.g., neurons) than others.</p>
<p>:cvar feasible_ranges: Dict of feasible ranges for each parameter. Warnings will be logged in case they are exceeded. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_target"><span class="std std-ref">calix.common.cadc.CADCCalibTarget</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="check">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_target_1a6f24d1be5ede6ecae317824efaacd41c"></span><code class="sig-name descname"><span class="pre">check</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#check" title="Permalink to this definition">¶</a></dt>
<dd><p>Check types and values of parameters. </p>
</dd></dl>

<dl class="py function">
<dt id="check_types">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_target_1a1ebed96182e4544c2b72e2fdcadc1141"></span><code class="sig-name descname"><span class="pre">check_types</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#check_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the given types and shapes of arrays are suitable. </p>
</dd></dl>

<dl class="py function">
<dt id="id28">
<span class="target" id="classcalix_1_1common_1_1base_1_1_calibration_target_1a8e15133e58f6c37af79e5a1dbc784867"></span><code class="sig-name descname"><span class="pre">check_values</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id28" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the provided target parameters are feasible for calibration. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix__generate__default__calibration_1_1_calix_format_dumper"></span><code class="sig-name descname"><span class="pre">calix_generate_default_calibration.CalixFormatDumper</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix_generate_default_calibration.CalibrationDumper</span></code></dt>
<dd><p>Dumper for the calix-internal data format. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id31">
<span class="target" id="classcalix__generate__default__calibration_1_1_calix_format_dumper_1adf268bd3656f24c162f6fad03794681f"></span><code class="sig-name descname"><span class="pre">dump_calibration</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">CalibrationResult</span> <span class="pre">calibration_result</span></em>, <em class="sig-param"><span class="pre">Path</span> <span class="pre">target_file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id31" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a calibration result and serialize it to a given file. </p>
<p>:param calibration_result: Calibration result to be serialized. :param target_file: Path to the file the result is written to. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id29">
<span class="target" id="classcalix__generate__default__calibration_1_1_calix_format_dumper_1a2ea8c89188612a17fe7efaa340534bde"></span><code class="sig-name descname"><span class="pre">format_extension</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;.pkl&quot;</span></em><a class="headerlink" href="#id29" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id30">
<span class="target" id="classcalix__generate__default__calibration_1_1_calix_format_dumper_1a54531b529bb3b6fd1d3478a140e8ef00"></span><code class="sig-name descname"><span class="pre">format_name</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;calix-native&quot;</span></em><a class="headerlink" href="#id30" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_channel_offset_calibration"></span><code class="sig-name descname"><span class="pre">calix.common.cadc.ChannelOffsetCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.base.Calibration</span></code></dt>
<dd><p>CADC Calibration part 3: Calibrating digital offsets of individual channels. </p>
<p>This is done by setting an intermediate voltage at the CADC debug line and setting the offsets such that all channels read the same result.</p>
<p>As one measurement at constant voltage for all channels suffices, the LinearPrediction algorithm can be used for calibration.</p>
<p>Requirements:<ul class="simple">
<li><p>All CADC channels are connected to the CADC debug line (can be achieved with <code class="docutils literal notranslate"><a class="reference internal" href="#namespacecalix_1_1common_1_1cadc__helpers_1a9430dec490ba7ccdb3ed5fae03679174"><span class="std std-ref"><span class="pre">cadc_helpers.configure_chip()</span></span></a></code>).</p></li>
<li><p>CADC debug line connected to CapMem cell <code class="docutils literal notranslate"><span class="pre">stp_v_charge_0</span></code> (can be archived with <code class="docutils literal notranslate"><a class="reference internal" href="#namespacecalix_1_1common_1_1cadc__helpers_1ae1b2868842daac1b443b9aa7bf577ac2"><span class="std std-ref"><span class="pre">cadc_helpers.configure_readout_cadc_debug()</span></span></a></code>)</p></li>
</ul>
</p>
<p>:ivar dynamic_range_mid: Mean of dynamic range min and max. The CADC channels should read medium results (around 120-128) there, if the range and read targets in the previous parts are set up sensible. The voltage is configured as <code class="docutils literal notranslate"><span class="pre">stp_v_charge_0</span></code>, which has to be connected to the CADCs via the CapMem debug readout. :ivar initial_results: CADC reads before calibrating the offsets. Stored to print statistics after calibration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id33">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_channel_offset_calibration_1ae3e6d7c6b1fbe380273bd5c87a1677b5"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hal.CapMemCell.Value</span> <span class="pre">dynamic_range_mid=hal.CapMemCell.Value(310)</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id33" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id34">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_channel_offset_calibration_1a4ff6df98eebab1bf4c89f12f66267b3b"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id34" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up the given CADC channel offsets. </p>
<p>Expects the given parameter array to be ordered like the iter_all of CADCChannelConfigOnDLS.</p>
<p>:param builder: Builder to append configuration instructions to. :param parameters: CADC channel offsets to set.</p>
<p>:return: Builder with configuration instructions appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id35">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_channel_offset_calibration_1aa1717e8f3c102ead7099b010b990845e"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id35" title="Permalink to this definition">¶</a></dt>
<dd><p>Read all CADC channels on chip. </p>
<p>:param connection: Connection to the chip to calibrate. :param builder: Builder to append read instructions to.</p>
<p>:return: Array containing integer results for each channel. The order is top causal, top acausal, bottom causal, bottom acausal; within these blocks the channels are ordered from left to right. The order of returned results corresponds to the enums of halco.CADCChannelConfigOnDLS. </p>
</dd></dl>

<dl class="py function">
<dt id="id36">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_channel_offset_calibration_1a3f6089f5a5254c008359a567140a4db5"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id36" title="Permalink to this definition">¶</a></dt>
<dd><p>Print statistics about the CADC reads before and after calibration. </p>
<p>Data after calibration is measured using the connection.</p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

<dl class="py function">
<dt id="id37">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_channel_offset_calibration_1a624fe4fbe0690b959317431ae093819f"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id37" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure debug readout cell to roughly the middle of the desired dynamic CADC range. </p>
<p>Measure the target read to aim for when calculating the offsets.</p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="dynamic_range_mid">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_channel_offset_calibration_1a01c948920b520308d0e8c58e7f652c80"></span><code class="sig-name descname"><span class="pre">dynamic_range_mid</span></code><a class="headerlink" href="#dynamic_range_mid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="initial_results">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_channel_offset_calibration_1a2ca4be4df408b8f839fd881d28957cef"></span><code class="sig-name descname"><span class="pre">initial_results</span></code><a class="headerlink" href="#initial_results" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id32">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_channel_offset_calibration_1a9e28fe81a1b187e25e06738cf668e13e"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id32" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-functions">Public Static Functions</p>
<dl class="py function">
<dt id="find_target_read">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_channel_offset_calibration_1a855267f1f49c0277285b1c8375347fa2"></span><code class="sig-name descname"><span class="pre">find_target_read</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">reads</span></em><span class="sig-paren">)</span><a class="headerlink" href="#find_target_read" title="Permalink to this definition">¶</a></dt>
<dd><p>Inspect a given array of CADC Samples and return the median read of all CADC channels. </p>
<p>This will be used as target read when calculating the individual channel offsets.</p>
<p>If the median of all CADC channels is far off the expected value, a warning is logged.</p>
<p>:param reads: Array of CADC Samples for both synrams obtained at a constant common voltage.</p>
<p>:return: Calibration target for individual CADC channel offsets. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix__generate__default__calibration_1_1_coco_list_json_format_dumper"></span><code class="sig-name descname"><span class="pre">calix_generate_default_calibration.CocoListJsonFormatDumper</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix_generate_default_calibration.CalibrationDumper</span></code></dt>
<dd><p>Dumper for the Coordinate-Container-List data in json format with gzip compression. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id40">
<span class="target" id="classcalix__generate__default__calibration_1_1_coco_list_json_format_dumper_1ad2f1cf210f49ad1648d5c2e2e51029dd"></span><code class="sig-name descname"><span class="pre">dump_calibration</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">CalibrationResult</span> <span class="pre">calibration_result</span></em>, <em class="sig-param"><span class="pre">Path</span> <span class="pre">target_file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id40" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a calibration result and serialize it to a given file. </p>
<p>:param calibration_result: Calibration result to be serialized. :param target_file: Path to the file the result is written to. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id38">
<span class="target" id="classcalix__generate__default__calibration_1_1_coco_list_json_format_dumper_1a41d6d3906881d5d152e61e524600c4d9"></span><code class="sig-name descname"><span class="pre">format_extension</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;.json.gz&quot;</span></em><a class="headerlink" href="#id38" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id39">
<span class="target" id="classcalix__generate__default__calibration_1_1_coco_list_json_format_dumper_1a150c5726e3cdf8deacaddcf7cfc882e4"></span><code class="sig-name descname"><span class="pre">format_name</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;cocolist&quot;</span></em><a class="headerlink" href="#id39" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix__generate__default__calibration_1_1_coco_list_portable_binary_format_dumper"></span><code class="sig-name descname"><span class="pre">calix_generate_default_calibration.CocoListPortableBinaryFormatDumper</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix_generate_default_calibration.CalibrationDumper</span></code></dt>
<dd><p>Dumper for the Coordinate-Container-List data in portable binary format. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id43">
<span class="target" id="classcalix__generate__default__calibration_1_1_coco_list_portable_binary_format_dumper_1a01356e5981e7a71a1fb0b2cab8f615aa"></span><code class="sig-name descname"><span class="pre">dump_calibration</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">CalibrationResult</span> <span class="pre">calibration_result</span></em>, <em class="sig-param"><span class="pre">Path</span> <span class="pre">target_file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id43" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a calibration result and serialize it to a given file. </p>
<p>:param calibration_result: Calibration result to be serialized. :param target_file: Path to the file the result is written to. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id41">
<span class="target" id="classcalix__generate__default__calibration_1_1_coco_list_portable_binary_format_dumper_1a527bbaf5e20a61c39e557a4e907bea41"></span><code class="sig-name descname"><span class="pre">format_extension</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;.pbin&quot;</span></em><a class="headerlink" href="#id41" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id42">
<span class="target" id="classcalix__generate__default__calibration_1_1_coco_list_portable_binary_format_dumper_1aa036029c49c30a46c0eb8352f864a3e5"></span><code class="sig-name descname"><span class="pre">format_name</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;cocolist&quot;</span></em><a class="headerlink" href="#id42" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_c_a_d_c"></span><code class="sig-name descname"><span class="pre">calix.common.synapse.DACBiasCalibCADC</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.base.Calibration</span></code></dt>
<dd><p>Calibrates synapse DAC bias currents such that the amplitudes received at all neurons match those of the weakest quadrant. </p>
<p>The voltage drop on the synapse lines is measured using the CADC. The synaptic inputs are disabled and the synaptic time constant is set maximum. The initial value of the synaptic time constant and input strength are not restored. The digital configuration of the neuron is restored at the end of the calibration.</p>
<p>Requirements:<ul class="simple">
<li><p>CADCs are connected to the neuron readout.</p></li>
<li><p>Bias currents are set such that synaptic input lines can be observed on the neuron readout: The neurons’ readout amplifiers and the source followers in the neurons’ synaptic inputs need to be biased.</p></li>
</ul>
</p>
<p>:ivar original_neuron_config: Neuron configs before calibration, read during prelude, restored in postlude. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id45">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_c_a_d_c_1a24d3fdc69cb7f0f5ebe2395866699d7a"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id45" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id46">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_c_a_d_c_1a8610df2d025fdad3ebc2871c5e470016"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id46" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures the given array of synapse DAC bias currents. </p>
<p>:param builder: Builder to append configuration instructions to. :param parameters: Array of bias currents to set up.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id47">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_c_a_d_c_1a75ea7915158ff308fa21518d0c230707"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id47" title="Permalink to this definition">¶</a></dt>
<dd><p>Measures the drop in synaptic input potentials for all synapse columns. </p>
<p>:param connection: Connection to a chip. :param builder: Builder to append read instructions to.</p>
<p>:return: Array containing the median drop in synaptic input potential per quadrant. </p>
</dd></dl>

<dl class="py function">
<dt id="id48">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_c_a_d_c_1a358f90ea0b2e04fa928545071d6bae2b"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id48" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore original neuron configuration. </p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

<dl class="py function">
<dt id="id49">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_c_a_d_c_1a32f502b9ec36e92b89fc122c7ef9be0e"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id49" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares chip for calibration. </p>
<p>Reads the current neuron configuration which will be restored at the end of the calibration. After that synaptic inputs are disabled. Configures synapse drivers to stimulate the necessary input.</p>
<p>Measures the amplitudes of synapses per quadrant once, calculates the median amplitude per quadrant, and sets the ivar <code class="docutils literal notranslate"><span class="pre">target</span></code> to the minimum of these median amplitudes (which ensures the target can be reached, in case the maximum bias current of 1022 was used before).</p>
<p>:param connection: Connection to the chip to calibrate.</p>
<p>:raises CalibrationNotSuccessful: If amplitudes can not be brought into a reliable range by adjusting the number of enabled synapse rows. :raises AssertionError: If the number of enabled synapse rows is not updated in a given iteration. This indicates a bug and should not happen. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="original_neuron_config">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_c_a_d_c_1acb4c14519a557e09038260fddbc1aaa5"></span><code class="sig-name descname"><span class="pre">original_neuron_config</span></code><a class="headerlink" href="#original_neuron_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id44">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_c_a_d_c_1a70c2eedd103c81a9b9b0820d256b6da1"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id44" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_m_a_d_c"></span><code class="sig-name descname"><span class="pre">calix.common.synapse.DACBiasCalibMADC</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.madc_base.Calibration</span></code></dt>
<dd><p>Calibrates synapse DAC bias currents such that the amplitudes received at all neurons match those of the weakest quadrant. </p>
<p>The voltage drop on the synapse lines is measured using the MADC. The synaptic inputs are disabled and the synaptic time constant is set maximum. The initial value of the synaptic time constant and input strength are not restored. The digital configuration of the neuron is restored at the end of the calibration.</p>
<p>:ivar neuron_configs: List of neuron configs that will be used as basis for the <code class="docutils literal notranslate"><span class="pre">neuron_config_disabled</span></code> and <code class="docutils literal notranslate"><span class="pre">neuron_config_readout</span></code> functions. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id55">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_m_a_d_c_1aba353c74224a280b88983aadea4b053e"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id55" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id56">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_m_a_d_c_1a923b1b8133015dd7f8c186accd87732a"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id56" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures the given array of synapse DAC bias currents. </p>
<p>:param builder: Builder to append configuration instructions to. :param parameters: Array of bias currents to set up.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id57">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_m_a_d_c_1aae7188cb0b42d157111b9f1adc2ae500"></span><code class="sig-name descname"><span class="pre">evaluate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">List[np.ndarray]</span> <span class="pre">samples</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id57" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the obtained MADC samples. </p>
<p>Calculates for each trace the peak amplitude (maximum - minimum) and returns the median value of these amplitudes for each quadrant.</p>
<p>:param samples: MADC samples obtained for each neuron.</p>
<p>:return: Median peak amplitude per quadrant. </p>
</dd></dl>

<dl class="py function">
<dt id="id58">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_m_a_d_c_1ae6b4b083daf45a661e399ef021a7b652"></span><code class="sig-name descname"><span class="pre">neuron_config_disabled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neuron_coord</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id58" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout disabled. </p>
<p>:return: Neuron config with readout disabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id59">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_m_a_d_c_1ac63c1d18ef78088755471c34a2ad76c9"></span><code class="sig-name descname"><span class="pre">neuron_config_readout</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neuron_coord</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id59" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout enabled. </p>
<p>:return: Neuron config with readout enabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id60">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_m_a_d_c_1a13225f96113c2409573a12b9e0eecef0"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id60" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore original readout and neuron configuration. </p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

<dl class="py function">
<dt id="id61">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_m_a_d_c_1a53b0e4b0718935f4fb9448e2b6fb31a7"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id61" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares chip for calibration. </p>
<p>Disables synaptic inputs. Configures synapse drivers to stimulate the necessary input.</p>
<p>Measures the amplitudes of synapses per quadrant once, calculates the median amplitude per quadrant, and sets the ivar <code class="docutils literal notranslate"><span class="pre">target</span></code> to the minimum of these median amplitudes (which ensures the target can be reached by all quadrants in case some are already configured to the maximum bias current).</p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

<dl class="py function">
<dt id="id62">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_m_a_d_c_1a397c1d714dbc5af27c2b7724216d3191"></span><code class="sig-name descname"><span class="pre">stimulate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em>, <em class="sig-param"><span class="pre">hal.Timer.Value</span> <span class="pre">stimulation_time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id62" title="Permalink to this definition">¶</a></dt>
<dd><p>Send some PADI events to the synaptic input in order to drop the potential. </p>
<p>:param builder: Builder to append PADI events to. :param neuron_coord: Coordinate of neuron which is currently recorded. :param stimulation_time: Timer value at beginning of stimulation.</p>
<p>:return: Builder with PADI events appended. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="id50">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_m_a_d_c_1ac43ef99fed1a2095eb7c105723f49172"></span><code class="sig-name descname"><span class="pre">neuron_configs</span></code><a class="headerlink" href="#id50" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id51">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_m_a_d_c_1acc53fe102fa4959149281e52c9592ea6"></span><code class="sig-name descname"><span class="pre">sampling_time</span></code><a class="headerlink" href="#id51" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id52">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_m_a_d_c_1ac2b1de16fe85d5a6fa2be37a76b5cce9"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id52" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id53">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_m_a_d_c_1ab5e0d512817ab317f6db7962a778ece4"></span><code class="sig-name descname"><span class="pre">wait_between_neurons</span></code><a class="headerlink" href="#id53" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-members">Private Members</p>
<dl class="py attribute">
<dt id="id54">
<span class="target" id="classcalix_1_1common_1_1synapse_1_1_d_a_c_bias_calib_m_a_d_c_1afa980f98721382e843497dce915a631a"></span><code class="sig-name descname"><span class="pre">_wait_before_stimulation</span></code><a class="headerlink" href="#id54" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1exceptions_1_1_excessive_noise_error"></span><code class="sig-name descname"><span class="pre">calix.common.exceptions.ExcessiveNoiseError</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.exceptions.AlgorithmError</span></code></dt>
<dd><p>Raised if an algorithm that starts with noise is used with an excessive amount of noise requested on the initial parameters. </p>
<p>If the amount of noise requested leads to hitting the boundaries of the dynamic range of the calibration within the first step, we raise this error as applying this amount of noise is not sensible. </p>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_bias_calibration"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_synin.ExcSynBiasCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.hagen.neuron_synin.SynBiasCalibration</span></code></dt>
<dd><p>Class for calibrating the excitatory synaptic input bias current. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-static-attributes">Private Static Attributes</p>
<dl class="py attribute">
<dt id="bias_current_coord">
<span id="_bias_current_coord"></span><span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_bias_calibration_1a072fa453ecc2d2f7161face445846d79"></span><code class="sig-name descname"><span class="pre">_bias_current_coord</span></code><em class="property"> <span class="pre">=</span> <span class="pre">halco.CapMemRowOnCapMemBlock.i_bias_synin_exc_gm</span></em><a class="headerlink" href="#bias_current_coord" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="expected_sign">
<span id="_expected_sign"></span><span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_bias_calibration_1acbcc4852499a608385242db89316da73"></span><code class="sig-name descname"><span class="pre">_expected_sign</span></code><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#expected_sign" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="log_abbreviation">
<span id="_log_abbreviation"></span><span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_bias_calibration_1a4b63a67bdec2bb44c84e55794e35d856"></span><code class="sig-name descname"><span class="pre">_log_abbreviation</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;exc&quot;</span></em><a class="headerlink" href="#log_abbreviation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="reference_calib_type">
<span id="_reference_calib_type"></span><span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_bias_calibration_1a345c5a4e3fdbb7fe1f9f4b7956b7e280"></span><code class="sig-name descname"><span class="pre">_reference_calib_type</span></code><em class="property"> <span class="pre">=</span> <span class="pre">ExcSynReferenceCalibration</span></em><a class="headerlink" href="#reference_calib_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="row_mode">
<span id="_row_mode"></span><span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_bias_calibration_1a031735ba99559141931e202f6ad092f7"></span><code class="sig-name descname"><span class="pre">_row_mode</span></code><em class="property"> <span class="pre">=</span> <span class="pre">hal.SynapseDriverConfig.RowMode.excitatory</span></em><a class="headerlink" href="#row_mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_reference_calib_m_a_d_c"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_synin.ExcSynReferenceCalibMADC</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.hagen.neuron_synin.SynReferenceCalibMADC</span></code></dt>
<dd><p>Calibrate excitatory synaptic input reference potential. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-static-attributes">Private Static Attributes</p>
<dl class="py attribute">
<dt id="id63">
<span id="_inverted"></span><span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_reference_calib_m_a_d_c_1a063fd9ee14462bc4df847509ac4e1bfb"></span><code class="sig-name descname"><span class="pre">_inverted</span></code><em class="property"> <span class="pre">=</span> <span class="pre">True</span></em><a class="headerlink" href="#id63" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="reference_potential_coord">
<span id="_reference_potential_coord"></span><span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_reference_calib_m_a_d_c_1a19ab981b82aca75b0c01ce089a6f213d"></span><code class="sig-name descname"><span class="pre">_reference_potential_coord</span></code><em class="property"> <span class="pre">=</span> <span class="pre">\</span></em><a class="headerlink" href="#reference_potential_coord" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_reference_calibration"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_synin.ExcSynReferenceCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.hagen.neuron_synin.SynReferenceCalibration</span></code></dt>
<dd><p>Class for calibrating the excitatory synaptic input reference potential. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-static-attributes">Private Static Attributes</p>
<dl class="py attribute">
<dt id="bias_current_keyword">
<span id="_bias_current_keyword"></span><span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_reference_calibration_1af11f4ab5d229b5bd1e140129ccb7d3d9"></span><code class="sig-name descname"><span class="pre">_bias_current_keyword</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;excitatory_biases&quot;</span></em><a class="headerlink" href="#bias_current_keyword" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capmem_parameter_coord">
<span id="_capmem_parameter_coord"></span><span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_reference_calibration_1ac89c3ae49df508e592e0b2aad14cf3a7"></span><code class="sig-name descname"><span class="pre">_capmem_parameter_coord</span></code><em class="property"> <span class="pre">=</span> <span class="pre">\</span></em><a class="headerlink" href="#capmem_parameter_coord" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id64">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_reference_calibration_1a94c4f02f597c11cdb2df30d347794df7"></span><code class="sig-name descname"><span class="pre">_inverted</span></code><em class="property"> <span class="pre">=</span> <span class="pre">True</span></em><a class="headerlink" href="#id64" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id65">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_reference_calibration_1a71f768f79f042266239d51a55e7a7bf0"></span><code class="sig-name descname"><span class="pre">_log_abbreviation</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;exc&quot;</span></em><a class="headerlink" href="#id65" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_time_constant_calibration"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_synin.ExcSynTimeConstantCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.hagen.neuron_synin.SynTimeConstantCalibration</span></code></dt>
<dd><p>Calibrate excitatory synaptic input time constant. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-static-attributes">Private Static Attributes</p>
<dl class="py attribute">
<dt id="id66">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_time_constant_calibration_1a22aae65793c34fa12dccff441e7ba5fa"></span><code class="sig-name descname"><span class="pre">_bias_current_coord</span></code><em class="property"> <span class="pre">=</span> <span class="pre">halco.CapMemRowOnCapMemBlock.i_bias_synin_exc_tau</span></em><a class="headerlink" href="#id66" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="readout_source">
<span id="_readout_source"></span><span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_time_constant_calibration_1ab78251db1b9cdb2aa9da32731268afc6"></span><code class="sig-name descname"><span class="pre">_readout_source</span></code><em class="property"> <span class="pre">=</span> <span class="pre">hal.NeuronConfig.ReadoutSource.exc_synin</span></em><a class="headerlink" href="#readout_source" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id67">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_time_constant_calibration_1a7d4b34b714d15b6aa43fd301e2e42a4b"></span><code class="sig-name descname"><span class="pre">_row_mode</span></code><em class="property"> <span class="pre">=</span> <span class="pre">hal.SynapseDriverConfig.RowMode.excitatory</span></em><a class="headerlink" href="#id67" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix__generate__default__calibration_1_1_hagen_calibration"></span><code class="sig-name descname"><span class="pre">calix_generate_default_calibration.HagenCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix_generate_default_calibration.RecorderAndDumper</span></code></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="dumpers">
<span class="target" id="classcalix__generate__default__calibration_1_1_hagen_calibration_1a42d34a81f8d9319f2d7651b464d3c566"></span><code class="sig-name descname"><span class="pre">dumpers</span></code><em class="property"> <span class="pre">=</span> <span class="pre">[CalixFormatDumper(),</span>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">CocoListPortableBinaryFormatDumper(),</span>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">CocoListJsonFormatDumper()]</span></em><a class="headerlink" href="#dumpers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="recorder">
<span class="target" id="classcalix__generate__default__calibration_1_1_hagen_calibration_1a795b38796f79f76621560ef68ae0dcbf"></span><code class="sig-name descname"><span class="pre">recorder</span></code><em class="property"> <span class="pre">=</span> <span class="pre">HagenCalibRecorder()</span></em><a class="headerlink" href="#recorder" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1_hagen_calibration_options"></span><code class="sig-name descname"><span class="pre">calix.hagen.HagenCalibrationOptions</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationOptions</span></code></dt>
<dd><p>Dataclass collecting further options for Hagen-mode calibrations with integration on membranes. </p>
<p>:ivar cadc_options: Further options for CADC calibration. :ivar neuron_options: Further options for neuron calibration. :ivar neuron_disable_leakage: Decide whether the neuron leak bias currents are set to zero after calibration. This is done by default, which disables leakage entirely. Note that even if the leak bias is set to zero, some pseudo-leakage may occur through the synaptic input OTAs. :ivar synapse_driver_options: Further options for synapse driver calibration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id68">
<span class="target" id="classcalix_1_1hagen_1_1_hagen_calibration_options_1a1b3470d714d397c3b7a71f0f56ba9411"></span><code class="sig-name descname"><span class="pre">bool</span></code><a class="headerlink" href="#id68" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="CADCCalibOptions">
<span class="target" id="classcalix_1_1hagen_1_1_hagen_calibration_options_1a52eb7534d944bcd6f8b52a4172b68c05"></span><code class="sig-name descname"><span class="pre">CADCCalibOptions</span></code><a class="headerlink" href="#CADCCalibOptions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="NeuronCalibOptions">
<span class="target" id="classcalix_1_1hagen_1_1_hagen_calibration_options_1a8518be1e004816cf46a816336269b8b4"></span><code class="sig-name descname"><span class="pre">NeuronCalibOptions</span></code><a class="headerlink" href="#NeuronCalibOptions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1_hagen_calibration_result"></span><code class="sig-name descname"><span class="pre">calix.hagen.HagenCalibrationResult</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationResult</span></code></dt>
<dd><p>Data class containing results of cadc, neuron and synapse driver calibration, all what is necessary for operation in hagen mode when using integration on the neurons’ membranes. </p>
<p>Refer to the documentation of :class:<code class="docutils literal notranslate"><span class="pre">calix.hagen.cadc.CADCCalibResult</span></code>, :class:<code class="docutils literal notranslate"><a class="reference internal" href="#classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_result"><span class="std std-ref"><span class="pre">calix.hagen.neuron.NeuronCalibResult</span></span></a></code> and :class:<code class="docutils literal notranslate"><a class="reference internal" href="#classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_calib_result"><span class="std std-ref"><span class="pre">calix.hagen.synapse_driver.SynapseDriverCalibResult</span></span></a></code> for details about the contained result objects. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id69">
<span class="target" id="classcalix_1_1hagen_1_1_hagen_calibration_result_1a982ef87a9f21bb03f989093580d24bb4"></span><code class="sig-name descname"><span class="pre">apply</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[sta.PlaybackProgramBuilder</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilderDumper]</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id69" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the calib to the chip. </p>
<p>Assumes the chip to be initialized already, which can be done using the stadls ExperimentInit().</p>
<p>:param builder: Builder or dumper to append instructions to. </p>
</dd></dl>

<dl class="py function">
<dt id="to_hagen_synin_result">
<span class="target" id="classcalix_1_1hagen_1_1_hagen_calibration_result_1ad18a992bcb910cd99d1d0dec32d70e16"></span><code class="sig-name descname"><span class="pre">to_hagen_synin_result</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">*Optional[cadc.CADCCalibTarget]</span> <span class="pre">cadc_target=None</span></em>, <em class="sig-param"><span class="pre">Optional[cadc.CADCCalibOptions]</span> <span class="pre">cadc_options=None</span></em>, <em class="sig-param"><span class="pre">Optional[int]</span> <span class="pre">synapse_dac_bias=None</span></em>, <em class="sig-param"><span class="pre">dict</span> <span class="pre">cadc_kwargs=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#to_hagen_synin_result" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconfigure calibration result for integration on synaptic input lines. </p>
<p>The new result is applied to the chip.</p>
<p>Only the missing parts are recalibrated, which should only take seconds to run. Note that the neuron calibration is dropped as it is not required for integration on synaptic inputs.</p>
<p>:param connection: Connection to the chip to calibrate. :param cadc_target: Target parameters for CADC calibration. :param cadc_options: Further options for CADC calibration. :param synapse_dac_bias: Target value for the synapse DAC bias calibration.</p>
<p>:return: Hagen-mode calibration result for integration on synaptic input lines. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1_hagen_calibration_target"></span><code class="sig-name descname"><span class="pre">calix.hagen.HagenCalibrationTarget</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationTarget</span></code></dt>
<dd><p>Dataclass collecting target parameters for Hagen-mode calibrations with integration on membranes. </p>
<p>:ivar cadc_target: Target parameters for CADC calibration. :ivar neuron_target: Target parameters for neuron calibration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="CADCCalibTarget">
<span class="target" id="classcalix_1_1hagen_1_1_hagen_calibration_target_1ab53e3ed0c20fd28849b7b929c6c37838"></span><code class="sig-name descname"><span class="pre">CADCCalibTarget</span></code><a class="headerlink" href="#CADCCalibTarget" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="dynamic_range">
<span class="target" id="classcalix_1_1hagen_1_1_hagen_calibration_target_1a1d16a8ff726a768e0f0277b766c54a04"></span><code class="sig-name descname"><span class="pre">dynamic_range</span></code><a class="headerlink" href="#dynamic_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="NeuronCalibTarget">
<span class="target" id="classcalix_1_1hagen_1_1_hagen_calibration_target_1affc92e9a8a06ee802c36cd3eae6c2de1"></span><code class="sig-name descname"><span class="pre">NeuronCalibTarget</span></code><a class="headerlink" href="#NeuronCalibTarget" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix__generate__default__calibration_1_1_hagen_calib_recorder"></span><code class="sig-name descname"><span class="pre">calix_generate_default_calibration.HagenCalibRecorder</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix_generate_default_calibration.CalibrationRecorder</span></code></dt>
<dd><p>Recorder for a canonical Hagen-Mode calibration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id71">
<span class="target" id="classcalix__generate__default__calibration_1_1_hagen_calib_recorder_1a08d3295ba54a9e0e463522d49e9925fd"></span><code class="sig-name descname"><span class="pre">generate_calib</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id71" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute calibration routines and create a result object. </p>
<p>:param connection: Connection used for acquiring calibration data. :return: Calibration result data </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id70">
<span class="target" id="classcalix__generate__default__calibration_1_1_hagen_calib_recorder_1ab1b432ac4073ad60b44baa4b14966ad6"></span><code class="sig-name descname"><span class="pre">calibration_type</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;hagen&quot;</span></em><a class="headerlink" href="#id70" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_hagen_d_a_c_offset_calibration"></span><code class="sig-name descname"><span class="pre">calix.hagen.synapse_driver.HagenDACOffsetCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.Calibration</span></code></dt>
<dd><p>Search Hagen-mode DAC offset settings such that drivers yield the same pulse lengths. </p>
<p>Initially, amplitudes at a high STP ramp current and a low hagen-mode DAC potential are measured, corresponding to the maximum available pulse length. We select the DAC offset such that with the desired ramp current, the amplitude starts decreasing from this maximum at a low, but non-zero DAC value (which equals a high, but non-maximum activation). Hence, this alignes the start points of the STP ramps to the start point of the DAC’s dynamic range.</p>
<p>Requirements:<ul class="simple">
<li><p>Static synapse driver bias currents are set. This can be achieved using <code class="docutils literal notranslate"><a class="reference internal" href="#namespacecalix_1_1hagen_1_1synapse__driver_1aefcc00c2c91844169a8e06f78035ea83"><span class="std std-ref"><span class="pre">preconfigure_capmem()</span></span></a></code>.</p></li>
</ul>
</p>
<p>:ivar test_activation: Hagen-mode activation to use when determining the ramp start. Should be high, close but not equal to the maximum activation. :ivar n_parallel_measurements: Number of parallel measurements to execute when measuring results. :ivar maximum_amplitudes: Maximum amplitudes per driver, measured at a high ramp current and high activation. If not supplied otherwise, it will be measured during the prelude. :ivar log: Logger used for printing outputs. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id73">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_hagen_d_a_c_offset_calibration_1a3b3812d9e92554989b39761146665b58"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id73" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id74">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_hagen_d_a_c_offset_calibration_1a7ba5f6a27dbdbf02d0d4717678a72b94"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id74" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the synapse drivers to the given offsets. </p>
<p>:param builder: Builder to append configuration to. :param parameters: Synapse driver offset settings to configure.</p>
<p>:return: Builder with configuration instructions appended. </p>
</dd></dl>

<dl class="py function">
<dt id="measure_maximum_amplitudes">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_hagen_d_a_c_offset_calibration_1a8f7f7a4c593af4c83f820cb7e9507477"></span><code class="sig-name descname"><span class="pre">measure_maximum_amplitudes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#measure_maximum_amplitudes" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure the maximum output amplitudes available per driver. </p>
<p>We configure a high ramp current and measure amplitudes at a low address in order to achieve the full pulse length, i.e. the maximum amplitude for each driver.</p>
<p>:param connection: Connection to the chip to be measured.</p>
<p>:return: Array of maximum amplitudes per driver. </p>
</dd></dl>

<dl class="py function">
<dt id="id75">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_hagen_d_a_c_offset_calibration_1a1ae6ce34b1d90cc2538c8070b86f6e25"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id75" title="Permalink to this definition">¶</a></dt>
<dd><p>Read output amplitudes of synapse drivers. </p>
<p>:param connection: Connection to the chip to run on. :param builder: Builder that is run before measuring.</p>
<p>:return: Array of synapse drivers’ output amplitudes. </p>
</dd></dl>

<dl class="py function">
<dt id="id76">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_hagen_d_a_c_offset_calibration_1a8f7a150690739294e31a4e47bdab1188"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id76" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the calibrated DAC offsets. </p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

<dl class="py function">
<dt id="id77">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_hagen_d_a_c_offset_calibration_1ae1108fad0358426a2ed5829ea8060299"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id77" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure synapse array and measure calibration target. </p>
<p>Measure target: median amplitude of all drivers.</p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="log">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_hagen_d_a_c_offset_calibration_1af76eee2b19ed158bb8e5dd2b647a826e"></span><code class="sig-name descname"><span class="pre">log</span></code><a class="headerlink" href="#log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="maximum_amplitudes">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_hagen_d_a_c_offset_calibration_1a5bd1de5bb90c0369715869cd60801e49"></span><code class="sig-name descname"><span class="pre">maximum_amplitudes</span></code><a class="headerlink" href="#maximum_amplitudes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="n_parallel_measurements">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_hagen_d_a_c_offset_calibration_1aed7237e1da3678200c11e6c7a4480953"></span><code class="sig-name descname"><span class="pre">n_parallel_measurements</span></code><a class="headerlink" href="#n_parallel_measurements" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id72">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_hagen_d_a_c_offset_calibration_1af338c66277599def2c7a2b34c5ce301a"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id72" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="test_activation">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_hagen_d_a_c_offset_calibration_1a4e5426bdbb1052a6d31927cae274eccc"></span><code class="sig-name descname"><span class="pre">test_activation</span></code><a class="headerlink" href="#test_activation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix__generate__default__calibration_1_1_hagen_synin_calibration"></span><code class="sig-name descname"><span class="pre">calix_generate_default_calibration.HagenSyninCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix_generate_default_calibration.RecorderAndDumper</span></code></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id78">
<span class="target" id="classcalix__generate__default__calibration_1_1_hagen_synin_calibration_1a30498a013e9b613c0e3041962f2631c7"></span><code class="sig-name descname"><span class="pre">dumpers</span></code><em class="property"> <span class="pre">=</span> <span class="pre">[CalixFormatDumper(),</span>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">CocoListPortableBinaryFormatDumper(),</span>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">CocoListJsonFormatDumper()]</span></em><a class="headerlink" href="#id78" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id79">
<span class="target" id="classcalix__generate__default__calibration_1_1_hagen_synin_calibration_1a06c94fb3be15ff183475571b46483d50"></span><code class="sig-name descname"><span class="pre">recorder</span></code><em class="property"> <span class="pre">=</span> <span class="pre">HagenSyninCalibRecorder()</span></em><a class="headerlink" href="#id79" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1_hagen_synin_calibration_options"></span><code class="sig-name descname"><span class="pre">calix.hagen.HagenSyninCalibrationOptions</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationOptions</span></code></dt>
<dd><p>Dataclass collecting further options for Hagen-mode calibrations with integration on synaptic input lines. </p>
<p>:ivar cadc_options: Further options for CADC calibration. :ivar synapse_driver_options: Further options for synapse driver calibration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id80">
<span class="target" id="classcalix_1_1hagen_1_1_hagen_synin_calibration_options_1a6f21158abf69ca1bb611dde01dd56345"></span><code class="sig-name descname"><span class="pre">CADCCalibOptions</span></code><a class="headerlink" href="#id80" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1_hagen_synin_calibration_result"></span><code class="sig-name descname"><span class="pre">calix.hagen.HagenSyninCalibrationResult</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationResult</span></code></dt>
<dd><p>Calibration results needed for hagen mode integration on the synaptic inputs. </p>
<p>Contains synapse driver calibration, CADC calibration and calibrated bias currents of the synapse DAC.</p>
<p>Refer to the documentation of :class:<code class="docutils literal notranslate"><span class="pre">calix.hagen.cadc.CADCCalibResult</span></code> and :class:<code class="docutils literal notranslate"><a class="reference internal" href="#classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_calib_result"><span class="std std-ref"><span class="pre">calix.hagen.synapse_driver.SynapseDriverCalibResult</span></span></a></code> for details about the contained result objects. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id81">
<span class="target" id="classcalix_1_1hagen_1_1_hagen_synin_calibration_result_1abf0afb884dedca8b4d6781526ba027db"></span><code class="sig-name descname"><span class="pre">apply</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[sta.PlaybackProgramBuilder</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilderDumper]</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id81" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the calib to the chip. </p>
<p>Assumes the chip to be initialized already, which can be done using the stadls ExperimentInit().</p>
<p>:param builder: Builder or dumper to append instructions to. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1_hagen_synin_calibration_target"></span><code class="sig-name descname"><span class="pre">calix.hagen.HagenSyninCalibrationTarget</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationTarget</span></code></dt>
<dd><p>Dataclass collecting target parameters for Hagen-mode calibrations. </p>
<p>with integration on synaptic input lines.</p>
<p>:ivar cadc_target: Target parameters for CADC calibration. :ivar synapse_dac_bias: Target synapse DAC bias current. Controls the charge emitted to the synaptic input line by a multiplication. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id82">
<span class="target" id="classcalix_1_1hagen_1_1_hagen_synin_calibration_target_1a721d172c8c25cdea7a7e21024a023b5a"></span><code class="sig-name descname"><span class="pre">CADCCalibTarget</span></code><a class="headerlink" href="#id82" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id83">
<span class="target" id="classcalix_1_1hagen_1_1_hagen_synin_calibration_target_1ae0175cab15294a825cbd38d4dc62e461"></span><code class="sig-name descname"><span class="pre">dynamic_range</span></code><a class="headerlink" href="#id83" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id84">
<span class="target" id="classcalix_1_1hagen_1_1_hagen_synin_calibration_target_1a9824357bef604d56e2e6e17f1f384d2b"></span><code class="sig-name descname"><span class="pre">feasible_ranges</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{&quot;synapse_dac_bias&quot;:</span> <span class="pre">base.ParameterRange(30,</span> <span class="pre">hal.CapMemCell.Value.max)}</span></em><a class="headerlink" href="#id84" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="int">
<span class="target" id="classcalix_1_1hagen_1_1_hagen_synin_calibration_target_1a8f37659aeea897d1646f96cc105f1624"></span><code class="sig-name descname"><span class="pre">int</span></code><a class="headerlink" href="#int" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix__generate__default__calibration_1_1_hagen_synin_calib_recorder"></span><code class="sig-name descname"><span class="pre">calix_generate_default_calibration.HagenSyninCalibRecorder</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix_generate_default_calibration.CalibrationRecorder</span></code></dt>
<dd><p>Recorder for a Hagen-Mode calibration with integration on the synaptic input lines, as opposed to neuron membranes. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id86">
<span class="target" id="classcalix__generate__default__calibration_1_1_hagen_synin_calib_recorder_1ae08126b64ebf7bc9ddd42ef510e1139c"></span><code class="sig-name descname"><span class="pre">generate_calib</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id86" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute calibration routines and create a result object. </p>
<p>:param connection: Connection used for acquiring calibration data. :return: Calibration result data </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id85">
<span class="target" id="classcalix__generate__default__calibration_1_1_hagen_synin_calib_recorder_1a97d7406a165e05ea639236e7c8238630"></span><code class="sig-name descname"><span class="pre">calibration_type</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;hagen_synin&quot;</span></em><a class="headerlink" href="#id85" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_bias_calibration"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_synin.InhSynBiasCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.hagen.neuron_synin.SynBiasCalibration</span></code></dt>
<dd><p>Class for calibrating the inhibitory synaptic input bias current. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-static-attributes">Private Static Attributes</p>
<dl class="py attribute">
<dt id="id87">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_bias_calibration_1ac823dfaca92cdcb4059c42664d8e4659"></span><code class="sig-name descname"><span class="pre">_bias_current_coord</span></code><em class="property"> <span class="pre">=</span> <span class="pre">halco.CapMemRowOnCapMemBlock.i_bias_synin_inh_gm</span></em><a class="headerlink" href="#id87" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id88">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_bias_calibration_1a514bc6d40fb4a9b91d80227853afd47d"></span><code class="sig-name descname"><span class="pre">_expected_sign</span></code><em class="property"> <span class="pre">=</span> <span class="pre">-1</span></em><a class="headerlink" href="#id88" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id89">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_bias_calibration_1a035fb383cb6817b148c520c4cc0ba5a7"></span><code class="sig-name descname"><span class="pre">_log_abbreviation</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;inh&quot;</span></em><a class="headerlink" href="#id89" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id90">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_bias_calibration_1a3f414b514c739f26d26b054fd5dc529d"></span><code class="sig-name descname"><span class="pre">_reference_calib_type</span></code><em class="property"> <span class="pre">=</span> <span class="pre">InhSynReferenceCalibration</span></em><a class="headerlink" href="#id90" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id91">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_bias_calibration_1a373070301f4455d680b88f984c2625f3"></span><code class="sig-name descname"><span class="pre">_row_mode</span></code><em class="property"> <span class="pre">=</span> <span class="pre">hal.SynapseDriverConfig.RowMode.inhibitory</span></em><a class="headerlink" href="#id91" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_reference_calib_m_a_d_c"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_synin.InhSynReferenceCalibMADC</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.hagen.neuron_synin.SynReferenceCalibMADC</span></code></dt>
<dd><p>Calibrate inhibitory synaptic input reference potential. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-static-attributes">Private Static Attributes</p>
<dl class="py attribute">
<dt id="id92">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_reference_calib_m_a_d_c_1a6339fddd9bd71fabafb137a25a77d600"></span><code class="sig-name descname"><span class="pre">_inverted</span></code><em class="property"> <span class="pre">=</span> <span class="pre">False</span></em><a class="headerlink" href="#id92" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id93">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_reference_calib_m_a_d_c_1a98d550ced913a0d55aa77d5034135662"></span><code class="sig-name descname"><span class="pre">_reference_potential_coord</span></code><em class="property"> <span class="pre">=</span> <span class="pre">\</span></em><a class="headerlink" href="#id93" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_reference_calibration"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_synin.InhSynReferenceCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.hagen.neuron_synin.SynReferenceCalibration</span></code></dt>
<dd><p>Class for calibrating the inhibitory synaptic input reference potential. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-static-attributes">Private Static Attributes</p>
<dl class="py attribute">
<dt id="id94">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_reference_calibration_1aa2559d6336eef117c2b0ce5cdb0048a3"></span><code class="sig-name descname"><span class="pre">_bias_current_keyword</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;inhibitory_biases&quot;</span></em><a class="headerlink" href="#id94" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id95">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_reference_calibration_1aecdfb0c0c6cc5557dc6a2b153bf04e6b"></span><code class="sig-name descname"><span class="pre">_capmem_parameter_coord</span></code><em class="property"> <span class="pre">=</span> <span class="pre">\</span></em><a class="headerlink" href="#id95" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id96">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_reference_calibration_1a49e1c375f53979027b0a87cdde52ba6b"></span><code class="sig-name descname"><span class="pre">_inverted</span></code><em class="property"> <span class="pre">=</span> <span class="pre">False</span></em><a class="headerlink" href="#id96" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id97">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_reference_calibration_1a3b28011867df5fdceb191c9ca4c852b2"></span><code class="sig-name descname"><span class="pre">_log_abbreviation</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;inh&quot;</span></em><a class="headerlink" href="#id97" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_time_constant_calibration"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_synin.InhSynTimeConstantCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.hagen.neuron_synin.SynTimeConstantCalibration</span></code></dt>
<dd><p>Calibrate inhibitory synaptic input time constant. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-static-attributes">Private Static Attributes</p>
<dl class="py attribute">
<dt id="id98">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_time_constant_calibration_1a958255edc82a55496b4ab3333d987737"></span><code class="sig-name descname"><span class="pre">_bias_current_coord</span></code><em class="property"> <span class="pre">=</span> <span class="pre">halco.CapMemRowOnCapMemBlock.i_bias_synin_inh_tau</span></em><a class="headerlink" href="#id98" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id99">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_time_constant_calibration_1a42ccc6f9b5e7e2126f35b5eefae9e8f7"></span><code class="sig-name descname"><span class="pre">_readout_source</span></code><em class="property"> <span class="pre">=</span> <span class="pre">hal.NeuronConfig.ReadoutSource.inh_synin</span></em><a class="headerlink" href="#id99" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id100">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_time_constant_calibration_1a61d51412173e531a570e408099c5389c"></span><code class="sig-name descname"><span class="pre">_row_mode</span></code><em class="property"> <span class="pre">=</span> <span class="pre">hal.SynapseDriverConfig.RowMode.inhibitory</span></em><a class="headerlink" href="#id100" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_leak_bias_calibration"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_leak_bias.LeakBiasCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.Calibration</span></code></dt>
<dd><p>Set leak bias currents as low as possible while preventing the membrane voltage from floating and preventing too high membrane noise. </p>
<p>Search all neurons’ leak OTA bias current settings such that the potential does not float away, i.e. the noise in successive CADC reads is close to the given target noise and the resting potential is not far from the expected leak potential CADC value. The leak current is set as low as possible fulfilling this requirement.</p>
<p>When integrating inputs on the neuron, a low leak conductivity is desired. However, some neurons show strong variations on the membrane potential when the leak conductivity is set very low, as the voltage now floats. Some neurons may require a higher leak setting in order to keep the membrane potential from floating.</p>
<p>The noise on the membrane is quantified by reading the CADCs multiple times. The leak current is set such that the target noise is achieved. This yields a minimum leak conductivity while keeping the membrane from floating.</p>
<p>Calling the <a class="reference internal" href="#namespacecalix_1_1common_1_1base_1abbc6a85b6bf3e20ed62493a3220ee83e"><span class="std std-ref">run()</span></a> function returns this tuple of parameters:<ul class="simple">
<li><p>Array of calibrated leak OTA bias current settings</p></li>
<li><p>Mask of too noisy neurons. False for neurons exceeding the masking_threshold.</p></li>
</ul>
</p>
<p>Requirements:<ul class="simple">
<li><p>Neuron membrane readout is connected to the CADCs (causal and acausal).</p></li>
<li><p>Reset potential is equal to the leak potential.</p></li>
<li><p>Synaptic inputs are calibrated such that the membrane potential is not affected by constant currents.</p></li>
</ul>
</p>
<p>:ivar masking_threshold: Threshold for noise to set calibration success to False. Should be higher than the target noise. By default, target + 0.8 is used, as the default noise target is only 1.2 LSB. Note that besides the pure statistical noise, a penalty is added to the “noise” result in case the mean resting potential is far from the expected value, i.e., the potential drifts too far. This pentalty is also considered when finding calibration success. See the function optimization_objective() in <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__leak__bias_1_1_leak_bias_calibration_1ad15b73de12ebb88f2240587a084918ca"><span class="std std-ref">measure_results()</span></a> for the specific penalty conditions. :ivar target_leak_read: Expected CADC reads at leak potential. Used to decide whether the membrane potential is floating. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id102">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_leak_bias_calibration_1a94424168081e25a61a96bb9ff397c4ee"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[numbers.Number</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">target=1.2</span></em>, <em class="sig-param"><span class="pre">Optional[Union[numbers.Number</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">target_leak_read=None</span></em>, <em class="sig-param"><span class="pre">Optional[Union[numbers.Number</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">masking_threshold=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id102" title="Permalink to this definition">¶</a></dt>
<dd><p>:param target: Noise on each neuron’s CADC reads (standard deviation of successive CADC reads). </p>
</dd></dl>

<dl class="py function">
<dt id="id103">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_leak_bias_calibration_1aebcb79ff2a992b37be4c8bda80940367"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id103" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure leak OTA bias currents to the given parameters. </p>
<p>:param builder: Builder to append configuration to. :param parameters: Leak OTA bias current settings for each neuron.</p>
<p>:return: Builder with configuration commands appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id104">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_leak_bias_calibration_1ad15b73de12ebb88f2240587a084918ca"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id104" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure the noise on each neuron’s membrane. </p>
<p>To do that, successive CADC reads are done. These happen a small amount of time after a reset. The reset - wait - read scheme is what we will use in hagen mode, therefore we measure the noise in the same fashion. The standard deviation of these reads is treated as noise.</p>
<p>If the resting potential is far from the potential after reset, or the potential after reset is far from the expected leak potential, the membrane potential is assumed to be floating; therefore, the result is artificially increased in order to have the leak bias current increased for these neurons.</p>
<p>:param connection: Connection to the chip to run on. :param builder: Builder to append read instructions to.</p>
<p>:return: Array with standard deviations of CADC reads of each neuron. </p>
</dd></dl>

<dl class="py function">
<dt id="id105">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_leak_bias_calibration_1a8bf6626d272c964ea63a3f73cffef9c5"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id105" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs warnings for neurons with higher noise and statistics. </p>
<p>Change mask of calibration success to False for neurons with noise significantly higher than the target.</p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

<dl class="py function">
<dt id="id106">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_leak_bias_calibration_1ab99404a369ede0c7a7efb668935dd9be"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id106" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure the current resting potentials and use them as <code class="docutils literal notranslate"><span class="pre">target_leak_read</span></code>, if the parameter was not provided. </p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="masking_threshold">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_leak_bias_calibration_1a8bc0f8fe9f1ff9b92ee182d7e2256519"></span><code class="sig-name descname"><span class="pre">masking_threshold</span></code><a class="headerlink" href="#masking_threshold" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id101">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_leak_bias_calibration_1a95f35b2256cd3e2b403a733c32a7c011"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id101" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="target_leak_read">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_leak_bias_calibration_1ab330782011427335349b8f10d7fd01fa"></span><code class="sig-name descname"><span class="pre">target_leak_read</span></code><a class="headerlink" href="#target_leak_read" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_leak_over_threshold_calib"></span><code class="sig-name descname"><span class="pre">calix.spiking.neuron_threshold.LeakOverThresholdCalib</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.spiking.neuron_threshold._SpikeCounterCalibration</span></code></dt>
<dd><p>Calibrate the neurons’ spike threshold such that the given spike rate is achieved in a leak over threshold setup, without any synaptic input. </p>
<p>Requirements:<ul class="simple">
<li><p>The leak potential is set sufficiently high and the reset potential is set sufficiently low, such that there is some range for the threshold potential in between the two.</p></li>
<li><p>While the target spike rates can be different between neurons, their dynamic range is limited to roughly a factor of 10 (i.e. the maximum target should not be more than 10 times the minimum target). This is due to the precision of the spike counter: Slowly spiking neurons would spike only a few times during the accumulation time, while quickly spiking neurons would almost saturate the counter. You can work around this by running the calibration multiple times and cherry-picking from the results.</p></li>
</ul>
</p>
<p>:ivar threshold_at_reset: Threshold parameters calibrated at the reset potential. Will be used as a lower boundary during the calibration to spike rates. :ivar parameters: Latest threshold parameters configured on the chip, saved during configure_parameters and reused during measure_results. There, we compare them against threshold_at_reset in order to keep the threshold potential above the reset potential. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id108">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_leak_over_threshold_calib_1aa18a34bdbcc483a33e32e3641ce241d5"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">pq.Quantity</span> <span class="pre">target=100</span> <span class="pre">*pq.kHz</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id108" title="Permalink to this definition">¶</a></dt>
<dd><p>:param target: Target spike rate in leak over threshold setup. </p>
<p>Neurons with a target of 0 are calibrated to an arbitrary firing rate between the maximum and minimum requested value. :raises ValueError: if the target is negative or all zero. </p>
</dd></dl>

<dl class="py function">
<dt id="id109">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_leak_over_threshold_calib_1a42b868b1844f5f9e7393490280dfff43"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id109" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the given spike threshold potentials in the given builder. </p>
<p>Also saves the parameters in an ivar, so we can check them against the minimum feasible range (at the reset potential) later.</p>
<p>Note: Saving the parameters is part of working around a bug in the digital neuron backend. On HICANN-X v3, it may be possible to use the base function if the bug is fixed.</p>
<p>:param builder: Builder to append configuration instructions to. :param parameters: Threshold potential for each neuron.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id110">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_leak_over_threshold_calib_1abc1823c10721ffeaa44d89ee174679ac"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id110" title="Permalink to this definition">¶</a></dt>
<dd><p>Measures the spike rate without synaptic input. </p>
<p>Measure number of spikes with spike counters. Also, the previously configured parameters are inspected: If they indicate the threshold is set below the reset potential, a high spike count is returned, in order to have the threshold potential be increased by the algorithm.</p>
<p>Note: The replacing low spike counts with high numbers works around a bug in the digital neuron backend. On HICANN-X v3, it may be possible to just use the base function, if the bug is fixed.</p>
<p>:param connection: Connection to a chip. :param builder: Builder to append read instructions to.</p>
<p>:return: Array with the number of spikes during the accumulation time. If the counter has overflown, the value is set to a high value. </p>
</dd></dl>

<dl class="py function">
<dt id="id111">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_leak_over_threshold_calib_1aecdec6cb9db655011963f12c1f3bd14b"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id111" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure reset potential and store it as a lower boundary for the parameter space. </p>
<p>Since the spike rate will be zero both if the threshold is too high (above the leak) or too low (below the reset), we calibrate the threshold at reset potential and will later use these value as a lower boundary for feasible parameters.</p>
<p>Note: This is likely caused by a bug in the digital neuron backend. Starting with HICANN-X v3, it may be possible to drop this entire prelude, as spike rates should then be highest if the threshold is lower than the reset.</p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="accumulation_time">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_leak_over_threshold_calib_1a45d7d5cc99c79ad69b920f5a59ded828"></span><code class="sig-name descname"><span class="pre">accumulation_time</span></code><a class="headerlink" href="#accumulation_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="parameters">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_leak_over_threshold_calib_1a2fbae8f0853aba5152eae3cbf0c260cc"></span><code class="sig-name descname"><span class="pre">parameters</span></code><a class="headerlink" href="#parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id107">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_leak_over_threshold_calib_1ac7d983d9cfd79298cdd7b5560674cc57"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id107" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="threshold_at_reset">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_leak_over_threshold_calib_1a7e5109f33be99e15272b8535c7178483"></span><code class="sig-name descname"><span class="pre">threshold_at_reset</span></code><a class="headerlink" href="#threshold_at_reset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_leak_potential_calibration"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_potentials.LeakPotentialCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.Calibration</span></code></dt>
<dd><p>Calibrate the neurons’ leak potentials to match specified CADC reads. </p>
<p>The leak potential parameter is varied until all CADC channels match the median of the original reads or the provided target values.</p>
<p>Requirements:<ul class="simple">
<li><p>Neuron membrane readout is connected to the CADCs (causal and acausal).</p></li>
<li><p>Leak bias current is set not too low, such that the resting potential is affected by the leak potential. Note that this calibration has to be re-run after the leak bias current was changed, due to the OTA’s characteristics. </p></li>
</ul>
</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id113">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_leak_potential_calibration_1a7b5272ae8168abdef927baeb09eedd3f"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">target=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id113" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id114">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_leak_potential_calibration_1afa8db1b0b726ab08a868e366337e4b57"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id114" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the given parameters (leak potential settings) in the given builder. </p>
<p>:param builder: Builder to append configuration instructions to. :param parameters: v_leak setting for each neuron.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id115">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_leak_potential_calibration_1a494c8b4a79a4917124ec7831753da6a8"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id115" title="Permalink to this definition">¶</a></dt>
<dd><p>Measures the membrane potentials of all neurons. </p>
<p>We use the CADCs to take only one measurement of the resting potential and assume this is an accurate representation of the leak potential.</p>
<p>:param connection: Connection to a chip. :param builder: Builder to append read instructions to.</p>
<p>:return: Array containing membrane potential CADC reads. </p>
</dd></dl>

<dl class="py function">
<dt id="id116">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_leak_potential_calibration_1a87d5e6383dcfdfaafeacc69ba316f1a9"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id116" title="Permalink to this definition">¶</a></dt>
<dd><p>Print statistics of the neurons’ resting potentials. </p>
<p>:Param connection: Connection to the chip to run on. </p>
</dd></dl>

<dl class="py function">
<dt id="id117">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_leak_potential_calibration_1a4065a58c225bb2cc3f1a78a93eb43133"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id117" title="Permalink to this definition">¶</a></dt>
<dd><p>If no calibration target was provided during initialization, the current median resting potential is measured and used as a target. </p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="id112">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_leak_potential_calibration_1a9fc08a94c214e089b174d8fb66aacba7"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id112" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_linear_prediction"></span><code class="sig-name descname"><span class="pre">calix.common.algorithms.LinearPrediction</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.algorithms.PolynomialPrediction</span></code></dt>
<dd><p>Class implementing a first degree polynomial. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id118">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_linear_prediction_1a8831cafbf6106b673c4a3404bb95bee2"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">probe_parameters</span></em>, <em class="sig-param"><span class="pre">float</span> <span class="pre">offset=0</span></em>, <em class="sig-param"><span class="pre">float</span> <span class="pre">slope=1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id118" title="Permalink to this definition">¶</a></dt>
<dd><p>:param probe_parameters: Parameter at which a measurement was or will be taken in order to determine the offsets for each calibration instance. </p>
<p>Refer to <code class="docutils literal notranslate"><span class="pre">PolynomialPrediction._predict</span></code> for details. :param offset: Offset (zeroth-degree) term of the linar function. :param slope: Slope (first-degree) term of the linear function. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_linear_search"></span><code class="sig-name descname"><span class="pre">calix.common.algorithms.LinearSearch</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.base.Algorithm</span></code></dt>
<dd><p>Perform a linear search within the given parameter range to calibrate. </p>
<p>From an initial guess, the parameter is moved in constant steps until the calibration target is crossed.</p>
<p>Initializing the class requires basic settings, which come from an instance of a Calibration class. Calling run(connection, target_result) then performs the calibration. The parameters are sweeped until the results crosses the target, or the maximum number of steps is exceeded.</p>
<p>:ivar calibration: Instance of calibration class used to provide settings and functions. :ivar max_steps: Maximum number of steps to use. If set too low, it can limit the available range if the step_size during the calibration is set low. When having reached the target value with all instances, the calibration stops early. :ivar initial_parameters: Initial (guessed) parameters to start algorithm with. :ivar step_size: Amount by which the parameters are moved in every step.</p>
<p>:raises ValueError: If step_size is not a positive number. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id120">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_linear_search_1ac10150b230454a2ec90cc689d8109d14"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Optional[Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">initial_parameters=None</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">step_size=1</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">max_steps=50</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id120" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id121">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_linear_search_1ad0bbcc0f18b133cb7e3840f99a2d1c97"></span><code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">Union[float</span></em>, <em class="sig-param"><span class="pre">int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">target_result</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id121" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs the calibration sweeping the parameter by step_size. </p>
<p>The algorithm starts with the parameters supplied in the argument as a guess. It then moves in steps of <code class="docutils literal notranslate"><span class="pre">step_size</span></code> towards the target until the result crosses the target. The calibration then stops and returns the parameter that yields the results closest to the target in the last 2 steps, i.e. while testing the values around crossing the threshold.</p>
<p>Note that this function can be called multiple times with different step_sizes in order to approach the target step-wise. Doing so it is important to supply the results of the previous run as parameters.</p>
<p>:param connection: Connection to use during configuring and measuring. :param target_result: Target result for calibration.</p>
<p>:return: Best suited parameters to reach given targets.</p>
<p>:raises TypeError: if <code class="docutils literal notranslate"><span class="pre">step_size</span></code> does not allow addition. :raises ValueError: if the measure_parameters() function of the provided calibration class returns an array with bad length. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="id119">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_linear_search_1a89ff9a0e1d76740ed8eeb4f0eb53e4e5"></span><code class="sig-name descname"><span class="pre">initial_parameters</span></code><a class="headerlink" href="#id119" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="max_steps">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_linear_search_1a18a949f05e26f955ec9a1c2d43672e83"></span><code class="sig-name descname"><span class="pre">max_steps</span></code><a class="headerlink" href="#max_steps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="step_size">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_linear_search_1a54fa4a2be6b4665e9f832ca10845dcb0"></span><code class="sig-name descname"><span class="pre">step_size</span></code><a class="headerlink" href="#step_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_membrane_recorder"></span><code class="sig-name descname"><span class="pre">calix.common.madc_base.MembraneRecorder</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.madc_base.Recorder</span></code></dt>
<dd><p>Record, plot and save a trace of each neuron via the MADC. </p>
<p>Note that here, the neuron is recorded without any stimuli. You may want to derive a class for your experiment setup and configure a suitable <a class="reference internal" href="#classcalix_1_1common_1_1madc__base_1_1_membrane_recorder_1aa9ac7804727b28c9f68ee85d94e3a442"><span class="std std-ref">stimulate()</span></a> function.</p>
<p>Example usage: </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id122">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_membrane_recorder_1a0257577fa12970fb64119d098b155950"></span><code class="sig-name descname"><span class="pre">neuron_config_disabled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id122" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config in silent state, i.e. </p>
<p>disconnected from the common readout lines.</p>
<p>:param neuron_coord: Coordinate of neuron to get config for.</p>
<p>:return: Neuron config with readout disabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id123">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_membrane_recorder_1ad6c90a8074358aef66562f2b08d578ea"></span><code class="sig-name descname"><span class="pre">neuron_config_readout</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id123" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout active and connected to the readout lines. </p>
<p>:param neuron_coord: Coordinate of neuron to get config for.</p>
<p>:return: Neuron config with readout enabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id124">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_membrane_recorder_1aa9ac7804727b28c9f68ee85d94e3a442"></span><code class="sig-name descname"><span class="pre">stimulate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em>, <em class="sig-param"><span class="pre">hal.Timer.Value</span> <span class="pre">stimulation_time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id124" title="Permalink to this definition">¶</a></dt>
<dd><p>Send no stimuli to the observed neuron. </p>
<p>.. note:: Overwrite this function in order to send arbitrary stimuli during the MADC recording.</p>
<p>E.g., synaptic inputs could be sent to observe their shape.</p>
<p>:param builder: Builder to append stimulation instructions to. :param neuron_coord: Coordinate of neuron which is currently recorded. :param stimulation_time: Timer value at beginning of stimulation.</p>
<p>:return: Builder with stimulation instructions appended. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-functions">Public Static Functions</p>
<dl class="py function">
<dt id="plot_traces">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_membrane_recorder_1afef1a9e38c68ca856779a9dbbeb9264a"></span><code class="sig-name descname"><span class="pre">plot_traces</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">List[np.ndarray]</span> <span class="pre">samples</span></em><span class="sig-paren">)</span><a class="headerlink" href="#plot_traces" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot recorded traces, and save them as png figures. </p>
<p>Each neurons’ trace is plotted in its own figure, saved postfixed with the neuron id from enumerating the list. You may slice the original samples in order to save runtime while plotting.</p>
<p>:param samples: List of recorded MADC samples, as returned by the <a class="reference internal" href="#classcalix_1_1common_1_1madc__base_1_1_recorder_1a3538bf5e59dd76ec8aef61798ad22b4d"><span class="std std-ref">record_traces()</span></a> function. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_c_a_d_c"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.Calibration</span></code></dt>
<dd><p>Find the leak conductivity by resetting the neuron’s membrane to a potential significantly below the leak potential. </p>
<p>The reset potential v_reset is set below the leak potential v_leak. After a reset the membrane voltage rises towards the leak potential v_leak. As the membrane voltage rises, the CADCs are used to read the voltage at a specified time after the reset. The leak bias current gets calibrated such that the voltage after the desired time has risen to <code class="docutils literal notranslate"><span class="pre">v_leak</span> <span class="pre">-</span> <span class="pre">(v_leak</span> <span class="pre">-</span> <span class="pre">v_reset)/e</span></code>. Therefore, the specified time should be roughly the membrane time constant.</p>
<p>The leak potential gets recalibrated every time the bias current is changed, as changing the OTA bias current also changes the required offset between its inputs. The target CADC reads at leak potential are acquired at the beginning of the calibration with the existing neuron configuration. The median of all reads is taken as target.</p>
<p>This class provides functions for configuring leak bias currents and reading the potentials of neurons a specific time after reset.</p>
<p>Requirements:<ul class="simple">
<li><p>Neuron membrane readout is connected to the CADCs (causal and acausal).</p></li>
<li><p>The currently selected leak potential is not too low, such that the target_amplitude can still be subtracted from the CADC reads at leak potential without leaving the desired operating range of the leak OTA or the dynamic range of the CADCs.</p></li>
<li><p>The target membrane time constant is long, above some 30 us.</p></li>
</ul>
</p>
<p>:ivar target_amplitude: Target amplitude for (v_leak - v_reset), given in CADC reads. :ivar target_time_const: Target membrane time constant. :ivar target_leak_read: Target CADC read at leak potential. :ivar leak_calibration: LeakPotentialCalibration class instance used for recalibration of leak potential after changing the bias current.</p>
<p>:raises ValueError: if target_time_constant is not a single value. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id127">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_c_a_d_c_1a91a8bd77b4c75c4f60a1eae50469a8b0"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">pq.quantity.Quantity</span> <span class="pre">target_time_const=60</span> <span class="pre">*pq.us</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">target_amplitude=50</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id127" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id128">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_c_a_d_c_1aabf88d9abee325373a5c56730de87772"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id128" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the leak OTA bias currents of all neurons to the given values. </p>
<p>:param builder: Builder to append configuration instructions to. :param parameters: Array of leak OTA bias current settings to configure the CapMem cells to.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id129">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_c_a_d_c_1a9f04a0bf6fb51ff0d484da2021081cb2"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id129" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate the leak potentials such that the CADC reads match the read targets. </p>
<p>Reset the neurons and wait for the target time constant. Measure the membrane potentials using the CADCs.</p>
<p>:param connection: Connection to the chip to run on. :param builder: Builder to run.</p>
<p>:return: Array of CADC reads after reset and wait. </p>
</dd></dl>

<dl class="py function">
<dt id="id130">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_c_a_d_c_1ad87a10c49a437225c5b0f1a192d9af88"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id130" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id131">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_c_a_d_c_1a238b4c28f892c3bb150478544d09214d"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id131" title="Permalink to this definition">¶</a></dt>
<dd><p>Read leak potentials, calibrate reset potential to leak - amplitude. </p>
<p>:param connection: Connection to the chip to run on.</p>
<p>:raises CalibrationNotSuccessful: If the target CADC read at reset potential is below the reliable range of the CADC for more than 5% of the neurons. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="leak_calibration">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_c_a_d_c_1a8f96ad14fe9ded98a128b5f73df7f956"></span><code class="sig-name descname"><span class="pre">leak_calibration</span></code><a class="headerlink" href="#leak_calibration" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id125">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_c_a_d_c_1a6cd4533aae12a40e54b7450bdcac1a9e"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id125" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="target_amplitude">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_c_a_d_c_1ad6873e1e602b2ec6524a177b3de0e8e8"></span><code class="sig-name descname"><span class="pre">target_amplitude</span></code><a class="headerlink" href="#target_amplitude" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id126">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_c_a_d_c_1a672d1baed298e33501de4d3f07597174"></span><code class="sig-name descname"><span class="pre">target_leak_read</span></code><a class="headerlink" href="#id126" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="target_time_const">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_c_a_d_c_1a920cf1598c8dc7dc0a51e689a6d593c2"></span><code class="sig-name descname"><span class="pre">target_time_const</span></code><a class="headerlink" href="#target_time_const" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-functions">Private Functions</p>
<dl class="py function">
<dt id="reset_wait_read">
<span id="_reset_wait_read"></span><span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_c_a_d_c_1a98c34f6a1a08194b718fcda9369bdfaa"></span><code class="sig-name descname"><span class="pre">_reset_wait_read</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">runs_per_builder=100</span></em><span class="sig-paren">)</span><a class="headerlink" href="#reset_wait_read" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset neuron, wait for the target time constant, read the neuron’s membrane potentials using the CADCs. </p>
<p>This is done separately for all neurons on the chip. An array of the individual neurons’ reads is returned.</p>
<p>:param connection: Connection to chip to run on. :param runs_per_builder: How many runs to execute in one builder. Choosing too many runs can result in host/FPGA timeouts, as the FPGA program buffer will get full and waiting on chip then prevents the FPGA from accepting new instructions.</p>
<p>:return: Array of all neurons’ CADC reads. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_offset"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_leak_bias.MembraneTimeConstCalibOffset</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">madc_base.Calibration</span></code></dt>
<dd><p>Measure response to step current with MADC to calibrate the membrane time constant. </p>
<p>Due to the MADC’s high sample rate, an exponential fit on the decaying potential after a step current stimulus is used to determine the membrane time constant. Leak bias currents are tweaked to reach the desired membrane time constant.</p>
<p>This calibration decides whether leak division is required during prelude. The given neuron configs are therefore altered. The original neuron config (configured on chip before running the calibration) is not restored, instead we stay with the config used (and altered) during calibration.</p>
<p>Requirements:<ul class="simple">
<li><p>Leak potential is calibrated to the desired value. This is useful since the time constant is then calibrated at and above this selected potential.</p></li>
<li><p>The desired membrane time constant is larger than some 3 us, since leak multiplication is not supported by this calibration.</p></li>
<li><p>The synaptic input should be on; it should be calibrated or the bias currents should be set to 0. The reason is an effect on the membrane dynamics for some neurons, which looks similar to leakage. We recommend the synaptic input to be enabled and calibrated.</p></li>
</ul>
</p>
<p>:ivar neuron_configs: List of desired neuron configurations. Necessary to enable leak division. :ivar adjust_bias_range: Enable/disable adjustment of leak division to extend the dynamic range of calibration. By default, this setting is enabled and we select appropriate settings during the prelude. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id137">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_offset_1a146430c9d4e4fddd979be3b1f861196e"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">pq.quantity.Quantity</span> <span class="pre">target</span></em>, <em class="sig-param"><span class="pre">Optional[List[hal.NeuronConfig]]</span> <span class="pre">neuron_configs=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id137" title="Permalink to this definition">¶</a></dt>
<dd><p>:param neuron_configs: List of neuron configurations. </p>
<p>If None, the hagen-mode default neuron config is used for all neurons. </p>
</dd></dl>

<dl class="py function">
<dt id="id138">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_offset_1a65411638540540859f5e3a91e87c65fa"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id138" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the given array of leak bias currents. </p>
<p>:param builder: Builder to append configuration instructions to. :param parameters: Array of bias currents to set up.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id139">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_offset_1a2b2c0c90b1c49e14d802e24efe331db9"></span><code class="sig-name descname"><span class="pre">evaluate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">List[np.ndarray]</span> <span class="pre">samples</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id139" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the obtained MADC samples. </p>
<p>To each neuron’s MADC samples, an exponential decay is fitted, and the resulting time constant is returned.</p>
<p>:param samples: MADC samples obtained for each neuron.</p>
<p>:return: Numpy array of fitted synaptic input time constants. </p>
</dd></dl>

<dl class="py function">
<dt id="id140">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_offset_1a798c14df307f3f7ca47b83a6bcc2d8f6"></span><code class="sig-name descname"><span class="pre">neuron_config_disabled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id140" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout disabled. </p>
<p>:param neuron_coord: Coordinate of neuron to get config for.</p>
<p>:return: Neuron config with readout disabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id141">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_offset_1add1c77f314e373e32e68bfeb34508aed"></span><code class="sig-name descname"><span class="pre">neuron_config_readout</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id141" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout enabled. </p>
<p>The step current is alredy enabled here and will be disabled as the stimulus.</p>
<p>:param neuron_coord: Coordinate of neuron to get config for.</p>
<p>:return: Neuron config with readout enabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id142">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_offset_1afb5b5c696377bcd6c0b506f6196cee7f"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id142" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore original readout configuration. </p>
<p>The base class postlude is overwritten to <em>not</em> restore the original neuron configuration, as leak division may be altered by this routine.</p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

<dl class="py function">
<dt id="id143">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_offset_1af256ebb5e68d5eef3405f1de9a93a3e5"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id143" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares chip for calibration. </p>
<p>Sets a high offset current in all neurons.</p>
<p>Also measures the membrane time constant at low leak bias currents to decide whether leak division is required to reach the given targets.</p>
<p>Leak multiplication is not supported by this calibration: The offset current is too weak to stimulate the membrane significantly if multiplication gets enabled. The calibration can therefore only be used if the target membrane time constant is larger than some 3 us.</p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

<dl class="py function">
<dt id="id144">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_offset_1a3c0e7e5d5fd397dc40ec419f0129f3e2"></span><code class="sig-name descname"><span class="pre">stimulate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em>, <em class="sig-param"><span class="pre">hal.Timer.Value</span> <span class="pre">stimulation_time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id144" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable the membrane offset current. </p>
<p>This results in a decaying potential back to the leak.</p>
<p>:param builder: Builder to append instructions to. :param neuron_coord: Coordinate of neuron which is currently recorded. :param stimulation_time: Timer value at beginning of stimulation.</p>
<p>:return: Builder with neuron resets appended. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="id132">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_offset_1a20e1b3d801318529f1b81158b5caeab3"></span><code class="sig-name descname"><span class="pre">neuron_configs</span></code><a class="headerlink" href="#id132" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id133">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_offset_1a62156fc42bbf1966b571d3a0425f809f"></span><code class="sig-name descname"><span class="pre">sampling_time</span></code><a class="headerlink" href="#id133" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id134">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_offset_1a892bf0c93f0990a959749501d9b6443a"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id134" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id135">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_offset_1a1aef1e425f1c2523c2a7cf5319f95c6a"></span><code class="sig-name descname"><span class="pre">wait_between_neurons</span></code><a class="headerlink" href="#id135" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-members">Private Members</p>
<dl class="py attribute">
<dt id="id136">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_offset_1adb943e3a3f0fd6bdc3f0b6de5789ddbd"></span><code class="sig-name descname"><span class="pre">_wait_before_stimulation</span></code><a class="headerlink" href="#id136" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_reset"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_leak_bias.MembraneTimeConstCalibReset</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">madc_base.Calibration</span></code></dt>
<dd><p>Measure neuron reset with the MADC to calibrate the membrane time constant. </p>
<p>Due to the MADC’s high sample rate, an exponential fit on the decaying potential after a reset is used to determine the membrane time constant. Leak bias currents are tweaked to reach the desired value.</p>
<p>The leak and reset potentials are altered to ensure a good amplitude for the fit between the two potentials. The membrane time constant at a (different) desired leak potential may be slightly different. For target membrane time constants above some 3 us, a step current stimulus can be used instead of a reset, therefore not changing the potentials. See <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_offset"><span class="std std-ref">MembraneTimeConstCalibOffset</span></a> for this method.</p>
<p>This calibration decides whether leak division or multiplication is required during prelude. The given neuron configs are therefore altered.</p>
<p>Requirements:<ul class="simple">
<li><p>None -</p></li>
</ul>
</p>
<p>:ivar neuron_configs: List of desired neuron configurations. Necessary to enable leak division/multiplication. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id150">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_reset_1ac5c9e750c9d727932f68cb676bc7bcd3"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">pq.quantity.Quantity</span> <span class="pre">target=60</span> <span class="pre">*pq.us</span></em>, <em class="sig-param"><span class="pre">Optional[List[hal.NeuronConfig]]</span> <span class="pre">neuron_configs=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id150" title="Permalink to this definition">¶</a></dt>
<dd><p>:param neuron_configs: List of neuron configurations. </p>
<p>If None, the hagen-mode default neuron config is used for all neurons. </p>
</dd></dl>

<dl class="py function">
<dt id="id151">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_reset_1a23382a098de0988b9fe2515a151be92a"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id151" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the given array of leak bias currents. </p>
<p>:param builder: Builder to append configuration instructions to. :param parameters: Array of bias currents to set up.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id152">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_reset_1a121c21c9695068837d59e3dce42f1cfe"></span><code class="sig-name descname"><span class="pre">evaluate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">List[np.ndarray]</span> <span class="pre">samples</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id152" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the obtained MADC samples. </p>
<p>To each neuron’s MADC samples, an exponential decay is fitted, and the resulting time constant is returned. This should make for a very precise measurement.</p>
<p>:param samples: MADC samples obtained for each neuron.</p>
<p>:return: Numpy array of fitted synaptic input time constants. </p>
</dd></dl>

<dl class="py function">
<dt id="id153">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_reset_1a1d647106b575d6be2cfa97a96971e82a"></span><code class="sig-name descname"><span class="pre">neuron_config_disabled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id153" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout disabled. </p>
<p>:param neuron_coord: Coordinate of neuron to get config for.</p>
<p>:return: Neuron config with readout disabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id154">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_reset_1a686a24eefee4d98e24d9e7b644fe6ca4"></span><code class="sig-name descname"><span class="pre">neuron_config_readout</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id154" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout enabled. </p>
<p>:param neuron_coord: Coordinate of neuron to get config for.</p>
<p>:return: Neuron config with readout enabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id155">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_reset_1a03c24a482a3c9173e5aab6ec6a0549ed"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id155" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore original readout configuration. </p>
<p>The base class postlude is overwritten to <em>not</em> restore the original neuron configuration, as leak division and multiplication may be altered by this routine.</p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

<dl class="py function">
<dt id="id156">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_reset_1aafdf5b7ab30d5f26fc07d994dd2e6a2a"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id156" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares chip for calibration. </p>
<p>Sets reset potential low and leak high in order to observe a large decay back to the leak potential.</p>
<p>Also measures the membrane time constant at low and high bias currents to decide whether leak multiplication or division is required to reach the given targets.</p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

<dl class="py function">
<dt id="id157">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_reset_1a9fd9c08854eb489212c3c90062973854"></span><code class="sig-name descname"><span class="pre">stimulate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em>, <em class="sig-param"><span class="pre">hal.Timer.Value</span> <span class="pre">stimulation_time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id157" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the neuron membrane potential to a low voltage. </p>
<p>:param builder: Builder to append reset instructions to. :param neuron_coord: Coordinate of neuron which is currently recorded. :param stimulation_time: Timer value at beginning of stimulation.</p>
<p>:return: Builder with neuron resets appended. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="id145">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_reset_1af841bd6d2ffe1a7aa3c9497b768ca90f"></span><code class="sig-name descname"><span class="pre">neuron_configs</span></code><a class="headerlink" href="#id145" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id146">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_reset_1afc140dcd1ad62637b3be8f79eeaf13cb"></span><code class="sig-name descname"><span class="pre">sampling_time</span></code><a class="headerlink" href="#id146" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id147">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_reset_1ab6e4066af0a653006725e93e3827304a"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id147" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id148">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_reset_1ac5a2367099c84a46934122c2ccc9df1f"></span><code class="sig-name descname"><span class="pre">wait_between_neurons</span></code><a class="headerlink" href="#id148" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-members">Private Members</p>
<dl class="py attribute">
<dt id="id149">
<span class="target" id="classcalix_1_1hagen_1_1neuron__leak__bias_1_1_membrane_time_const_calib_reset_1a40f19c9c234243beb0b55ef92332119c"></span><code class="sig-name descname"><span class="pre">_wait_before_stimulation</span></code><a class="headerlink" href="#id149" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.hagen.multiplication.Multiplication">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication"></span><em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">calix.hagen.multiplication.</span></code><code class="sig-name descname"><span class="pre">Multiplication</span></code><a class="headerlink" href="#calix.hagen.multiplication.Multiplication" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles multiplication of vector and matrix with integration on the synaptic input lines. </p>
<p>Requirements:<ul class="simple">
<li><p>CADCs are calibrated and connected to the neuron readout. You can use <code class="docutils literal notranslate"><a class="reference internal" href="#namespacecalix_1_1common_1_1cadc_1a57ab946001bb84ed52a398c1da7be095"><span class="std std-ref"><span class="pre">calix.common.cadc.calibrate()</span></span></a></code> and <code class="docutils literal notranslate"><a class="reference internal" href="#namespacecalix_1_1hagen_1_1neuron__helpers_1ac4114467612d149d5130cc95f9d2dea2"><span class="std std-ref"><span class="pre">calix.hagen.neuron_helpers.configure_chip()</span></span></a></code> to achieve this.</p></li>
<li><p>Synapse DAC bias is calibrated.</p></li>
<li><p>Synapse drivers are calibrated.</p></li>
</ul>
</p>
<p>:cvar synram_selection_bit: Position of bit in event label that selects whether an SPL1 event reaches the top or bottom synram. You can choose one of bits 11 to 13 (default).</p>
<p>:ivar _synram_coord: Coordinate of synapse array to use. :ivar num_sends: Number of sends of the vector, values greater than one indicate repetitions of the input events. :ivar wait_period: Number of clock cycles to wait between events. :ivar signed_mode: Decide whether the multiplication is using signed weights. This affects the shape of the matrix: in unsigned mode, i.e. signed_mode = False, weights are shaped (256, 256). If using signed weights, the shape is reduced to (128, 256), i.e. 256 inputs are mapped to 128 results. :ivar cached_reset_synin: Cached builder containing instructions to reset synaptic input lines. Contains a call to <a class="reference internal" href="#classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1ad60afd58e932f2943b7777261af17147"><span class="std std-ref">reset_synin()</span></a>. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="calix.hagen.multiplication.Multiplication.__init__">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1a46cb094449aaf0ba2b72523206f40169"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.SynramOnDLS</span> <span class="pre">synram=halco.SynramOnDLS()</span></em>, <em class="sig-param"><span class="pre">*int</span> <span class="pre">num_sends=1</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">wait_period=1</span></em>, <em class="sig-param"><span class="pre">bool</span> <span class="pre">signed_mode=True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="calix.hagen.multiplication.Multiplication.auto_multiply">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1affcf9b725c4def0ece26029e5ddc9cf0"></span><code class="sig-name descname"><span class="pre">auto_multiply</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">vectors</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">matrix</span></em>, <em class="sig-param"><span class="pre">*Union[int</span></em>, <em class="sig-param"><span class="pre">str]</span> <span class="pre">n_row_repeats=1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.auto_multiply" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiply given vectors with the given matrix. </p>
<p>Handle input shape of the matrix automatically, i.e. split large matrices (containing many inputs) up into multiple runs or repeat small matrices multiple times in order to increase signal. The outer dimension (i.e. number of outputs) has to fit on the width of the synapse array, it is not handled here.</p>
<p>:param connection: Connection to the chip to run on. :param vectors: Array of vectors to be multiplied. We expect row vectors, with the inner dimension (columns) holding the individual entries of each vector. :param matrix: Weight matrix to be multiplied. :param n_row_repeats: Number of repetitions of the weight matrix. In contrast to vector resends, the matrix rows are repeated, which also compensates fixed-pattern noise. Defaults to 1. Select “auto” to fill up the synapse array with a small matrix.</p>
<p>:return: Numpy array with the result of multiplication. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.multiplication.Multiplication.get_synapse_matrix">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1afffb70472bdfdd273e8125783c05f8e5"></span><code class="sig-name descname"><span class="pre">get_synapse_matrix</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">matrix</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.get_synapse_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a suitable lola SynapseMatrix depending on the requested weights. </p>
<p>:param matrix: Weight matrix as a numpy array. :return: <code class="docutils literal notranslate"><span class="pre">lola.SynapseMatrix</span></code> with addresses and weights set. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.multiplication.Multiplication.multiply">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1a7309ae951b4b272bac41d6150bd9f03f"></span><code class="sig-name descname"><span class="pre">multiply</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">vectors</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">matrix</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.multiply" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiply given vectors with the given matrix, return results. </p>
<p>The matrix shape has to match the synapse array exactly, there is no splitting or merging of matrix shapes.</p>
<p>:param connection: Connection to the chip to run on. :param vectors: Array of vectors to be multiplied. We expect row vectors, with the inner dimension (columns) holding the individual entries of each vector. :param matrix: Array of weights.</p>
<p>:return: Array of results of the MAC operation. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.multiplication.Multiplication.preconfigure">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1a8bf5dd3a189798f32682ce1977ca87d9"></span><code class="sig-name descname"><span class="pre">preconfigure</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.preconfigure" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure synapse drivers, neurons, crossbar and external DAC. </p>
<p>The previously configured hagen dac offsets and STP ramp offsets are kept unchanged.</p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.multiplication.Multiplication.preconfigure_crossbar">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1ab4ebe975716282f175e0c2997aba3921"></span><code class="sig-name descname"><span class="pre">preconfigure_crossbar</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cls</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.preconfigure_crossbar" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the crossbar such that the upper bits in an event label select target hemisphere and PADI bus. </p>
<p>Also enable SPL1 events in the PADI buses.</p>
<p>:param builder: Builder to append instructions to. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.multiplication.Multiplication.prepare_event">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1abe8118bc5b68054948c3065380316de3"></span><code class="sig-name descname"><span class="pre">prepare_event</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hal.SynapseQuad.Label</span> <span class="pre">address</span></em>, <em class="sig-param"><span class="pre">halco.SynapseDriverOnSynapseDriverBlock</span> <span class="pre">target_driver</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.prepare_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a spike pack to chip, containing an event reaching the desired synapse driver on the synram in use. </p>
<p>:param address: Address that is sent to the driver. The MSB reaches the synapses, the lower 5 bit encode the desired activation. :param target_driver: Coordinate of the targeted driver.</p>
<p>:return: Spike packet to chip. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.multiplication.Multiplication.reset_synin">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1ad60afd58e932f2943b7777261af17147"></span><code class="sig-name descname"><span class="pre">reset_synin</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.reset_synin" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect synapse lines to the debug lines shortly. </p>
<p>The switches for excitatory and inhibitory synaptic currents are enabled.</p>
<p>:param builder: Builder to append instructions to. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.multiplication.Multiplication.synram_coord">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1a89dc4ccf3946befcef1bee0f2f80dc78"></span><code class="sig-name descname"><span class="pre">synram_coord</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.synram_coord" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the synram to perform MAC operations on. </p>
</dd></dl>

<dl class="py function">
<dt id="id158">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1aef71fd010813384c5eca464648193730"></span><code class="sig-name descname"><span class="pre">synram_coord</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id158" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the synram to perform MAC operations on. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="calix.hagen.multiplication.Multiplication.cached_reset_synin">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1a56112d04db51cae20a5cf57484f8e1a6"></span><code class="sig-name descname"><span class="pre">cached_reset_synin</span></code><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.cached_reset_synin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.hagen.multiplication.Multiplication.num_sends">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1ab268f4436c1e5f76df5a6929b535345f"></span><code class="sig-name descname"><span class="pre">num_sends</span></code><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.num_sends" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.hagen.multiplication.Multiplication.signed_mode">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1a9a41371d03a70758a30698848ff6816c"></span><code class="sig-name descname"><span class="pre">signed_mode</span></code><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.signed_mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.hagen.multiplication.Multiplication.wait_period">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1ada7c34995b4dff34a4982ddf7fdc8f84"></span><code class="sig-name descname"><span class="pre">wait_period</span></code><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.wait_period" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-functions">Public Static Functions</p>
<dl class="py function">
<dt id="calix.hagen.multiplication.Multiplication.configure_for_integration">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1ac4b33e2833c816ad9bfc58610e9c4aab"></span><code class="sig-name descname"><span class="pre">configure_for_integration</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">lola.AtomicNeuron</span> <span class="pre">config</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.configure_for_integration" title="Permalink to this definition">¶</a></dt>
<dd><p>Set static configuration for integration on excitatory synaptic input lines. </p>
<p>:param config: Configuration container to be altered. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.multiplication.Multiplication.preconfigure_dac">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1a71cfacfaf8ef292981cb018e6ab112a0"></span><code class="sig-name descname"><span class="pre">preconfigure_dac</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.preconfigure_dac" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect the external DAC to the synapse debug lines, supplying a voltage of 1.2 V. </p>
<p>The potential will be used for resetting potentials on the synapse lines before integration.</p>
<p>:param builder: Builder to append instructions to. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="calix.hagen.multiplication.Multiplication.synram_selection_bit">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1a411ecb7db69d56b72c0961e1cdeeca0d"></span><code class="sig-name descname"><span class="pre">synram_selection_bit</span></code><em class="property"> <span class="pre">=</span> <span class="pre">13</span></em><a class="headerlink" href="#calix.hagen.multiplication.Multiplication.synram_selection_bit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-functions">Private Functions</p>
<dl class="py function">
<dt id="calix.hagen.multiplication.Multiplication._check_shape">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1a522eac83856c44793f7f1a1358666a34"></span><code class="sig-name descname"><span class="pre">_check_shape</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">vectors</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">matrix</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.multiplication.Multiplication._check_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Asserts the vecotrs and matrix fit on a synapse array. </p>
<p>:raises ValueError: If the vector or matrix shapres are bad or contain entries outside the feasible range. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.multiplication.Multiplication._send_vectors">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1ace576ef4a27267ffc6affc977d3714d6"></span><code class="sig-name descname"><span class="pre">_send_vectors</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">vectors</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.multiplication.Multiplication._send_vectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Send given vectors and multiply them with the previously configured synapse matrix. </p>
<p>Return a list of CADC sample rows containing accumulated results.</p>
<p>:param vectors: Array of vectors to be multiplied. We expect row vectors, with the inner dimension (columns) holding the individual entries of each vector. :return: Tuple containing:<ul class="simple">
<li><p>Program builder with instructions to send vectors and read results</p></li>
<li><p>List of CADC sample row tickets, contianing results </p></li>
</ul>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-members">Private Members</p>
<dl class="py attribute">
<dt id="calix.hagen.multiplication.Multiplication._synram_coord">
<span class="target" id="classcalix_1_1hagen_1_1multiplication_1_1_multiplication_1a0567bfa9ad4c4d61b2f9f347453ec9b1"></span><code class="sig-name descname"><span class="pre">_synram_coord</span></code><a class="headerlink" href="#calix.hagen.multiplication.Multiplication._synram_coord" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_options"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron.NeuronCalibOptions</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationOptions</span></code></dt>
<dd><p>Further options for the neuron calibration. </p>
<p>:ivar readout_neuron: Coordinate of the neuron to be connected to a readout pad, i.e. can be observed using an oscilloscope. The selected neuron is connected to the upper pad (channel 0), the lower pad (channel 1) always shows the CADC ramp of quadrant 0. The pads are connected via halco.SourceMultiplexerOnReadoutSourceSelection(0) for the neuron and mux 1 for the CADC ramps. When using the internal MADC for recording, these multiplexers can be selected directly. If None is given, the readout is not configured. :ivar initial_configuration: Additional function which is called before starting the calibration. Called with <code class="docutils literal notranslate"><span class="pre">connection</span></code>, such that the hardware is available within the function. If None (default), no additional configuration gets applied. </p>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_options"></span><code class="sig-name descname"><span class="pre">calix.spiking.neuron.NeuronCalibOptions</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationOptions</span></code></dt>
<dd><p>Further configuration parameters for neuron calibration. </p>
<p>:ivar readout_neuron: Coordinate of the neuron to be connected to a readout pad, i.e. can be observed using an oscilloscope. The selected neuron is connected to the upper pad (channel 0), the lower pad (channel 1) always shows the CADC ramp of quadrant 0. When using the MADC, select halco.SourceMultiplexerOnReadoutSourceSelection(0) for the neuron and mux 1 for the CADC ramps. If None is given, the readout is not configured. </p>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_result"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron.NeuronCalibResult</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationResult</span></code></dt>
<dd><p>Result object of a neuron calibration. </p>
<p>Holds calibrated parameters for all neurons and their calibration success. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id159">
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_result_1a9c343dba7a0ae30be6b143d59785be1e"></span><code class="sig-name descname"><span class="pre">apply</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[sta.PlaybackProgramBuilder</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilderDumper]</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id159" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the calibration in the given builder. </p>
<p>Configures neurons in a “default-working” state with calibration applied, just like after the calibration.</p>
<p>:param builder: Builder or dumper to append configuration instructions to. </p>
</dd></dl>

<dl class="py function">
<dt id="success_mask">
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_result_1ab31a80f5f878ff9ea481d3ddbe27053a"></span><code class="sig-name descname"><span class="pre">success_mask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#success_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the success dict to a boolean numpy mask. </p>
<p>:return: Numpy array containing neuron calibration success, ordered matching the AtomicNeuronOnDLS enum. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_target"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron.NeuronCalibTarget</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationTarget</span></code></dt>
<dd><p>Target parameters for the neuron calibration. </p>
<p>:ivar target_leak_read: Target CADC read at resting potential of the membrane. Due to the low leak bias currents, the spread of resting potentials may be high even after calibration. :ivar tau_mem: Targeted membrane time constant while calibrating the synaptic inputs. Too short values can not be achieved with this calibration routine. The default value of 60 us should work. If a target_noise is given (default), this setting does not affect the final leak bias currents, as those are determined by reaching the target noise. :ivar tau_syn: Controls the synaptic input time constant. If set to 0 us, the minimum synaptic input time constant will be used, which means different synaptic input time constants per neuron. If a single different Quantity is given, it is used for all synaptic inputs of all neurons, excitatory and inhibitory. If an array of Quantities is given, it can be shaped (2, 512) for the excitatory and inhibitory synaptic input of each neuron. It can also be shaped (2,) for the excitatory and inhibitory synaptic input of all neurons, or shaped (512,) for both inputs per neuron. :ivar i_synin_gm: Target synaptic input OTA bias current. The amplitudes of excitatory inputs using this target current are measured, and the median of all neurons’ amplitudes is taken as target for calibration of the synaptic input strengths. The inhibitory synaptic input gets calibrated to match the excitatory. Some 300 LSB are proposed here. Choosing high values yields higher noise and lower time constants on the neurons, choosing low values yields less gain in a multiplication. :ivar target_noise: Noise amplitude in an integration process to aim for when searching the optimum leak OTA bias current, given as the standard deviation of successive reads in CADC LSB. Higher noise settings mean longer membrane time constants but impact reproducibility. Set target_noise to None to skip optimization of noise amplitudes entirely. In this case, the original membrane time constant calibration is used for leak bias currents. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id162">
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_target_1ad412ed2d2d13d350a60df02dbc0174ec"></span><code class="sig-name descname"><span class="pre">check_types</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id162" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the correct types are given. </p>
<p>:raises TypeError: If time constants are not given with a unit from the <code class="docutils literal notranslate"><span class="pre">quantities</span></code> package. </p>
</dd></dl>

<dl class="py function">
<dt id="id163">
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_target_1a8316a579ab0b228e4f0dc402e3266aef"></span><code class="sig-name descname"><span class="pre">check_values</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id163" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether calibration targets are feasible. </p>
<p>Log warnings if the parameters are out of the typical range which can be calibrated and raise an error if the time constants exceed the range which can be handled by the calibration routine.</p>
<p>:raises ValueError: If target parameters are outside the allowed range for hagen neuron calibration. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id160">
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_target_1a83db216c40d71d5da120ed052cb8bd65"></span><code class="sig-name descname"><span class="pre">feasible_ranges</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{&quot;target_leak_read&quot;:</span> <span class="pre">base.ParameterRange(100,</span> <span class="pre">140),&quot;tau_syn&quot;:</span> <span class="pre">base.ParameterRange(0.3</span> <span class="pre">*</span> <span class="pre">pq.us,</span> <span class="pre">20</span> <span class="pre">*</span> <span class="pre">pq.us),&quot;tau_mem&quot;:</span> <span class="pre">base.ParameterRange(20</span> <span class="pre">*</span> <span class="pre">pq.us,</span> <span class="pre">100</span> <span class="pre">*</span> <span class="pre">pq.us),&quot;i_synin_gm&quot;:</span> <span class="pre">base.ParameterRange(30,</span> <span class="pre">600),&quot;target_noise&quot;:</span> <span class="pre">base.ParameterRange(1.0,</span> <span class="pre">2.5)}</span></em><a class="headerlink" href="#id160" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id161">
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_target_1a4232d3c2e7beb4ac246409b354fa0064"></span><code class="sig-name descname"><span class="pre">int</span></code><a class="headerlink" href="#id161" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="Quantity">
<span class="target" id="classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_target_1a3fb62f6e63520305be8bf1b8441b3ad7"></span><code class="sig-name descname"><span class="pre">Quantity</span></code><a class="headerlink" href="#Quantity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target"></span><code class="sig-name descname"><span class="pre">calix.spiking.neuron.NeuronCalibTarget</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationTarget</span></code></dt>
<dd><p>Target parameters for the neuron calibration. </p>
<p>Calibration target parameters: :ivar leak: Target CADC read at leak (resting) potential. :ivar reset: Target CADC read at reset potential. :ivar threshold: Target CADC read near spike threshold. :ivar tau_mem: Membrane time constant. :ivar tau_syn: Synaptic input time constant. If a single float value is given, it is used for all synaptic inputs on all neurons, excitatory and inhibitory. If a numpy array of floats is given, it can be shaped (2, 512) for the excitatory and inhibitory synaptic input of each neuron. It can also be shaped (2,) for the excitatory and inhibitory synaptic input of all neurons, or shaped (512,) for both inputs per neuron. :ivar i_synin_gm: Synaptic input strength as CapMem bias current. Here, if a single value is given, both excitatory and inhibitory synaptic inputs are calibrated to a target measured as the median of all neurons at this setting. If an array shaped (2,) is given, the values are used as excitatory and inhibitory target values, respectively. If an array (512,) or (2, 512) is given, the synaptic input strength is NOT calibrated, as this array would already be the result of calibration. Instead, the values are set up per neuron and used during the later parts, i.e. synaptic input reference calibration. :ivar membrane_capacitance: Selected membrane capacitance. The available range is 0 to approximately 2.2 pF, represented as 0 to 63 LSB. :ivar refractory_time: Refractory time, given with a unit as <code class="docutils literal notranslate"><span class="pre">quantities.quantity.Quantity</span></code>. :ivar synapse_dac_bias: Synapse DAC bias current that is desired. Can be lowered in order to reduce the amplitude of a spike at the input of the synaptic input OTA. This can be useful to avoid saturation when using larger synaptic time constants. :ivar holdoff_time: Target length of the holdoff period. The holdoff period is the time at the end of the refractory period in which the clamping to the reset voltage is already released but new spikes can still not be generated. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id167">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1ab92505905778336a03e5a051720f9dfe"></span><code class="sig-name descname"><span class="pre">check_types</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id167" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether parameters have the right types and shapes. </p>
<p>:raises TypeError: If time constants are not given with a unit from the <code class="docutils literal notranslate"><span class="pre">quantities</span></code> package. :raises ValueError: If shape of parameters is bad. </p>
</dd></dl>

<dl class="py function">
<dt id="id168">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1a7b894a5123cd960ebd033d40c6bf407b"></span><code class="sig-name descname"><span class="pre">check_values</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id168" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether calibration targets are feasible. </p>
<p>Log warnings if the parameters are out of the typical range which can be calibrated and raise an error if the time constants exceed the range which can be handled by the calibration routine.</p>
<p>:raises ValueError: If target parameters are outside the allowed range for spiking neuron calibration. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="DenseDefault">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1a684163d85dcb98cc2b81b52d2d8e1277"></span><code class="sig-name descname"><span class="pre">DenseDefault</span></code><a class="headerlink" href="#DenseDefault" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id164">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1afef0ed829f1ae27410434a745fb2d32f"></span><code class="sig-name descname"><span class="pre">feasible_ranges</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{&quot;leak&quot;:</span> <span class="pre">base.ParameterRange(50,</span> <span class="pre">160),&quot;reset&quot;:</span> <span class="pre">base.ParameterRange(50,</span> <span class="pre">160),&quot;threshold&quot;:</span> <span class="pre">base.ParameterRange(50,</span> <span class="pre">220),&quot;tau_mem&quot;:</span> <span class="pre">base.ParameterRange(0.5</span> <span class="pre">*</span> <span class="pre">pq.us,</span> <span class="pre">60</span> <span class="pre">*</span> <span class="pre">pq.us),&quot;tau_syn&quot;:</span> <span class="pre">base.ParameterRange(0.3</span> <span class="pre">*</span> <span class="pre">pq.us,</span> <span class="pre">30</span> <span class="pre">*</span> <span class="pre">pq.us),&quot;i_synin_gm&quot;:</span> <span class="pre">base.ParameterRange(30,</span> <span class="pre">800),&quot;membrane_capacitance&quot;:</span> <span class="pre">base.ParameterRange(hal.NeuronConfig.MembraneCapacitorSize.min,hal.NeuronConfig.MembraneCapacitorSize.max),&quot;refractory_time&quot;:</span> <span class="pre">base.ParameterRange(40</span> <span class="pre">*</span> <span class="pre">pq.ns,</span> <span class="pre">32</span> <span class="pre">*</span> <span class="pre">pq.us),&quot;synapse_dac_bias&quot;:</span> <span class="pre">base.ParameterRange(30,</span> <span class="pre">hal.CapMemCell.Value.max),&quot;holdoff_time&quot;:</span> <span class="pre">base.ParameterRange(0</span> <span class="pre">*</span> <span class="pre">pq.ns,</span> <span class="pre">4</span> <span class="pre">*</span> <span class="pre">pq.us)}</span></em><a class="headerlink" href="#id164" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="holdoff_time">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1ab84d4ff3b5fd51f43e34acacdd2d2e7b"></span><code class="sig-name descname"><span class="pre">holdoff_time</span></code><a class="headerlink" href="#holdoff_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="i_synin_gm">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1aa503ebf7e5d6ceaa3e276c3fa2751870"></span><code class="sig-name descname"><span class="pre">i_synin_gm</span></code><a class="headerlink" href="#i_synin_gm" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id165">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1a1872498171b3765fec0a4cb2b70cd5f1"></span><code class="sig-name descname"><span class="pre">int</span></code><a class="headerlink" href="#id165" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="leak">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1a66c07d63ea7c6cedfbc371b3699d72ed"></span><code class="sig-name descname"><span class="pre">leak</span></code><a class="headerlink" href="#leak" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="membrane_capacitance">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1a4071408886420729a9c530e9733fe7a9"></span><code class="sig-name descname"><span class="pre">membrane_capacitance</span></code><a class="headerlink" href="#membrane_capacitance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id166">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1a9a7d9ed9af8f14a0618184a4a2c23763"></span><code class="sig-name descname"><span class="pre">Quantity</span></code><a class="headerlink" href="#id166" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="refractory_time">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1ab885eebc2718a27efa8a3a9370fe0232"></span><code class="sig-name descname"><span class="pre">refractory_time</span></code><a class="headerlink" href="#refractory_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="reset">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1acc3d89b6a68e7c921d9344f8d4ac1e53"></span><code class="sig-name descname"><span class="pre">reset</span></code><a class="headerlink" href="#reset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="synapse_dac_bias">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1a507013e61f2e22b554ba5594a50e818e"></span><code class="sig-name descname"><span class="pre">synapse_dac_bias</span></code><a class="headerlink" href="#synapse_dac_bias" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="tau_mem">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1a766316f92420c6308bf2627f2ca8e3ec"></span><code class="sig-name descname"><span class="pre">tau_mem</span></code><a class="headerlink" href="#tau_mem" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="tau_syn">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1a915424ce7094f482c576e37db7647d11"></span><code class="sig-name descname"><span class="pre">tau_syn</span></code><a class="headerlink" href="#tau_syn" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="threshold">
<span class="target" id="classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target_1ad352eb3d5bea23c02f592637023a8a46"></span><code class="sig-name descname"><span class="pre">threshold</span></code><a class="headerlink" href="#threshold" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_neuron_threshold_calibration"></span><code class="sig-name descname"><span class="pre">calix.spiking.neuron_threshold.NeuronThresholdCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.spiking.neuron_threshold._SpikeCounterCalibration</span></code></dt>
<dd><p>Calibrate the spike threshold of all neurons to be slightly above the resting potential, such that even small inputs can trigger spikes. </p>
<p>During calibration, a low spike rate is desired, indicating the spike threshold roughly matching the resting potential. After a spike, the membrane potential is set as low as possible, and the next spike should only happen after multiple membrane time constants.</p>
<p>To prevent self-induced spiking (without excitatory input), the spike threshold is increased by a safe_margin after calibration. In this state, a single input of medium weight should trigger spikes in most neurons, while most neurons should not spike on their own. Decreasing the safe_margin allows smaller inputs to trigger spikes, at the cost of having more neurons spike without input.</p>
<p>Requirements:<ul class="simple">
<li><p>The leak potential is currently set at the desired threshold potential.</p></li>
</ul>
</p>
<p>Caution:<ul class="simple">
<li><p>The reset potential is set to the minimum after calibration.</p></li>
</ul>
</p>
<p>:ivar safe_margin: Amount to increase spike threshold after the calibration. Given in CapMem LSB. The default value of 40 seems to work for inputs of weight 32, for a hagen-mode-like calibration on HICANN-X v2. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id170">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_neuron_threshold_calibration_1a382f6feb672b4db332bdee0a8f5c457d"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">safe_margin=40</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id170" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id171">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_neuron_threshold_calibration_1a0fedf4a9b863ae539d92a1f46a9febeb"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id171" title="Permalink to this definition">¶</a></dt>
<dd><p>Increase parameters found during calibration by safe margin. </p>
<p>Measure spikes for one second and log data for neurons which still spike frequently if safe_margin is at least 10 (otherwise we assume frequent spiking is expected).</p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

<dl class="py function">
<dt id="id172">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_neuron_threshold_calibration_1ac93fedf3bba60d368cc885113e976c33"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id172" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure neurons for easy spiking. </p>
<p>The membrane capacitance is set low to have a short membrane time constant and easily reach the leak potential after a reset. The reset potential is set to the minimum as it must be below the spike threshold, which is not yet known.</p>
<p>:param connection: Connection to the chip to configure. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="id169">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_neuron_threshold_calibration_1aa5838eec3e08b6f4b9a78f42654ab5ba"></span><code class="sig-name descname"><span class="pre">accumulation_time</span></code><a class="headerlink" href="#id169" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="safe_margin">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_neuron_threshold_calibration_1aa849c77318ce4b601bf7444da38a72e2"></span><code class="sig-name descname"><span class="pre">safe_margin</span></code><a class="headerlink" href="#safe_margin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_noisy_binary_search"></span><code class="sig-name descname"><span class="pre">calix.common.algorithms.NoisyBinarySearch</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.algorithms.BinarySearch</span></code></dt>
<dd><p>Perform binary search with noisy start parameters. </p>
<p>The start of the search is not the middle of the range, but some integer noise given by <code class="docutils literal notranslate"><span class="pre">noise_amplitude</span></code> is added beforehand. This is useful to avoid issues that arise from setting many CapMem cells to the same value (CapMem crosstalk, issue 2654). The binary search takes an extra step to compensate for the initial offsets.</p>
<p>The <a class="reference internal" href="#classcalix_1_1common_1_1algorithms_1_1_noisy_binary_search"><span class="std std-ref">NoisyBinarySearch</span></a> algorithm is typically used to prevent that many CapMem cells are set to the same value. Since a binary search could theoretically drive many cells to the same CapMem value in the final steps, more steps are taken into account in the end to find an optimal value.</p>
<p>:ivar noise_amplitude: Amount of noise to add at the start of the calibration. Must be a positive integer; use the algorithm <code class="docutils literal notranslate"><a class="reference internal" href="#classcalix_1_1common_1_1algorithms_1_1_binary_search"><span class="std std-ref"><span class="pre">BinarySearch</span></span></a></code> to work without noise. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id175">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_noisy_binary_search_1a70b949af7aba359db1d184ffb798d49e"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">noise_amplitude=5</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id175" title="Permalink to this definition">¶</a></dt>
<dd><p>:raises ValueError: if <code class="docutils literal notranslate"><span class="pre">noise_amplitude</span></code> is not greater than zero. </p>
</dd></dl>

<dl class="py function">
<dt id="id176">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_noisy_binary_search_1a505b16c712f1c11d1ba67351d23636ff"></span><code class="sig-name descname"><span class="pre">hook_to_calibration</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">base.Calibration</span> <span class="pre">calibration</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id176" title="Permalink to this definition">¶</a></dt>
<dd><p>Make an instance of a calibration known to the algorithm, allowing to use parameters set there. </p>
<p>:param calibration: Instance of calibration class that will be run with this algorithm.</p>
<p>:raises ExcessiveNoiseError: If the applied noise amplitude is more than a quarter of the calibration range, since that noise would lead to hitting the range boundaries instantly. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="id173">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_noisy_binary_search_1a3005ab586d632a685235c1701c394f79"></span><code class="sig-name descname"><span class="pre">initial_parameters</span></code><a class="headerlink" href="#id173" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="noise_amplitude">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_noisy_binary_search_1ad154b9e2e806741323bc93ae4b65044d"></span><code class="sig-name descname"><span class="pre">noise_amplitude</span></code><a class="headerlink" href="#noise_amplitude" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id174">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_noisy_binary_search_1a36fba95fd3bffa4ea2479025ffb96a67"></span><code class="sig-name descname"><span class="pre">step_increments</span></code><a class="headerlink" href="#id174" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.common.base.ParameterCalibrationResult">
<span class="target" id="classcalix_1_1common_1_1base_1_1_parameter_calibration_result"></span><em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">ParameterCalibrationResult</span></code><a class="headerlink" href="#calix.common.base.ParameterCalibrationResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Data structure for calibration results of single parameters. </p>
<p>Contains an array of calibrated parameters and a mask indicating calibration success. </p>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_polynomial_prediction"></span><code class="sig-name descname"><span class="pre">calix.common.algorithms.PolynomialPrediction</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.algorithms.PredictiveModel</span></code></dt>
<dd><p>Class implementing a polynomial predictive model. </p>
<p>Construction of this class requires an instance of numpy Polynomial which already contains suitable parameters, or measured data from characterization of the parameter/result pair to be calibrated (via <code class="docutils literal notranslate"><a class="reference internal" href="#classcalix_1_1common_1_1algorithms_1_1_polynomial_prediction_1a5811a37edfd1d85bce0222645f93adb9"><span class="std std-ref"><span class="pre">from_data()</span></span></a></code>). In the latter case, a fit to the data is performed to obtain the numpy polynomial.</p>
<p>:ivar polynomial: Instance of numpy polynomial, used as a model to map target values to parameters. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1common_1_1algorithms_1_1_linear_prediction"><span class="std std-ref">calix.common.algorithms.LinearPrediction</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id177">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_polynomial_prediction_1ae17d8422954f190e7ce69896e3d1c4e3"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">probe_parameters</span></em>, <em class="sig-param"><span class="pre">np.polynomial.polynomial.Polynomial</span> <span class="pre">polynomial</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id177" title="Permalink to this definition">¶</a></dt>
<dd><p>:param probe_parameters: Parameter at which a measurement was or will be taken in order to determine the offsets for each calibration instance. </p>
<p>Refer to <code class="docutils literal notranslate"><span class="pre">_predict</span></code> for details. </p>
</dd></dl>

<dl class="py function">
<dt id="from_data">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_polynomial_prediction_1a5811a37edfd1d85bce0222645f93adb9"></span><code class="sig-name descname"><span class="pre">from_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cls</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">results</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">degree</span></em><span class="sig-paren">)</span><a class="headerlink" href="#from_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct the polynomial prediction from data. </p>
<p>A polynomial of given degree is fitted to the parameters and results. Refer to the documentation of numpy.polynomial.polynomial.Polynomial for details on how the fit is performed.</p>
<p>The median of the parameters used during characterization is used as probe point when determining the offset of each instance during prediction.</p>
<p>:param parameters: Array of parameters where values have been recored. :param results: Array of results obtained at parameters. :param degree: Degree of the fitted polynomial. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="polynomial">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_polynomial_prediction_1a467c5be38fff38947ea33b113be04752"></span><code class="sig-name descname"><span class="pre">polynomial</span></code><a class="headerlink" href="#polynomial" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-functions">Private Functions</p>
<dl class="py function">
<dt id="predict">
<span id="_predict"></span><span class="target" id="classcalix_1_1common_1_1algorithms_1_1_polynomial_prediction_1a26c5eb0874c7ef44280589926ddd75e3"></span><code class="sig-name descname"><span class="pre">_predict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">probe_results</span></em>, <em class="sig-param"><span class="pre">Union[float</span></em>, <em class="sig-param"><span class="pre">int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">target_result</span></em><span class="sig-paren">)</span><a class="headerlink" href="#predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict parameters to obtain the given target results. </p>
<p>Evaluate the polynomial at probe parameters and compare with the results obtained there to determine the required offset of each instance. Evaluate the shifted polynomial at the target results to obtain the results predicted by the model.</p>
<p>:param probe_results: Array of results achieved using self.probe_parameters. :param target_result: Array or single value to aim results for.</p>
<p>:return: Array containing the parameters which are expected to yield results closest to the desired target results. Results are rounded to the nearest integer parameters. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_predictive_model"></span><code class="sig-name descname"><span class="pre">calix.common.algorithms.PredictiveModel</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.base.Algorithm</span></code></dt>
<dd><p>Base class for predictive models, which calculate the ideal parameters to achieve a target result based on a model. </p>
<p>The models predict() function translates desired results into parameters. As there are differences between instances of the same thing on the chip, which is usually target of calibration, a shift of the model per instance is determined before calculating the optimal parameters. This means probe_parameters are configured and measured, used as shift, then the model prediction is calculated and returned. Running the algorithm, the shifts described above are measured at the probe parameters, then the parameters returned from the prediction are ensured to be in the allowed parameter range and set up on the chip before returning.</p>
<p>:ivar probe_parameters: Parameters to use when determining the shift each instance has with respect to the expected model. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1common_1_1algorithms_1_1_polynomial_prediction"><span class="std std-ref">calix.common.algorithms.PolynomialPrediction</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id178">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_predictive_model_1a586e66799ed157a8d627f15059551319"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">probe_parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id178" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id179">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_predictive_model_1a3c7a81f1ffc164d3d2cc02f6d8c875a9"></span><code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">Union[float</span></em>, <em class="sig-param"><span class="pre">int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">target_result</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id179" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the algorithm, i.e. </p>
<p>configure the probe parameters, measure results there, calculate optimal parameters based on this measurement and the model, and set these up.</p>
<p>:param connection: Connection connected to the chip to run on. :param target_result: Array or single value to be aimed for.</p>
<p>:return: Array containing the parameters which are expected to yield results closest to the desired target results. All parameters are in the allowed ParameterRange. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="probe_parameters">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_predictive_model_1a09c4c9ac6bdfe0faf1764ec80c75fad5"></span><code class="sig-name descname"><span class="pre">probe_parameters</span></code><a class="headerlink" href="#probe_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-functions">Private Functions</p>
<dl class="py function">
<dt id="id180">
<span class="target" id="classcalix_1_1common_1_1algorithms_1_1_predictive_model_1a782d7ff07148489afa495a005f7c8b22"></span><code class="sig-name descname"><span class="pre">_predict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">probe_results</span></em>, <em class="sig-param"><span class="pre">Union[float</span></em>, <em class="sig-param"><span class="pre">int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">target_result</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id180" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict parameters which need to be set to achieve the given target_result. </p>
<p>Use the probe_results at self.probe_parameters as baseline to determine offsets of individual instances.</p>
<p>:param probe_results: Array of results achieved using self.probe_parameters. :param target_result: Array or single value to aim results for.</p>
<p>:return: Array containing the parameters which are expected to yield results closest to the desired target results. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_ramp_offset_calibration"></span><code class="sig-name descname"><span class="pre">calix.common.cadc.RampOffsetCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.base.Calibration</span></code></dt>
<dd><p>CADC Calibration Part 1: Calibrate the ramp reset/start voltage. </p>
<p>This is done by setting the current onto the ramp high and searching the ramp start voltage such that the given minimum of the dynamic range reads the given target value at the CADCs.</p>
<p>This class implements configure and measure functions required by a calibration algorithm to run. Calling run on the calibration does the necessary preconfiguring and uses the given algorithm to find suitable parameters.</p>
<p>Requirements:<ul class="simple">
<li><p>All CADC channels are connected to the CADC debug line (can be achieved with <code class="docutils literal notranslate"><a class="reference internal" href="#namespacecalix_1_1common_1_1cadc__helpers_1a9430dec490ba7ccdb3ed5fae03679174"><span class="std std-ref"><span class="pre">cadc_helpers.configure_chip()</span></span></a></code>).</p></li>
<li><p>CADC debug line connected to CapMem cell <code class="docutils literal notranslate"><span class="pre">stp_v_charge_0</span></code> (can be archived with <code class="docutils literal notranslate"><a class="reference internal" href="#namespacecalix_1_1common_1_1cadc__helpers_1ae1b2868842daac1b443b9aa7bf577ac2"><span class="std std-ref"><span class="pre">cadc_helpers.configure_readout_cadc_debug()</span></span></a></code>)</p></li>
</ul>
</p>
<p>:ivar dynamic_range_min: Lower end of the desired dynamic range of the CADCs. Given in CapMem LSB. The voltage is configured as <code class="docutils literal notranslate"><span class="pre">stp_v_charge_0</span></code>, which is connected to the CADCs via the CapMem debug readout. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id182">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_ramp_offset_calibration_1a1b2192e5b73f98a8682f3f31a0a2dc46"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">target=20</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">dynamic_range_min=70</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id182" title="Permalink to this definition">¶</a></dt>
<dd><p>:param dynamic_range_min: Lower end of the desired dynamic range of the CADCs. </p>
<p>Given in LSB of a global CapMem cell. </p>
</dd></dl>

<dl class="py function">
<dt id="id183">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_ramp_offset_calibration_1a5d725ff1b8e7972eacbc9b3b496e8412"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id183" title="Permalink to this definition">¶</a></dt>
<dd><p>Set CapMem cells cadc_v_ramp_offset of each quadrant to the values given in the array. </p>
<p>:param builder: Builder to append configuring instructions. :param parameters: Array of ramp start voltages to be configured.</p>
<p>:return: Builder with configuration instructions appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id184">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_ramp_offset_calibration_1afa5e8a6d57aa9a363a15bc42357b70fb"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id184" title="Permalink to this definition">¶</a></dt>
<dd><p>Read all CADC channels. </p>
<p>Compute means of quadrants and return those.</p>
<p>:param connection: Connection to read CADCs with. :param builder: Builder to append read instructions to before executing it.</p>
<p>:return: Array with mean CADC reads of each quadrant. </p>
</dd></dl>

<dl class="py function">
<dt id="id185">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_ramp_offset_calibration_1a1a274046eabf86715e9b63314a5063f1"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id185" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to preconfigure CapMem parameters for the calibration runs. </p>
<p>Sets the ramp slope current high and the common voltage applied to all CADC channels to the lower end of the specified dynamic range. This reference voltage is set via the cell <code class="docutils literal notranslate"><span class="pre">stp_v_charge_0</span></code> that has to be connected to the CapMem debug output.</p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="dynamic_range_min">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_ramp_offset_calibration_1a2ea97f272c1ea843121b62d48657f82d"></span><code class="sig-name descname"><span class="pre">dynamic_range_min</span></code><a class="headerlink" href="#dynamic_range_min" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id181">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_ramp_offset_calibration_1a4fdc593dafb10483469e6fd6e07bec65"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id181" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_ramp_slope_calibration"></span><code class="sig-name descname"><span class="pre">calix.common.cadc.RampSlopeCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.base.Calibration</span></code></dt>
<dd><p>CADC Calibration part 2: Calibrate the steepness of the ramp, i.e. </p>
<p>the current onto the ramp capacitor.</p>
<p>This is done by adjusting the value until the upper end of the given dynamic range reads a target value at the CADCs.</p>
<p>This class implements functions to configure the capmem cell that controls the ramp current and to measure the results. It also contains necessary preconfiguration of the CapMem.</p>
<p>Requirements:<ul class="simple">
<li><p>All CADC channels are connected to the CADC debug line (can be achieved with <code class="docutils literal notranslate"><a class="reference internal" href="#namespacecalix_1_1common_1_1cadc__helpers_1a9430dec490ba7ccdb3ed5fae03679174"><span class="std std-ref"><span class="pre">cadc_helpers.configure_chip()</span></span></a></code>).</p></li>
<li><p>CADC debug line connected to CapMem cell <code class="docutils literal notranslate"><span class="pre">stp_v_charge_0</span></code> (can be archived with <code class="docutils literal notranslate"><a class="reference internal" href="#namespacecalix_1_1common_1_1cadc__helpers_1ae1b2868842daac1b443b9aa7bf577ac2"><span class="std std-ref"><span class="pre">cadc_helpers.configure_readout_cadc_debug()</span></span></a></code>)</p></li>
</ul>
</p>
<p>:ivar dynamic_range_max: Upper end of the desired dynamic range of the CADCs. Given in LSB of a global CapMem cell. The voltage is configured as <code class="docutils literal notranslate"><span class="pre">stp_v_charge_0</span></code>, which has to be connected to the CADCs via the CapMem debug readout. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id187">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_ramp_slope_calibration_1a449fcae1db4348982f5ff606c2eb0acf"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">target=220</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">dynamic_range_max=550</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id187" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id188">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_ramp_slope_calibration_1a0e4a6e3778bef5c478331b3723545bc1"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id188" title="Permalink to this definition">¶</a></dt>
<dd><p>Set CapMem cells cadc_i_ramp_slope of each quadrant to the values given in the array. </p>
<p>:param builder: Builder to append configuring instructions. :param parameters: Array of ramp currents to be configured.</p>
<p>:return: Builder with configuration instructions appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id189">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_ramp_slope_calibration_1abe21ae89230d68fd8f90d604e8d69045"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id189" title="Permalink to this definition">¶</a></dt>
<dd><p>Read all CADC channels. </p>
<p>Compute means of quadrants and return those.</p>
<p>:param connection: Connection to read CADCs with. :param builder: Builder to append read instructions to.</p>
<p>:return: Array with mean CADC reads of each quadrant. </p>
</dd></dl>

<dl class="py function">
<dt id="id190">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_ramp_slope_calibration_1a559ff5a01a5b4163f9d0753e30bcf5c2"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id190" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to preconfigure capmem parameters for the calibration runs. </p>
<p>Sets the the common voltage applied to all CADC channels to the upper end of the specified dynamic range.</p>
<p>:param connection: Connection to the chip to be calibrated. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="dynamic_range_max">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_ramp_slope_calibration_1a7ab9a53e223c20dc1e62960a3d5afcdc"></span><code class="sig-name descname"><span class="pre">dynamic_range_max</span></code><a class="headerlink" href="#dynamic_range_max" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id186">
<span class="target" id="classcalix_1_1common_1_1cadc_1_1_ramp_slope_calibration_1aacebbf2b6d07c6d474b3e0a7bb7c1ea6"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id186" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder"></span><code class="sig-name descname"><span class="pre">calix.common.madc_base.Recorder</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">ABC</span></code></dt>
<dd><p>Abstract base class for experiments/calibrations which use the MADC. </p>
<p>During <a class="reference internal" href="#classcalix_1_1common_1_1madc__base_1_1_recorder_1a98fd1c3839d2af3d6829c1ca52f93953"><span class="std std-ref">prepare_recording()</span></a>, the MADC is enabled and the current readout section config is saved. During recording, the readout config is changed continuously to measure one neuron’s properties after another. Furthermore, a stimuli can be injected during the measurement to observe the neurons’ responses and the recording timing per neuron can be set.</p>
<p>:ivar original_readout_config: Source selection mux config before start of the experiment. Used to restore state after the experiment has finished. :ivar original_neuron_configs: Neuron configs before start of the experiment. Used to restore state after the experiment. :ivar sampling_time: Time to record MADC samples for each neuron. The requested sampling time must be achievable with the maximum number of samples in the MADCConfig - without using continuous sampling. With default settings, this equals roughly 2.18 ms of recording time per neuron. :ivar _wait_before_stimulation: Time to wait after triggering MADC sampling before stimulation. Marked private since analyzing the trace is typically not robust against changing this number. :ivar dead_time: Time to wait before triggering the MADC sampling after the previous sampling period ended. Within this time, the neuron connections are changed. A minimum of 1 us is recommended. :ivar wait_between_neurons: Total time to wait for samples for each neuron. Has to be larger than the sum of sampling_time, wait_before_stimulation and dead_time. :ivar madc_input_frequency: Expected input clock frequency for the MADC, supplied by the PLL. Defaults to 500 MHz, which is present after the default stadls ExperimentInit. :ivar madc_config: Static configuration of the MADC. Written during <a class="reference internal" href="#classcalix_1_1common_1_1madc__base_1_1_recorder_1a98fd1c3839d2af3d6829c1ca52f93953"><span class="std std-ref">prepare_recording()</span></a> and used to obtain the sample rate. The number of samples is calculated automatically based on the sampling_time. :ivar invalid_samples_time: Timeframe in the beginning of a trace that is considered invalid. The MADC will start recording samples, but only after this time has elapsed, the sampling_time starts and samples are returned. This works around a bug, see issue 4008 for details. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1common_1_1madc__base_1_1_calibration"><span class="std std-ref">calix.common.madc_base.Calibration</span></a>, <a class="reference internal" href="#classcalix_1_1common_1_1madc__base_1_1_membrane_recorder"><span class="std std-ref">calix.common.madc_base.MembraneRecorder</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id195">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1aed756cd92ed3cd875042468e160d8133"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id195" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="build_measurement_program">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1a4d42ac1c0c14d4225ec043b6419f90e3"></span><code class="sig-name descname"><span class="pre">build_measurement_program</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#build_measurement_program" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a program to measure an arbitrary MADC trace for each neuron. </p>
<p>One neuron after another is connected to the MADC, the stimulate function is called and samples are recorded. The timing of each neuron is recorded, tickets containing the start and stop of the recording time are returned along with the builder.</p>
<p>:param builder: Builder to append instructions to.</p>
<p>:return: Tuple containing:<ul class="simple">
<li><p>Builder with instructions appended.</p></li>
<li><p>List of read tickets marking start and end of the recording of each neuron. </p></li>
</ul>
</p>
</dd></dl>

<dl class="py function">
<dt id="id196">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1a3c28b3f486b51ba88c88dfd49025d8f7"></span><code class="sig-name descname"><span class="pre">neuron_config_disabled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id196" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config in silent state, i.e. </p>
<p>disconnected from the common readout lines.</p>
<p>:param neuron_coord: Coordinate of neuron to get config for.</p>
<p>:return: Neuron config with readout disabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id197">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1add0096262650d6081b5c0942872f46d6"></span><code class="sig-name descname"><span class="pre">neuron_config_readout</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id197" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout active and connected to the readout lines. </p>
<p>:param neuron_coord: Coordinate of neuron to get config for.</p>
<p>:return: Neuron config with readout enabled. </p>
</dd></dl>

<dl class="py function">
<dt id="prepare_recording">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1a98fd1c3839d2af3d6829c1ca52f93953"></span><code class="sig-name descname"><span class="pre">prepare_recording</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#prepare_recording" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares chip for the experiment. </p>
<p>Configures the MADC and sets necessary bias currents. Reads and saves readout config and neuron config to restore original state after the experiment.</p>
<p>:param connection: Connection to the chip. </p>
</dd></dl>

<dl class="py function">
<dt id="record_traces">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1a3538bf5e59dd76ec8aef61798ad22b4d"></span><code class="sig-name descname"><span class="pre">record_traces</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#record_traces" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes measurement on chip, returns samples per neuron. </p>
<p>:param connection: Connection to the chip to calibrate. :param builder: Builder to append measurement program to.</p>
<p>:return: List of numpy arrays, containing samples for each neuron.</p>
<p>:raises TooFewSamplesError: If the number of received MADC samples is significantly smaller than expected for at least one neuron. The evaluate function may fail in this case, thus the error is caught here. </p>
</dd></dl>

<dl class="py function">
<dt id="restore_initial_state">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1a12e69a52ac8b3976aaad2c812f815cb7"></span><code class="sig-name descname"><span class="pre">restore_initial_state</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#restore_initial_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore original readout and neuron configuration. </p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

<dl class="py function">
<dt id="id198">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1ac827b3f3395263889939368cdf793b01"></span><code class="sig-name descname"><span class="pre">stimulate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em>, <em class="sig-param"><span class="pre">hal.Timer.Value</span> <span class="pre">stimulation_time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id198" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute some commands after triggering MADC sampling. </p>
<p>E.g., synaptic inputs could be sent to observe their shape.</p>
<p>:param builder: Builder to append stimulation instructions to. :param neuron_coord: Coordinate of neuron which is currently recorded. :param stimulation_time: Timer value at beginning of stimulation.</p>
<p>:return: Builder with stimulation instructions appended. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="id191">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1aed1a6c4cf11253dc959e2e11918d00fa"></span><code class="sig-name descname"><span class="pre">dead_time</span></code><a class="headerlink" href="#id191" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="invalid_samples_time">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1a0a507d46381ff101666ba7a444f21eab"></span><code class="sig-name descname"><span class="pre">invalid_samples_time</span></code><a class="headerlink" href="#invalid_samples_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="madc_config">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1aad8bc0b01134033fcae2f58e00a7c936"></span><code class="sig-name descname"><span class="pre">madc_config</span></code><a class="headerlink" href="#madc_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="madc_input_frequency">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1aad5b9340bd1b3d217f101bd68fa7bd26"></span><code class="sig-name descname"><span class="pre">madc_input_frequency</span></code><a class="headerlink" href="#madc_input_frequency" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="original_neuron_configs">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1a40296eac46a14ee3bec6f6ffd212df9f"></span><code class="sig-name descname"><span class="pre">original_neuron_configs</span></code><a class="headerlink" href="#original_neuron_configs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="original_readout_config">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1ae49d97bdb499f7a1075f245d49df1501"></span><code class="sig-name descname"><span class="pre">original_readout_config</span></code><a class="headerlink" href="#original_readout_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id192">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1a23cb3effdc5ecba968285fb2a4d91967"></span><code class="sig-name descname"><span class="pre">sampling_time</span></code><a class="headerlink" href="#id192" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id193">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1a54d32db8ccda9f526840c29428a35115"></span><code class="sig-name descname"><span class="pre">wait_between_neurons</span></code><a class="headerlink" href="#id193" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-members">Private Members</p>
<dl class="py attribute">
<dt id="id194">
<span class="target" id="classcalix_1_1common_1_1madc__base_1_1_recorder_1af85d9708411b80afddefa2201caa6683"></span><code class="sig-name descname"><span class="pre">_wait_before_stimulation</span></code><a class="headerlink" href="#id194" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix__generate__default__calibration_1_1_recorder_and_dumper"></span><code class="sig-name descname"><span class="pre">calix_generate_default_calibration.RecorderAndDumper</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">metaclass</span> <span class="pre">,</span> <span class="pre">public</span> <span class="pre">ABCMeta</span></code></dt>
<dd><p>Record and dump calibration data. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix__generate__default__calibration_1_1_hagen_calibration"><span class="std std-ref">calix_generate_default_calibration.HagenCalibration</span></a>, <a class="reference internal" href="#classcalix__generate__default__calibration_1_1_hagen_synin_calibration"><span class="std std-ref">calix_generate_default_calibration.HagenSyninCalibration</span></a>, <a class="reference internal" href="#classcalix__generate__default__calibration_1_1_spiking_calibration"><span class="std std-ref">calix_generate_default_calibration.SpikingCalibration</span></a>, <a class="reference internal" href="#classcalix__generate__default__calibration_1_1_spiking_calibration2"><span class="std std-ref">calix_generate_default_calibration.SpikingCalibration2</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id199">
<span class="target" id="classcalix__generate__default__calibration_1_1_recorder_and_dumper_1a184f894832ecdf39e471ecf3f8fccd50"></span><code class="sig-name descname"><span class="pre">dumpers</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id199" title="Permalink to this definition">¶</a></dt>
<dd><p>List of Dumpers used for serializing the calibration data. </p>
<p>All will serialize the data that has been acquired in a single calibration run. </p>
</dd></dl>

<dl class="py function">
<dt id="record_and_dump">
<span class="target" id="classcalix__generate__default__calibration_1_1_recorder_and_dumper_1a0cc50808178afc8d3f5c7d5b2b82534b"></span><code class="sig-name descname"><span class="pre">record_and_dump</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">Path</span> <span class="pre">deployment_folder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#record_and_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Record calibration data and dump it to a file. </p>
<p>:param connection: Connection used to acquire the calibration data :param deployment_folder: Folder the file with serialized results is created in. </p>
</dd></dl>

<dl class="py function">
<dt id="id200">
<span class="target" id="classcalix__generate__default__calibration_1_1_recorder_and_dumper_1a4590a651fd2adb203cc1b9fdd59046f7"></span><code class="sig-name descname"><span class="pre">recorder</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id200" title="Permalink to this definition">¶</a></dt>
<dd><p>Recorder used for acquiring the calibration data. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_reset_potential_calibration"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_potentials.ResetPotentialCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.Calibration</span></code></dt>
<dd><p>Calibrate the neurons’ reset target voltage such that it matches the leak potential. </p>
<p>The refractory time is extended in order to measure the membrane potentials while the neuron is at reset potential. The CapMem settings which yield CADC reads which match the potential without reset are searched.</p>
<p>Requirements:<ul class="simple">
<li><p>Neuron membrane readout is connected to the CADCs (causal and acausal).</p></li>
<li><p>Reset bias current is set not too low, such that a resting potential is reached during the refractory period. Note that this calibration has to be re-run after the reset bias current was changed, due to the OTA’s characteristics.</p></li>
<li><p>Target CADC read at reset potential is given, or membrane potential is not floating (i.e. the leak bias current is not too low). You may use the highnoise flag to indicate multiple measurements of the resting potential shall be taken in order to find the target reset potential.</p></li>
</ul>
</p>
<p>:ivar highnoise: Decides whether to expect high noise on the membrane potential to be present. Setting this to True results in multiple reads of the resting potential when finding the calibration target value. :ivar backend_configs: List containing neuron backend configs as read in the prelude of the calibration. Used to restore the original config in the postlude. :ivar common_backend_configs: List containing common neuron backend configs as read during the prelude. Used to restore the original config in the postlude. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id202">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_reset_potential_calibration_1aa46e1c9d091b9d114998f3a97fc6d2e8"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">target=None</span></em>, <em class="sig-param"><span class="pre">bool</span> <span class="pre">highnoise=False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id202" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__potentials_1_1_reset_potential_calibration"><span class="std std-ref">ResetPotentialCalibration</span></a> class. </p>
<p>:param target: Target CADC reads during reset. If not given, they are measured during prelude. If given, the highnoise option has no effect. </p>
</dd></dl>

<dl class="py function">
<dt id="id203">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_reset_potential_calibration_1a34eee1a668f366fac076484f066b6311"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id203" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the reset potentials of all neurons to the values given in the parameter array. </p>
<p>:param builder: Builder to append configuration to. :param parameters: CapMem values of the reset potential.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id204">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_reset_potential_calibration_1a9eef3416e327b51634e4e1637833781f"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id204" title="Permalink to this definition">¶</a></dt>
<dd><p>Test the configured settings. </p>
<p>The neurons are artificially reset and their membrane potentials are read using the CADCs.</p>
<p>:param connection: Connection to a chip to run on. :param builder: Builder to append read instructions.</p>
<p>:return: Membrane potentials of neurons during reset. </p>
</dd></dl>

<dl class="py function">
<dt id="id205">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_reset_potential_calibration_1ae3bbd4b72f4379997310a7e5fa4bc14d"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id205" title="Permalink to this definition">¶</a></dt>
<dd><p>Log statistics of the results. </p>
<p>Restore original configuration of the neuron backends.</p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

<dl class="py function">
<dt id="id206">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_reset_potential_calibration_1ae854145b9994b26f85d5474cb596d3e0"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id206" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure a calibration target (the leak reads) if not provided. </p>
<p>Select the slower clock in the digital neuron backend and set the refractory counter values in each neuron to keep the neuron refractory long enough so that the CADCs can read the potentials. The original neuron backend config is stored to be restored.</p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="backend_configs">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_reset_potential_calibration_1a45aa2096d92d430de729c694314fedbc"></span><code class="sig-name descname"><span class="pre">backend_configs</span></code><a class="headerlink" href="#backend_configs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="common_backend_configs">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_reset_potential_calibration_1acaa5f7997732c1b4722d88fc839f04e4"></span><code class="sig-name descname"><span class="pre">common_backend_configs</span></code><a class="headerlink" href="#common_backend_configs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="highnoise">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_reset_potential_calibration_1a46dff2853e11c044346185796495542c"></span><code class="sig-name descname"><span class="pre">highnoise</span></code><a class="headerlink" href="#highnoise" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id201">
<span class="target" id="classcalix_1_1hagen_1_1neuron__potentials_1_1_reset_potential_calibration_1aaf92b7e74c4b1e2c35bd42001ee651e3"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id201" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.hagen.neuron_helpers.CADCReadNeurons.Result">
<span class="target" id="classcalix_1_1hagen_1_1neuron__helpers_1_1_c_a_d_c_read_neurons_1_1_result"></span><em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">calix.hagen.neuron_helpers.CADCReadNeurons.</span></code><code class="sig-name descname"><span class="pre">Result</span></code><a class="headerlink" href="#calix.hagen.neuron_helpers.CADCReadNeurons.Result" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__helpers_1_1_c_a_d_c_read_neurons_1_1_result"><span class="std std-ref">Result</span></a> object holding membrane potentials of all neurons. </p>
<p>:ivar tickets: List of CADCSampleRow tickets containing the reads for top and bottom synram, respectively. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="calix.hagen.neuron_helpers.CADCReadNeurons.Result.__init__">
<span class="target" id="classcalix_1_1hagen_1_1neuron__helpers_1_1_c_a_d_c_read_neurons_1_1_result_1a246372a5bd5e8aa62975076603c3e361"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">List[sta.ContainerTicket_CADCSampleRow]</span> <span class="pre">tickets</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.CADCReadNeurons.Result.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.CADCReadNeurons.Result.to_numpy">
<span class="target" id="classcalix_1_1hagen_1_1neuron__helpers_1_1_c_a_d_c_read_neurons_1_1_result_1a88d579af0a36194dab13d61b3ceb4614"></span><code class="sig-name descname"><span class="pre">to_numpy</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.CADCReadNeurons.Result.to_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a numpy array containing CADC reads interpreted as neuron results. </p>
<p>Note that the CADCs have to be connected to the neurons for this to make sense.</p>
<p>:return: Potential acquired from all neurons. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="calix.hagen.neuron_helpers.CADCReadNeurons.Result.tickets">
<span class="target" id="classcalix_1_1hagen_1_1neuron__helpers_1_1_c_a_d_c_read_neurons_1_1_result_1aadd55bde38175fe1fe29c351cf5f210c"></span><code class="sig-name descname"><span class="pre">tickets</span></code><a class="headerlink" href="#calix.hagen.neuron_helpers.CADCReadNeurons.Result.tickets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.spiking.refractory_period.Settings">
<span class="target" id="classcalix_1_1spiking_1_1refractory__period_1_1_settings"></span><em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">calix.spiking.refractory_period.</span></code><code class="sig-name descname"><span class="pre">Settings</span></code><a class="headerlink" href="#calix.spiking.refractory_period.Settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Class providing array-like access to settings related to the refractory clock. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="calix.spiking.refractory_period.Settings.int">
<span class="target" id="classcalix_1_1spiking_1_1refractory__period_1_1_settings_1a5b2a245c96c4124dd897b3742262aca7"></span><code class="sig-name descname"><span class="pre">int</span></code><a class="headerlink" href="#calix.spiking.refractory_period.Settings.int" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix__generate__default__calibration_1_1_spiking_calibration"></span><code class="sig-name descname"><span class="pre">calix_generate_default_calibration.SpikingCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix_generate_default_calibration.RecorderAndDumper</span></code></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id207">
<span class="target" id="classcalix__generate__default__calibration_1_1_spiking_calibration_1a06e0fee9dbace7c31d2f9729f7c53ee8"></span><code class="sig-name descname"><span class="pre">dumpers</span></code><em class="property"> <span class="pre">=</span> <span class="pre">[CalixFormatDumper(),</span>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">CocoListPortableBinaryFormatDumper(),</span>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">CocoListJsonFormatDumper()]</span></em><a class="headerlink" href="#id207" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id208">
<span class="target" id="classcalix__generate__default__calibration_1_1_spiking_calibration_1a5db7a1f35c17eebde929693392173ff5"></span><code class="sig-name descname"><span class="pre">recorder</span></code><em class="property"> <span class="pre">=</span> <span class="pre">SpikingCalibRecorder()</span></em><a class="headerlink" href="#id208" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix__generate__default__calibration_1_1_spiking_calibration2"></span><code class="sig-name descname"><span class="pre">calix_generate_default_calibration.SpikingCalibration2</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix_generate_default_calibration.RecorderAndDumper</span></code></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id209">
<span class="target" id="classcalix__generate__default__calibration_1_1_spiking_calibration2_1a96eeda85b1d7f53726af249664b2164d"></span><code class="sig-name descname"><span class="pre">dumpers</span></code><em class="property"> <span class="pre">=</span> <span class="pre">[CalixFormatDumper(),</span>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">CocoListPortableBinaryFormatDumper(),</span>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">CocoListJsonFormatDumper()]</span></em><a class="headerlink" href="#id209" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id210">
<span class="target" id="classcalix__generate__default__calibration_1_1_spiking_calibration2_1a4490adfe3efa3466e19b47a8fb480c0a"></span><code class="sig-name descname"><span class="pre">recorder</span></code><em class="property"> <span class="pre">=</span> <span class="pre">SpikingCalibRecorder2()</span></em><a class="headerlink" href="#id210" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1spiking_1_1_spiking_calibration_options"></span><code class="sig-name descname"><span class="pre">calix.spiking.SpikingCalibrationOptions</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationOptions</span></code></dt>
<dd><p>Data class containing further options for spiking calibration. </p>
<p>:ivar cadc_options: Further options for CADC calibration. :ivar neuron_options: Further options for neuron calibration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id211">
<span class="target" id="classcalix_1_1spiking_1_1_spiking_calibration_options_1ad2661e863d4d8d275a8bd2dfe7713024"></span><code class="sig-name descname"><span class="pre">CADCCalibOptions</span></code><a class="headerlink" href="#id211" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id212">
<span class="target" id="classcalix_1_1spiking_1_1_spiking_calibration_options_1a9a0d2227ff118d97fc8583839e8f0344"></span><code class="sig-name descname"><span class="pre">NeuronCalibOptions</span></code><a class="headerlink" href="#id212" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1spiking_1_1_spiking_calibration_result"></span><code class="sig-name descname"><span class="pre">calix.spiking.SpikingCalibrationResult</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationResult</span></code></dt>
<dd><p>Data class containing results of cadc and neuron calibration, all what is necessary for operation in spiking mode. </p>
<p>Refer to the documentation of :class:<code class="docutils literal notranslate"><a class="reference internal" href="#classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_result"><span class="std std-ref"><span class="pre">calix.common.cadc.CADCCalibResult</span></span></a></code>, :class:<code class="docutils literal notranslate"><span class="pre">calix.spiking.neuron.NeuronCalibResult</span></code> for details about the contained result objects. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id213">
<span class="target" id="classcalix_1_1spiking_1_1_spiking_calibration_result_1a041cd59fefa031fc8df30848fc727aba"></span><code class="sig-name descname"><span class="pre">apply</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[sta.PlaybackProgramBuilder</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilderDumper]</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id213" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the calib to the chip. </p>
<p>Assumes the chip to be initialized already, which can be done using the stadls ExperimentInit().</p>
<p>:param builder: Builder to append instructions to. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1spiking_1_1_spiking_calibration_target"></span><code class="sig-name descname"><span class="pre">calix.spiking.SpikingCalibrationTarget</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationTarget</span></code></dt>
<dd><p>Data class containing targets for spiking neuron calibration. </p>
<p>:ivar cadc_target: Target parameters for CADC calibration. :ivar neuron_target: Target parameters for neuron calibration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id214">
<span class="target" id="classcalix_1_1spiking_1_1_spiking_calibration_target_1a19bf362b78efe027237dbf5a690e34cf"></span><code class="sig-name descname"><span class="pre">CADCCalibTarget</span></code><a class="headerlink" href="#id214" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id215">
<span class="target" id="classcalix_1_1spiking_1_1_spiking_calibration_target_1a7fb4804b47c28053678468b53e2e5bbb"></span><code class="sig-name descname"><span class="pre">NeuronCalibTarget</span></code><a class="headerlink" href="#id215" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix__generate__default__calibration_1_1_spiking_calib_recorder"></span><code class="sig-name descname"><span class="pre">calix_generate_default_calibration.SpikingCalibRecorder</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix_generate_default_calibration.CalibrationRecorder</span></code></dt>
<dd><p>Recorder for a default Spiking-Mode calibration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id217">
<span class="target" id="classcalix__generate__default__calibration_1_1_spiking_calib_recorder_1a8628b20446af7b21ed5fd275806f1512"></span><code class="sig-name descname"><span class="pre">generate_calib</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id217" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute calibration routines and create a result object. </p>
<p>:param connection: Connection used for acquiring calibration data. :return: Calibration result data </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id216">
<span class="target" id="classcalix__generate__default__calibration_1_1_spiking_calib_recorder_1ab7258be4e484bff3073f9b5a22c7430f"></span><code class="sig-name descname"><span class="pre">calibration_type</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;spiking&quot;</span></em><a class="headerlink" href="#id216" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix__generate__default__calibration_1_1_spiking_calib_recorder2"></span><code class="sig-name descname"><span class="pre">calix_generate_default_calibration.SpikingCalibRecorder2</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix_generate_default_calibration.CalibrationRecorder</span></code></dt>
<dd><p>Recorder for a second Spiking-Mode calibration. </p>
<p>In contrast to the default “spiking” calibration, we use smaller synaptic and membrane time constants, but stronger currents per event. Synaptic events should be shaprer in the sense that they are stronger, but decay more quickly. Also, the spike threshold is increased.</p>
<p>This calibration will, among other uses, be used in the demo notebooks, for the yin-yang example. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id219">
<span class="target" id="classcalix__generate__default__calibration_1_1_spiking_calib_recorder2_1a3618e6daa17ca7eca5bb23b4e4b851e5"></span><code class="sig-name descname"><span class="pre">generate_calib</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id219" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute calibration routines and create a result object. </p>
<p>:param connection: Connection used for acquiring calibration data. :return: Calibration result data </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="py attribute">
<dt id="id218">
<span class="target" id="classcalix__generate__default__calibration_1_1_spiking_calib_recorder2_1a22151bf712aae08f9314ee259017eba0"></span><code class="sig-name descname"><span class="pre">calibration_type</span></code><em class="property"> <span class="pre">=</span> <span class="pre">&quot;spiking2&quot;</span></em><a class="headerlink" href="#id218" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1spiking_1_1synapse__driver_1_1_s_t_p_multiplication"></span><code class="sig-name descname"><span class="pre">calix.spiking.synapse_driver.STPMultiplication</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">multiplication.Multiplication</span></code></dt>
<dd><p>Perform vector-matrix multiplications, but without hagen-mode pulse length encoding. </p>
<p>The pulse length is instead determined by the STP voltage.</p>
<p>Note that we set a static voltage for both v_recover and v_charge and this way leave no dynamic range for modulation of amplitudes depending on their timing. We only set a medium amplitude with a suitable voltage v_stp := v_recover = v_charge. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="preconfigure">
<span class="target" id="classcalix_1_1spiking_1_1synapse__driver_1_1_s_t_p_multiplication_1a73f73d654dc098641b99de06593b1aca"></span><code class="sig-name descname"><span class="pre">preconfigure</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#preconfigure" title="Permalink to this definition">¶</a></dt>
<dd><p>Call preconfigure from parent class, but disable hagen-mode encoding (use STP voltages instead). </p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1spiking_1_1synapse__driver_1_1_s_t_p_offset_calibration"></span><code class="sig-name descname"><span class="pre">calix.spiking.synapse_driver.STPOffsetCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.Calibration</span></code></dt>
<dd><p>Calibrate synapse driver STP ramp offsets for usage in spiking mode. </p>
<p>Since the hagen-mode DAC is not involved now, the STP voltages can use a higher dynamic range determined by v_charge and v_recover. This usually means a different STP ramp current is used than in hagen mode.</p>
<p>Drivers connected to different CapMem instances are calibrated to different targets since deviations in STP voltages and ramp currents (which are set for each CapMem instance individually) have higher variations than can be compensated with the STP offset.</p>
<p>Note that this calibration measures synapse drivers’ outputs on the synaptic input lines, not on the neurons. The neurons are reconfigured for this purpose. If they were calibrated, you will need to re-apply their calibration after the STP offsets are calibrated.</p>
<p>Requirements:<ul class="simple">
<li><p>CADCs and Synapse DAC biases are calibrated.</p></li>
</ul>
</p>
<p>:ivar v_stp: STP voltage to use during amplitude measurement, reached by setting v_charge and v_recover to this value. If an array of values is given, they are configured per quadrant. :ivar i_ramp: STP ramp current. If an array of values is given, they are configured per quadrant. :ivar measurement: Instance of measurement class, in order to measure the characteristic output amplitudes of each synapse driver. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id221">
<span class="target" id="classcalix_1_1spiking_1_1synapse__driver_1_1_s_t_p_offset_calibration_1a605117ecc052b8bd5de0871d2d7291c5"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">v_stp=180</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">i_ramp=600</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id221" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id222">
<span class="target" id="classcalix_1_1spiking_1_1synapse__driver_1_1_s_t_p_offset_calibration_1a9b343c527009d7bbae3b9a9f111df57e"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id222" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the synapse drivers to the given offsets. </p>
<p>:param builder: Builder to append configuration to. :param parameters: Synapse driver offset settings to configure.</p>
<p>:return: Builder with configuration instructions appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id223">
<span class="target" id="classcalix_1_1spiking_1_1synapse__driver_1_1_s_t_p_offset_calibration_1a0c97114acca2020b0bfd91976fb97400"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id223" title="Permalink to this definition">¶</a></dt>
<dd><p>Read output amplitudes of synapse drivers. </p>
<p>:param connection: Connection to the chip to run on. :param builder: Builder that is run before measuring.</p>
<p>:return: Array of synapse drivers’ output amplitudes. </p>
</dd></dl>

<dl class="py function">
<dt id="id224">
<span class="target" id="classcalix_1_1spiking_1_1synapse__driver_1_1_s_t_p_offset_calibration_1ac0b27cc89da407ae6501f5fbdf4efa33"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id224" title="Permalink to this definition">¶</a></dt>
<dd><p>Log standard deviation of amplitudes after calibration. </p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

<dl class="py function">
<dt id="id225">
<span class="target" id="classcalix_1_1spiking_1_1synapse__driver_1_1_s_t_p_offset_calibration_1ae3aea2b1468f637522352356a60defb3"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id225" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up STP voltages and currents. </p>
<p>Measure target values as median of drivers of a CapMem block. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="i_ramp">
<span class="target" id="classcalix_1_1spiking_1_1synapse__driver_1_1_s_t_p_offset_calibration_1ad18c8ccba05292c91a978104774d0262"></span><code class="sig-name descname"><span class="pre">i_ramp</span></code><a class="headerlink" href="#i_ramp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="measurement">
<span class="target" id="classcalix_1_1spiking_1_1synapse__driver_1_1_s_t_p_offset_calibration_1a686334699acab2154f38ba0ffdf05e69"></span><code class="sig-name descname"><span class="pre">measurement</span></code><a class="headerlink" href="#measurement" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id220">
<span class="target" id="classcalix_1_1spiking_1_1synapse__driver_1_1_s_t_p_offset_calibration_1a66fbb77d920deae232c7edf94f8f4ff4"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id220" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="v_stp">
<span class="target" id="classcalix_1_1spiking_1_1synapse__driver_1_1_s_t_p_offset_calibration_1a596ae378d6dc97cd15031583dbbf5398"></span><code class="sig-name descname"><span class="pre">v_stp</span></code><a class="headerlink" href="#v_stp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_s_t_p_ramp_calibration"></span><code class="sig-name descname"><span class="pre">calix.hagen.synapse_driver.STPRampCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.Calibration</span></code></dt>
<dd><p>Search synapse driver STP ramp currents such that the mean amplitudes of drivers on different CapMem blocks are the same. </p>
<p>This is necessary as 64 drivers each, which are connected to the same CapMem block, receive the same bias current, but different instances of the CapMem can drive different currents at the same setting. This calibration counters systematic deviations in amplitudes between synapse drivers on different quadrants.</p>
<p>The amplitudes are measured with the neurons in integration mode. In order to obtain a representative result for a quadrant’s amplitudes with the STP offsets not calibrated yet, we select an “average” driver for each CapMem block during the prelude. The median of their amplitudes is used as calibration target.</p>
<p>Requirements:<ul class="simple">
<li><p>Synapse DAC bias is calibrated.</p></li>
<li><p>Static synapse driver bias currents are set. This can be achieved using <code class="docutils literal notranslate"><a class="reference internal" href="#namespacecalix_1_1hagen_1_1synapse__driver_1aefcc00c2c91844169a8e06f78035ea83"><span class="std std-ref"><span class="pre">preconfigure_capmem()</span></span></a></code>.</p></li>
</ul>
</p>
<p>:ivar test_activation: Hagen-mode activation to use when determining the ramp slope. Should be low, close but not equal to zero. Make sure to change the target amplitude accordingly when changing the test_activation. :ivar n_parallel_measurements: Number of parallel measurements to execute when measuring results. :ivar offset_calib: Instance of calibration used for Hagen DAC offset. This calibration is called each time after changing the STP ramp currents, before measuring results. :ivar log: Logger used to log outputs. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id230">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_s_t_p_ramp_calibration_1a869c4118899dd63280703cf2a732004c"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id230" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id231">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_s_t_p_ramp_calibration_1ab2f62e6d4428b30901c271c4b229c128"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id231" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the given STP ramp currents to the CapMem quadrants. </p>
<p>The STP calibration current is set equal to this ramp current: The ramp offset calibration works by sinking part of the ramp current within the first 2 ns of the ramp generation phase. The calibration current controls the sinked current, therefore it is sensible to scale it with the sourced (ramp) current.</p>
<p>:param builder: Builder to append configuration to. :param parameters: STP ramp currents to set.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id232">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_s_t_p_ramp_calibration_1a4c81a84c97aae70496921a910979c943"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id232" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure the amplitudes of all drivers at a low activation. </p>
<p>This corresponds to a high DAC voltage, i.e. the end of the ramp. We return the mean amplitude per quadrant.</p>
<p>:param connection: Connection to the chip to run on. :param builder: Builder to measure results with.</p>
<p>:return: Array of STP amplitudes per quadrant. </p>
</dd></dl>

<dl class="py function">
<dt id="id233">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_s_t_p_ramp_calibration_1a2fe9ec5feb84723550cdc966f9db456d"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id233" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the calibrated ramp currents. </p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

<dl class="py function">
<dt id="id234">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_s_t_p_ramp_calibration_1ada9bc9eb835896150a44b3dc01eb0ca0"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id234" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure maximum amplitude per driver, using a high ramp bias current and a high activation. </p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="id226">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_s_t_p_ramp_calibration_1a809f759f7b8e42453daf65de7d756e45"></span><code class="sig-name descname"><span class="pre">log</span></code><a class="headerlink" href="#id226" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id227">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_s_t_p_ramp_calibration_1afbcbaaccae8936df6e812e76c6551865"></span><code class="sig-name descname"><span class="pre">n_parallel_measurements</span></code><a class="headerlink" href="#id227" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="offset_calib">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_s_t_p_ramp_calibration_1a3dd388a92c9d04e5f0611050f5fafc50"></span><code class="sig-name descname"><span class="pre">offset_calib</span></code><a class="headerlink" href="#offset_calib" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id228">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_s_t_p_ramp_calibration_1a2c83193d7c534e4aca64fc1c2ebbd44f"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id228" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id229">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_s_t_p_ramp_calibration_1a1346015d9c13444e356991656d4c0f84"></span><code class="sig-name descname"><span class="pre">test_activation</span></code><a class="headerlink" href="#id229" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-functions">Public Static Functions</p>
<dl class="py function">
<dt id="calculate_quadrant_means">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_s_t_p_ramp_calibration_1a6caf6f4b04a197adfd2840ec1ef12802"></span><code class="sig-name descname"><span class="pre">calculate_quadrant_means</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">results</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calculate_quadrant_means" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate mean amplitudes per quadrant from an array of all drivers’ amplitudes. </p>
<p>:param results: Results from all synapse drivers on chip.</p>
<p>:return: Mean results of all drivers on a quadrant. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_calib_options"></span><code class="sig-name descname"><span class="pre">calix.hagen.synapse_driver.SynapseDriverCalibOptions</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationOptions</span></code></dt>
<dd><p>Further options for synapse driver calibration. </p>
<p>:ivar offset_test_activation: Hagen-mode activation where amplitudes between different drivers are aligned using the individual DAC offsets. </p>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_calib_result"></span><code class="sig-name descname"><span class="pre">calix.hagen.synapse_driver.SynapseDriverCalibResult</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.CalibrationResult</span></code></dt>
<dd><p>Result object of a synapse driver calibration. </p>
<p>Holds CapMem cells and synapse driver configs that result from calibration, as well as a success flag for each driver. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id235">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_calib_result_1a94d74faefe11a069ce66c96dfa9f1336"></span><code class="sig-name descname"><span class="pre">apply</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[sta.PlaybackProgramBuilder</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilderDumper]</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id235" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the calibration result in the given builder. </p>
<p>:param builder: Builder or dumper to append instructions to. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.hagen.synapse_driver.SynapseDriverMeasurement">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_measurement"></span><em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">calix.hagen.synapse_driver.</span></code><code class="sig-name descname"><span class="pre">SynapseDriverMeasurement</span></code><a class="headerlink" href="#calix.hagen.synapse_driver.SynapseDriverMeasurement" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a function to measure output amplitudes of each synapse driver. </p>
<p>Each synapse driver is connected to at least 8 synapse columns, their median result is taken as the driver’s output amplitude. The requested number of parallel measurements determines how many synapse columns are used per driver: If only one driver is measured at a time, all 256 synapse columns are used.</p>
<p>When several synapse drivers are measured in parallel, events are sent to one synapse driver after another. Due to analog effects in the synapse array, earlier events will result in a lower activation than later events. Do not use more than one parallel measurement if you cannot cope with this effect.</p>
<p>:ivar n_parallel_measurements: Number of synapse drivers to be measured in one run. Only powers of 2 are supported, i.e. possible values are 1, 2, 4, 8, 16, 32. We do not support more than 32 parallel measurements since we require at least 8 synapse columns per driver, in order to take the median read from those as the driver’s output. :ivar multiplication: Multiplication class used for measurements. Each measurement run is a vector-matrix multiplication. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="calix.hagen.synapse_driver.SynapseDriverMeasurement.__init__">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_measurement_1a386fb65f9d1c695d3a2c8dd833df783a"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">n_parallel_measurements=1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.synapse_driver.SynapseDriverMeasurement.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="calix.hagen.synapse_driver.SynapseDriverMeasurement.get_input_vectors">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_measurement_1a8727e72d02f0c58bebcad583cd32cc04"></span><code class="sig-name descname"><span class="pre">get_input_vectors</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">activations</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.synapse_driver.SynapseDriverMeasurement.get_input_vectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Create vectors that are multiplied with the synapse matrix in order to characterize all drivers’ outputs at the given activations. </p>
<p>In each vector, we send activations to a subset of drivers, that has different columns for their results. Hence, the unique activations of each driver can be obtained. Only in the next vector, we reuse the same columns in order to characterize each synapse driver.</p>
<p>:param activations: Array of activations, each is tested.</p>
<p>:return: Array of vectors, to be used as input for multiplication. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.synapse_driver.SynapseDriverMeasurement.get_synapse_mapping">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_measurement_1ac119bfc32a961b0e6fb8b6462559f932"></span><code class="sig-name descname"><span class="pre">get_synapse_mapping</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.SynapseDriverOnSynapseDriverBlock</span> <span class="pre">driver</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.synapse_driver.SynapseDriverMeasurement.get_synapse_mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Return mask of synapses to enable in a row. </p>
<p>This function can be called for all synapse drivers and will return a synapse matrix that allows measuring amplitudes from a block of <code class="docutils literal notranslate"><span class="pre">self.n_parallel_measurements</span></code> drivers in parallel. The synapse matrix is configured such that the drivers which are measured in parallel do not use the same synapse columns. For the next block of synapse drivers which are measured in parallel, the same synapse columns as for the previous block can be used.</p>
<p>:param driver: Coordinate of the synapse driver which shall be connected to neurons.</p>
<p>:return: Boolean mask of enabled synapses within the synapse driver’s row. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.synapse_driver.SynapseDriverMeasurement.get_synapse_matrix">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_measurement_1adf4dac92c75e281801bb9642facac274"></span><code class="sig-name descname"><span class="pre">get_synapse_matrix</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hal.SynapseQuad.Weight</span> <span class="pre">weight=hal.SynapseQuad.Weight.max</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.synapse_driver.SynapseDriverMeasurement.get_synapse_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a mapping matrix using the given weight. </p>
<p>For the mapping, we use the function <code class="docutils literal notranslate"><span class="pre">get_synapse_mapping</span></code>, which yields a connection matrix between the drivers and neurons. This mapping is designed to create a non-overlapping synapse matrix that allows parallel measurement of multiple drivers.</p>
<p>:param weight: Weight to configure the enabled synapses to.</p>
<p>:return: Numpy array of weight matrix. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.synapse_driver.SynapseDriverMeasurement.measure_syndrv_amplitudes">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_measurement_1a203e8bf58e0c81217f85b924b1a0266b"></span><code class="sig-name descname"><span class="pre">measure_syndrv_amplitudes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">Union[hal.PADIEvent.HagenActivation</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">activations</span></em>, <em class="sig-param"><span class="pre">*hal.SynapseQuad.Weight</span> <span class="pre">weight=hal.SynapseQuad.Weight.max</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">n_runs=5</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">num_sends=3</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.synapse_driver.SynapseDriverMeasurement.measure_syndrv_amplitudes" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiply the given activation with a suitable weight matrix to determine the output amplitudes of each driver. </p>
<p>Use the multiplication function with integration on the synaptic input lines. The weight matrix is configured using the function <code class="docutils literal notranslate"><a class="reference internal" href="#classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_measurement_1adf4dac92c75e281801bb9642facac274"><span class="std std-ref"><span class="pre">get_synapse_matrix()</span></span></a></code>, and vectors equaling the positioning of drivers on PADI busses are used to characterize each drivers’ outputs. The parameter num_sends repeats the vector, i.e. sends multiple events per driver for getting suitable amplitudes. The experiment is repeated n_runs times.</p>
<p>For readout, we use at least 8 synapse columns per driver, determined by the number of parallel measurements, and return the median of each of those synapse blocks. The returned array of amplitudes has one entry for each synapse driver.</p>
<p>:param connection: Connection to the chip to run on. :param activations: Activation to use in input vector. If an array is given, each of the contained activations is tested. In this case, the returned result will have a second, outer dimension corresponding to the different activations. :param weight: Weight to use in synapse matrix. :param n_runs: Number of experiments to take mean from. :param num_sends: Number of events to send per driver in each measurement.</p>
<p>:return: Array of amplitudes of each synapse driver. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="calix.hagen.synapse_driver.SynapseDriverMeasurement.multiplication">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_measurement_1ad18312c9baea73e5ba5df1ca0b2890fc"></span><code class="sig-name descname"><span class="pre">multiplication</span></code><a class="headerlink" href="#calix.hagen.synapse_driver.SynapseDriverMeasurement.multiplication" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.hagen.synapse_driver.SynapseDriverMeasurement.n_parallel_measurements">
<span class="target" id="classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_measurement_1a00bfa8cc704001d7a9de915cd013fc47"></span><code class="sig-name descname"><span class="pre">n_parallel_measurements</span></code><a class="headerlink" href="#calix.hagen.synapse_driver.SynapseDriverMeasurement.n_parallel_measurements" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_synin.SynBiasCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.Calibration</span></code></dt>
<dd><p>Calibrate the strength of synaptic inputs to match for all neurons. </p>
<p>This is done using inputs of multiple rows of synapses at medium weight, with STP disabled, as set during the prelude. With these longer pulses, the mismatch of synapses should be minimal. The bias currents of the synaptic input OTAs are tweaked such that the difference in CADC reads before and after sending inputs match.</p>
<p>Requirements:<ul class="simple">
<li><p>Neuron membrane readout is connected to the CADCs (causal and acausal).</p></li>
<li><p>Synaptic currents can reach the neurons (<code class="docutils literal notranslate"><span class="pre">hal.ColumnCurrentSwitch</span></code>).</p></li>
<li><p>The membrane time constant is long, so that sucessive input events accumulate.</p></li>
<li><p>The selected synaptic time constant and synapse DAC bias current are not too large, so that the amplitudes resulting from a single stimulus don’t already saturate the usable dynamic range at the CADC.</p></li>
</ul>
</p>
<p>:ivar syn_ref_calib: Instance of a <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calibration"><span class="std std-ref">SynReferenceCalibration</span></a>, configured with the given target_leak_read. The synaptic input reference potentials are recalibrated every time after changing the synaptic input OTA bias current. :ivar n_events: Number of events to send during integration of amplitudes in <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration_1a3ad68ab0d7183df4d8e521b3be94f5ef"><span class="std std-ref">measure_results()</span></a>. During prelude the number of events might be reduced if the measured amplitudes are too high. :ivar n_runs: Number of runs to average results from during measurement of amplitudes. :ivar wait_between_events: Wait time between two successive input events. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_bias_calibration"><span class="std std-ref">calix.hagen.neuron_synin.ExcSynBiasCalibration</span></a>, <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_bias_calibration"><span class="std std-ref">calix.hagen.neuron_synin.InhSynBiasCalibration</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id237">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration_1a8d3851d464a2ce7544eb14b6fe61553f"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">target_leak_read</span></em>, <em class="sig-param"><span class="pre">base.ParameterRange</span> <span class="pre">parameter_range=base.ParameterRange(hal.CapMemCell.Value.min</span></em>, <em class="sig-param"><span class="pre">hal.CapMemCell.Value.max)</span></em>, <em class="sig-param"><span class="pre">Optional[np.ndarray]</span> <span class="pre">target=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id237" title="Permalink to this definition">¶</a></dt>
<dd><p>:param target_leak_read: Target CADC read for synaptic input reference potential calibration, which is called after each change of the bias current. </p>
<p>:param parameter_range: Allowed range of synaptic input OTA bias current. :param target: Target amplitudes for events. If given, the measurement of target amplitudes in prelude is skipped. This can be useful when calibrating inhibitory and excitatory synaptic inputs to the same amplitude targets. </p>
</dd></dl>

<dl class="py function">
<dt id="id238">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration_1a76e890c1c7e3bcb41214ef7f28753610"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id238" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the bias current of the synaptic input OTA of all neurons to the given parameters. </p>
<p>The target can be the excitatory or the inhibitory synaptic input circuit depending on the class properties.</p>
<p>:param builder: Builder to append configuration instructions to. :param parameters: Synaptic input OTA bias current.</p>
<p>:return: Builder with configuration instructions appended. </p>
</dd></dl>

<dl class="py function">
<dt id="measure_amplitudes">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration_1a1f10ae1ddf6c1250cf85f97f77c3cf1d"></span><code class="sig-name descname"><span class="pre">measure_amplitudes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">bool</span> <span class="pre">recalibrate_syn_ref=True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#measure_amplitudes" title="Permalink to this definition">¶</a></dt>
<dd><p>Send stimuli to all neurons using a few rows of synapses (as set during the prelude). </p>
<p>The number of inputs in one run as well as the number of runs can be varied, the mean of all experiments is returned.</p>
<p>Returns the difference in CADC reads after and before stimulation. The result uses the appropriate sign depending on excitatory or inhibitory mode, i.e. is normally positive.</p>
<p>:param connection: Connection to the chip to run on. :param builder: Builder to append stimulate/read instructions, then gets executed. :param recalibrate_syn_ref: Switch if the synaptic input reference has to be recalibrated before measuring amplitudes.</p>
<p>:return: Array of amplitudes resulting from stimulation. </p>
</dd></dl>

<dl class="py function">
<dt id="id239">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration_1a3ad68ab0d7183df4d8e521b3be94f5ef"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id239" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure results of calibration. </p>
<p>Calls the measure_amplitudes function using the default setting to recalibrate the synaptic reference potentials before measuring. This function only exists to keep the same arguments as in the base calibration class.</p>
<p>:param connection: Connection to the chip to run on. :param builder: Builder to append stimulate/read instructions, then gets executed.</p>
<p>:return: Array of amplitudes resulting from stimulation. </p>
</dd></dl>

<dl class="py function">
<dt id="id240">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration_1a905654447577be7e45a30206d7be46b9"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id240" title="Permalink to this definition">¶</a></dt>
<dd><p>Log statistics of the event amplitudes after calibration. </p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

<dl class="py function">
<dt id="id241">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration_1a2d51abb2ab9fc941978f0fdf34a67c14"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id241" title="Permalink to this definition">¶</a></dt>
<dd><p>Preconfigure synapse drivers to send excitatory/inhibitory signals to all connected synapses. </p>
<p>Measure current amplitudes and use the median as target for calibration, which can be overwritten by providing a target to the <a class="reference internal" href="#namespacecalix_1_1common_1_1base_1abbc6a85b6bf3e20ed62493a3220ee83e"><span class="std std-ref">run()</span></a> method. If an amplitude higher than the reliable range is obtained, the parameter self.n_events is reduced and it is measured again.</p>
<p>:param connection: Connection to the chip to run on.</p>
<p>:raises CalibrationNotSuccessful: If obtained target amplitudes are still too high after reducing self.n_events. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="n_events">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration_1a813a45a4d933715d11ec70eb1a0b97b9"></span><code class="sig-name descname"><span class="pre">n_events</span></code><a class="headerlink" href="#n_events" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="syn_ref_calib">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration_1a707d1d5a0115edab38a77fce5c5039cd"></span><code class="sig-name descname"><span class="pre">syn_ref_calib</span></code><a class="headerlink" href="#syn_ref_calib" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id236">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration_1a49e5c4dd93fb72560675facdff5c82ae"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id236" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-functions">Private Functions</p>
<dl class="py function">
<dt id="id242">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration_1a549fc5c02ddb4dbae2341476988464a0"></span><code class="sig-name descname"><span class="pre">_bias_current_coord</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id242" title="Permalink to this definition">¶</a></dt>
<dd><p>Coordinate of the capmem bias current cells for the synaptic input OTA to calibrate. </p>
</dd></dl>

<dl class="py function">
<dt id="id243">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration_1a99416bed5e05a69fd34e2ac3bb123f92"></span><code class="sig-name descname"><span class="pre">_expected_sign</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id243" title="Permalink to this definition">¶</a></dt>
<dd><p>Expected sign of the amplitudes. </p>
<p>The measured amplitudes get multiplied with this sign. </p>
</dd></dl>

<dl class="py function">
<dt id="id244">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration_1a9ed07d2c6fa31d151a85d2150588531d"></span><code class="sig-name descname"><span class="pre">_log_abbreviation</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id244" title="Permalink to this definition">¶</a></dt>
<dd><p>Abbreviation of exc/inh synaptic input used for log messages. </p>
</dd></dl>

<dl class="py function">
<dt id="id245">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration_1a25fb4fe9d87c5a31e94a990185be4faf"></span><code class="sig-name descname"><span class="pre">_reference_calib_type</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id245" title="Permalink to this definition">¶</a></dt>
<dd><p>Type of the sub-calibration to use for recalibrating the synaptic input reference potentials. </p>
</dd></dl>

<dl class="py function">
<dt id="id246">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_bias_calibration_1a61aba6a0bb1a5d3b67f5d562cb8611f7"></span><code class="sig-name descname"><span class="pre">_row_mode</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id246" title="Permalink to this definition">¶</a></dt>
<dd><p>Row mode (excitatory / inhibitory) of synapses to enable. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.spiking.neuron_calib_parts.SyninParameters">
<span class="target" id="classcalix_1_1spiking_1_1neuron__calib__parts_1_1_synin_parameters"></span><em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">calix.spiking.neuron_calib_parts.</span></code><code class="sig-name descname"><span class="pre">SyninParameters</span></code><a class="headerlink" href="#calix.spiking.neuron_calib_parts.SyninParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Collection of parameters for synaptic input calibration. </p>
<p>Contains decisions that are set automatically based on the shape of targets for the calibration:</p>
<p>:ivar i_synin_gm: Target bias currents for synaptic input OTAs, with shapes modified to match the needs of the calibration routines. :ivar calibrate_synin: Decide whether synaptic input OTA strengths are calibrated. :ivar equalize_synin: Decide whether excitatory and inhibitory synaptic input strengths are equalized. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="calix.spiking.neuron_calib_parts.SyninParameters.__init__">
<span class="target" id="classcalix_1_1spiking_1_1neuron__calib__parts_1_1_synin_parameters_1a01d7810b6a53ec225e3d5ad76e455be8"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">neuron.NeuronCalibTarget</span> <span class="pre">target</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.neuron_calib_parts.SyninParameters.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>:param target: Target parameters for neuron calib. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="calix.spiking.neuron_calib_parts.SyninParameters.calibrate_synin">
<span class="target" id="classcalix_1_1spiking_1_1neuron__calib__parts_1_1_synin_parameters_1a5d1f855f1987c1d518b81bf7a9526d39"></span><code class="sig-name descname"><span class="pre">calibrate_synin</span></code><a class="headerlink" href="#calix.spiking.neuron_calib_parts.SyninParameters.calibrate_synin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.spiking.neuron_calib_parts.SyninParameters.equalize_synin">
<span class="target" id="classcalix_1_1spiking_1_1neuron__calib__parts_1_1_synin_parameters_1a9571b14ff866b2df33578ab630ac4147"></span><code class="sig-name descname"><span class="pre">equalize_synin</span></code><a class="headerlink" href="#calix.spiking.neuron_calib_parts.SyninParameters.equalize_synin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.spiking.neuron_calib_parts.SyninParameters.i_synin_gm">
<span class="target" id="classcalix_1_1spiking_1_1neuron__calib__parts_1_1_synin_parameters_1a51d40f4df422cc3a373cfd996ce00dbe"></span><code class="sig-name descname"><span class="pre">i_synin_gm</span></code><a class="headerlink" href="#calix.spiking.neuron_calib_parts.SyninParameters.i_synin_gm" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_synin.SynReferenceCalibMADC</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">madc_base.Calibration</span></code></dt>
<dd><p>Calibrate synaptic input reference potentials using the MADC. </p>
<p>This calibration requires the leak bias currents to be zero, which is set in the prelude. The leak bias currents are NOT restored, since the target use case is PPU-based hagen mode integration with leakage disabled.</p>
<p>As for all calibrations based on the MADC calibration, neuron configurations and readout configuration are changed during calibration and restored afterwards.</p>
<p>To measure the current output of the synaptic input OTA, the membrane potential is observed while floating (with the leak term disabled). Initially, the membrane is reset. Once the refractory period ends and the reset is released, we fit to the membrane potential: If a constant current flows onto the membrane, it increases or decreases linearly. We search the reference potential settings for minimum constant currents, i.e. such that the membrane potential stays constant after the reset is released.</p>
<p>Requirements:<ul class="simple">
<li><p>The synaptic input is enabled and configured with the desired bias currents (i_bias_synin_{exc,inh}_gm).</p></li>
<li><p>The refractory time has to be set as <code class="docutils literal notranslate"><span class="pre">expected_refractory_time</span></code>. We use this parameter to select the start time of the fit.</p></li>
</ul>
</p>
<p>:ivar n_runs: Take the average of multiple measurements in each step of the calibration. Defaults to 1 (no averaging). :ivar expected_refractory_time: Configured refractory time. Used to determine the start point of the linear fit, which should begin once the reset is released and the membrane potential starts drifting. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_reference_calib_m_a_d_c"><span class="std std-ref">calix.hagen.neuron_synin.ExcSynReferenceCalibMADC</span></a>, <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_reference_calib_m_a_d_c"><span class="std std-ref">calix.hagen.neuron_synin.InhSynReferenceCalibMADC</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id250">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c_1afb049a993b309e9bda730e2bfaba65f9"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id250" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id251">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c_1ae59fe7cf24c5c92a19a2fe1844435537"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id251" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures the given array of synaptic input reference potentials. </p>
<p>:param builder: Builder to append configuration instructions to. :param parameters: Array of reference potentials to set up.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id252">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c_1a2058384839de653dedd53b022c182473"></span><code class="sig-name descname"><span class="pre">evaluate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">List[np.ndarray]</span> <span class="pre">samples</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id252" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the obtained MADC samples. </p>
<p>To each neuron’s MADC samples, a linear function is fitted, and the slope is returned.</p>
<p>:param samples: MADC samples obtained for each neuron.</p>
<p>:return: Numpy array of fitted slopes. </p>
</dd></dl>

<dl class="py function">
<dt id="id253">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c_1af286a93a504fb45c0434c9c6a287a04b"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id253" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes multiple measurements on chip, returns the mean result. </p>
<p>:param connection: Connection to the chip to calibrate. :param builder: Builder to append measurement program to.</p>
<p>:return: Numpy array of mean results. </p>
</dd></dl>

<dl class="py function">
<dt id="id254">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c_1ad4f328172c25a2f010395b515d951b6c"></span><code class="sig-name descname"><span class="pre">neuron_config_disabled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neuron_coord</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id254" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout disabled. </p>
<p>:return: Neuron config with readout disabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id255">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c_1af1ca9d1bd96bf979f30e4554e31eabfd"></span><code class="sig-name descname"><span class="pre">neuron_config_readout</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neuron_coord</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id255" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout enabled. </p>
<p>:return: Neuron config with readout enabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id256">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c_1ad63ceb05fa15e08dcc2fd5b889fe4891"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id256" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares chip for calibration. </p>
<p>Enables the MADC and sets the leak bias currents to zero.</p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

<dl class="py function">
<dt id="id257">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c_1a9cc0142bdfa014afa33ebbe294cff026"></span><code class="sig-name descname"><span class="pre">stimulate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em>, <em class="sig-param"><span class="pre">hal.Timer.Value</span> <span class="pre">stimulation_time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id257" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the neuron’s membrane potential. </p>
<p>:param builder: Builder to append resets to. :param neuron_coord: Coordinate of neuron which is currently recorded. :param stimulation_time: Timer value at beginning of stimulation.</p>
<p>:return: Builder with reset appended. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="expected_refractory_time">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c_1a9ef1d79174b7d9388d341626b69299e6"></span><code class="sig-name descname"><span class="pre">expected_refractory_time</span></code><a class="headerlink" href="#expected_refractory_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="n_runs">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c_1a3d3fef662a05b76ea7140f7e37173ddb"></span><code class="sig-name descname"><span class="pre">n_runs</span></code><a class="headerlink" href="#n_runs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id247">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c_1af90a1abc555836e33f2f081689079c9b"></span><code class="sig-name descname"><span class="pre">sampling_time</span></code><a class="headerlink" href="#id247" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id248">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c_1a7bd4416dd0ced5457392c53dd3e2ea64"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id248" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id249">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c_1a98ca8061fb754073cd2ed2f545afea3f"></span><code class="sig-name descname"><span class="pre">wait_between_neurons</span></code><a class="headerlink" href="#id249" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-functions">Private Functions</p>
<dl class="py function">
<dt id="id258">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c_1a42c9868830300840417fe7db0544530f"></span><code class="sig-name descname"><span class="pre">_inverted</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id258" title="Permalink to this definition">¶</a></dt>
<dd><p>Select whether the parameter change needs to be inverted. </p>
</dd></dl>

<dl class="py function">
<dt id="id259">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calib_m_a_d_c_1a53c87539b57563892f461e9a829735ff"></span><code class="sig-name descname"><span class="pre">_reference_potential_coord</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id259" title="Permalink to this definition">¶</a></dt>
<dd><p>Coordinate of the CapMem reference potential for the synaptic input OTA. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calibration"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_synin.SynReferenceCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.Calibration</span></code></dt>
<dd><p>Calibrate synaptic reference voltage such that no currents are generated from the OTA without input. </p>
<p>Calibrate the neuron’s synaptic input reference voltage such that the membrane potential after enabling the OTA is the same as before. The membrane potential without enabled OTA has to be supplied as a target. This calibration routine sets reference voltages to the corresponding CapMem value to meet this calibration target.</p>
<p>If bias_currents are supplied during initialization, the synaptic input to be calibrated gets turned on using these bias currents.</p>
<p>Requirements:<ul class="simple">
<li><p>Neuron membrane readout is connected to the CADCs (causal and acausal).</p></li>
<li><p>The desired OTA bias currents are already set up and the synaptic input is enabled. Alternatively, the desired configuration can be supplied as <code class="docutils literal notranslate"><span class="pre">bias_currents</span></code>.</p></li>
</ul>
</p>
<p>:ivar bias_currents: Synaptic input bias currents to configure for the synaptic input to be calibrated. If None, the configuration is unchanged. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_reference_calibration"><span class="std std-ref">calix.hagen.neuron_synin.ExcSynReferenceCalibration</span></a>, <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_reference_calibration"><span class="std std-ref">calix.hagen.neuron_synin.InhSynReferenceCalibration</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id261">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calibration_1a3d3e00d2e651cf951b1ccbfdef9255f9"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Optional[Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">bias_currents=None</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">target=120</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id261" title="Permalink to this definition">¶</a></dt>
<dd><p>:param bias_currents: Synaptic input bias currents to configure for the synaptic input to be calibrated. </p>
<p>If None, the configuration is unchanged. :param target: Target CADC reads with synaptic input enabled. Optional, can also be supplied to the <a class="reference internal" href="#namespacecalix_1_1common_1_1base_1abbc6a85b6bf3e20ed62493a3220ee83e"><span class="std std-ref">run()</span></a> call. These reads need to be taken with the synaptic input disabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id262">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calibration_1a7fdda58a086fe1b8ae53eec3a5c6c35f"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id262" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the given parameters to the respective CapMem cell determined by whether the excitatory or inhibitory synaptic input is to be calibrated. </p>
<p>:param builder: Builder to append configuration to. :param parameters: Array of reference potential settings to configure.</p>
<p>:return: Builder with configuration instructions appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id263">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calibration_1aaa3904087c09990c9c437336653e8654"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id263" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure the membrane potentials of each neuron. </p>
<p>:param connection: Connection to chip to run measurement. :param builder: Builder to append read instructions to.</p>
<p>:return: Array with CADC reads of neuron membrane potentials. </p>
</dd></dl>

<dl class="py function">
<dt id="id264">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calibration_1addae6fd19e0b9f15d8663f6262375168"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id264" title="Permalink to this definition">¶</a></dt>
<dd><p>Print statistics of the resting potentials with synaptic input enabled and reference potential calibrated. </p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

<dl class="py function">
<dt id="id265">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calibration_1a9e942b5d71c612a1167f8acacdf02a9c"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id265" title="Permalink to this definition">¶</a></dt>
<dd><p>If desired, configure the synaptic input bias currents to the given values. </p>
<p>If no bias currents were given, the configuration is unchanged.</p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="bias_currents">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calibration_1ac8625d6edbf2a28558231f08eb3956ce"></span><code class="sig-name descname"><span class="pre">bias_currents</span></code><a class="headerlink" href="#bias_currents" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id260">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calibration_1ae8d9463990adea2884d49a949b884058"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id260" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-functions">Private Functions</p>
<dl class="py function">
<dt id="id266">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calibration_1a42a585e59daf07fc68ea36a49439a96b"></span><code class="sig-name descname"><span class="pre">_bias_current_keyword</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id266" title="Permalink to this definition">¶</a></dt>
<dd><p>String representation of the keyword required to preconfigure the synaptic inputs. </p>
</dd></dl>

<dl class="py function">
<dt id="id267">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calibration_1a9fbb1cd965e2354a1fad139fc25f0a6f"></span><code class="sig-name descname"><span class="pre">_capmem_parameter_coord</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id267" title="Permalink to this definition">¶</a></dt>
<dd><p>Coordinate of CapMem parameters for the synaptic input reference potential. </p>
</dd></dl>

<dl class="py function">
<dt id="id268">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calibration_1ab361f59905705603de698c9cf8ae389c"></span><code class="sig-name descname"><span class="pre">_inverted</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id268" title="Permalink to this definition">¶</a></dt>
<dd><p>Inversion property of the calibration, used to configure the base class. </p>
<p>For the excitatory input, we must not invert it, for the inhibitory input, we must invert it. </p>
</dd></dl>

<dl class="py function">
<dt id="id269">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_reference_calibration_1a029a4a91952f83ebad65bbf3a6d3cd66"></span><code class="sig-name descname"><span class="pre">_log_abbreviation</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id269" title="Permalink to this definition">¶</a></dt>
<dd><p>Abbreviation of exc/inh synaptic input used for log messages. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration"></span><code class="sig-name descname"><span class="pre">calix.hagen.neuron_synin.SynTimeConstantCalibration</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">madc_base.Calibration</span></code></dt>
<dd><p>Calibrate synaptic input time constant using the MADC. </p>
<p>The sypantic input time constant is fitted to an MADC trace: after we send some stimuli to decrease the voltage on the synaptic input line, we fit to the exponential decay back to the baseline voltage.</p>
<p>During prelude, the MADC is enabled and the current readout section config is saved. During calibration, the readout config is changed continuously to calibrate one neuron’s synaptic input time constant after another.</p>
<p>Synaptic inputs need to be disabled during calibration, thus the synaptic input bias currents are written to zero in the prelude. Their state is not saved and restored as this calibration will normally run before they are calibrated, anyway.</p>
<p>Requirements:<ul class="simple">
<li><p>Synaptic events can reach the neurons, i.e. the synapse DAC bias is set and the <code class="docutils literal notranslate"><span class="pre">hal.ColumnCurrentSwitch</span></code>es allow currents from the synapses through.</p></li>
</ul>
</p>
<p>:ivar neuron_config_default: List of desired neuron configurations. Necessary to enable high resistance mode. </p>
<p>Subclassed by <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__synin_1_1_exc_syn_time_constant_calibration"><span class="std std-ref">calix.hagen.neuron_synin.ExcSynTimeConstantCalibration</span></a>, <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron__synin_1_1_inh_syn_time_constant_calibration"><span class="std std-ref">calix.hagen.neuron_synin.InhSynTimeConstantCalibration</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id274">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration_1af4a9dc30dea0c111a4cff9eefbd523e0"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">pq.quantity.Quantity</span> <span class="pre">target=1.2</span> <span class="pre">*pq.us</span></em>, <em class="sig-param"><span class="pre">Optional[List[hal.NeuronConfig]]</span> <span class="pre">neuron_configs=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id274" title="Permalink to this definition">¶</a></dt>
<dd><p>:param neuron_configs: List of neuron configurations. </p>
<p>If None, the hagen-mode default neuron config is used. :param target: Target synaptic input time constant. </p>
</dd></dl>

<dl class="py function">
<dt id="id275">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration_1a9c18f951cacf3b0d104ed9f289eb6339"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id275" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures the given array of synaptic input resistor bias currents. </p>
<p>:param builder: Builder to append configuration instructions to. :param parameters: Array of bias currents to set up.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id276">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration_1aafb56bd2879c24b85052236a1c86ba07"></span><code class="sig-name descname"><span class="pre">evaluate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">List[np.ndarray]</span> <span class="pre">samples</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id276" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the obtained MADC samples. </p>
<p>To each neuron’s MADC samples, an exponential decay is fitted, and the resulting time constant is returned.</p>
<p>:param samples: MADC samples obtained for each neuron.</p>
<p>:return: Numpy array of fitted synaptic input time constants in microseconds. </p>
</dd></dl>

<dl class="py function">
<dt id="id277">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration_1a7c1858d61c0e4449daf151f7b5d7de88"></span><code class="sig-name descname"><span class="pre">neuron_config_disabled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neuron_coord</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id277" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout disabled. </p>
<p>The synaptic input is also disabled, since the neurons’ readout multiplexer may leak if the membrane voltage rises above 1.2 V, impacting the syn. input measurement. Hence, the transmission gates between the OTAs and the membrane are disabled. Note that on Hicann-X v1, this does not suffice to disable the synaptic input, and also the OTA bias currents need to be set to zero, which is done during the prelude.</p>
<p>:return: Neuron config with readout disabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id278">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration_1ab5705a0978d53fb4815a07715570a4ab"></span><code class="sig-name descname"><span class="pre">neuron_config_readout</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neuron_coord</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id278" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout enabled. </p>
<p>:return: Neuron config with readout enabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id279">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration_1a6e8538bcdc0d31106ba8aa713110c393"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id279" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares chip for calibration. </p>
<p>Disables synaptic inputs. Configures synapse drivers to stimulate the necessary input.</p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

<dl class="py function">
<dt id="id280">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration_1a041862bec903bcf5098860ceb35b6c5f"></span><code class="sig-name descname"><span class="pre">stimulate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em>, <em class="sig-param"><span class="pre">hal.Timer.Value</span> <span class="pre">stimulation_time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id280" title="Permalink to this definition">¶</a></dt>
<dd><p>Send some PADI events to the synaptic input in order to drop the potential. </p>
<p>:param builder: Builder to append PADI events to. :param neuron_coord: Coordinate of neuron which is currently recorded. :param stimulation_time: Timer value at beginning of stimulation.</p>
<p>:return: Builder with PADI events appended. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="neuron_config_default">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration_1a700fd8be3a19f6acfb4213225947ff28"></span><code class="sig-name descname"><span class="pre">neuron_config_default</span></code><a class="headerlink" href="#neuron_config_default" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id271">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration_1a0ba3b3a1a1274e508dae5b4253479e44"></span><code class="sig-name descname"><span class="pre">sampling_time</span></code><a class="headerlink" href="#id271" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id272">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration_1a334b1fbb77ba59ab83993b818c36826a"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id272" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id273">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration_1af1a49bd901402bfe6c29b3b609a11e13"></span><code class="sig-name descname"><span class="pre">wait_between_neurons</span></code><a class="headerlink" href="#id273" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-functions">Private Functions</p>
<dl class="py function">
<dt id="id281">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration_1afab76d6b485d30601f5cc5ec1507c187"></span><code class="sig-name descname"><span class="pre">_bias_current_coord</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id281" title="Permalink to this definition">¶</a></dt>
<dd><p>Coordinate of the CapMem bias current for the synaptic input resistor controlling the time constant. </p>
</dd></dl>

<dl class="py function">
<dt id="id282">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration_1a659dad0b97c88c2e10a73766c818bb30"></span><code class="sig-name descname"><span class="pre">_readout_source</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id282" title="Permalink to this definition">¶</a></dt>
<dd><p>Readout source to select in neuron readout multiplexer. </p>
</dd></dl>

<dl class="py function">
<dt id="id283">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration_1a0e51a3c74eba3d8fd4b79896e20ed58c"></span><code class="sig-name descname"><span class="pre">_row_mode</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id283" title="Permalink to this definition">¶</a></dt>
<dd><p>Row mode (excitatory / inhibitory) of synapses to enable. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-members">Private Members</p>
<dl class="py attribute">
<dt id="id270">
<span class="target" id="classcalix_1_1hagen_1_1neuron__synin_1_1_syn_time_constant_calibration_1aa1d905f3e912508fa4d5840e2f9442cf"></span><code class="sig-name descname"><span class="pre">_wait_before_stimulation</span></code><a class="headerlink" href="#id270" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_c_a_d_c"></span><code class="sig-name descname"><span class="pre">calix.spiking.neuron_threshold.ThresholdCalibCADC</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">base.Calibration</span></code></dt>
<dd><p>Calibrate the neurons’ spike threshold potential using the CADC. </p>
<p>An offset current is injected onto the membranes, which results in regular spiking. The CADC samples all neurons at its maximum sample rate. The maximum read for each neuron is treated as the threshold potential, as it should be just below the threshold.</p>
<p>We use a high number of CADC samples to ensure we catch the neurons at a potential close to the threshold, even with the slow sampling rate of the CADC. As long as the sample rate and inter-spike-interval is not perfectly aligned, the low sample rate should not be an issue, and ultimately electrical noise should ensure the two will never stay perfectly synchronous.</p>
<p>Requirements:<ul class="simple">
<li><p>Neuron membrane readout is connected to the CADCs (causal and acausal).</p></li>
</ul>
</p>
<p>:ivar original_neuron_configs: List of neuron configs from before the calibration, used to restore them in the postlude. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id286">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_c_a_d_c_1a689ea5d2658dd0f51f40958c9e3f712d"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">target=125</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id286" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id287">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_c_a_d_c_1a0408b4c5c19c860d95fa9c9d2ca52894"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id287" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the given array of threshold voltages. </p>
<p>:param builder: Builder to append configuration instructions to. :param parameters: Array of threshold voltages to set up.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id288">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_c_a_d_c_1a192dbc9e7d0e78446576d628598341ad"></span><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id288" title="Permalink to this definition">¶</a></dt>
<dd><p>Samples the membrane repeatedly and returns the maximum obtained value as the voltage measurement closest to the threshold. </p>
<p>:param connection: Connection to the chip. :param builder: Builder to append measurement to.</p>
<p>:return: Array of near-threshold CADC reads. </p>
</dd></dl>

<dl class="py function">
<dt id="id289">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_c_a_d_c_1afc9ccbf9158c2c2846c1a869de46b941"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id289" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable offset current CapMem cell again and restore original neuron configs. </p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

<dl class="py function">
<dt id="id290">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_c_a_d_c_1a6a28f95b28e22b8a9234a9a4b6cea8dd"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id290" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares chip for calibration, reads original neuron config in order to restore it after calibration. </p>
<p>Disable leak, set a low reset voltage and the offset current. Note that only the amplitude of the current is set but it is not enabled.</p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="id284">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_c_a_d_c_1a0e953f86d6deb53996ba09fa1236f8ab"></span><code class="sig-name descname"><span class="pre">original_neuron_configs</span></code><a class="headerlink" href="#id284" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id285">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_c_a_d_c_1acb81b84e50a932a50934501b851b0d86"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id285" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_m_a_d_c"></span><code class="sig-name descname"><span class="pre">calix.spiking.neuron_threshold.ThresholdCalibMADC</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">madc_base.Calibration</span></code></dt>
<dd><p>Calibrate the neurons’ spike threshold potential using the MADC. </p>
<p>A constant current is injected onto the membrane, with the leak disabled and the reset potential set low. This means we observe regular spikes. The maximum recorded voltage at the MADC is just below the threshold potential, we use it as threshold measurement.</p>
<p>Requirements:<ul class="simple">
<li><p>None -</p></li>
</ul>
</p>
<p>:ivar neuron_configs: List of neuron configs that will be used as basis for the <code class="docutils literal notranslate"><span class="pre">neuron_config_disabled</span></code> and <code class="docutils literal notranslate"><span class="pre">neuron_config_readout</span></code> functions. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="py function">
<dt id="id296">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_m_a_d_c_1ae66f9523f94e76425a52763b22dee34f"></span><code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">target=125</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id296" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="id297">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_m_a_d_c_1a89def5b1d8766e27cfb8202872d57639"></span><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id297" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the given array of threshold voltages. </p>
<p>:param builder: Builder to append configuration instructions to. :param parameters: Array of threshold voltages to set up.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="id298">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_m_a_d_c_1a5f9022cd0c77b0ea98c81249213b17c1"></span><code class="sig-name descname"><span class="pre">evaluate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">List[np.ndarray]</span> <span class="pre">samples</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id298" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the obtained MADC samples. </p>
<p>For each neuron’s MADC samples the maximum is determined which is assumed to be near the threshold voltage.</p>
<p>:param samples: MADC samples obtained for each neuron.</p>
<p>:return: Numpy array of measured threshold voltages. </p>
</dd></dl>

<dl class="py function">
<dt id="id299">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_m_a_d_c_1a3159d97a01a19190dd778a7b273d5f1b"></span><code class="sig-name descname"><span class="pre">neuron_config_disabled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id299" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout disabled. </p>
<p>The synaptic input and the offset current are disabled as well.</p>
<p>:param neuron_coord: Coordinate of neuron to get config for.</p>
<p>:return: Neuron config with readout disabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id300">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_m_a_d_c_1ac47efaa2f841d581db9d2dab7fcbcf25"></span><code class="sig-name descname"><span class="pre">neuron_config_readout</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id300" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron config with readout enabled. </p>
<p>Also, the offset current and threshold comparator are enabled for regular spiking.</p>
<p>:param neuron_coord: Coordinate of neuron to get config for.</p>
<p>:return: Neuron config with readout enabled. </p>
</dd></dl>

<dl class="py function">
<dt id="id301">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_m_a_d_c_1a23f966407a515ba7cf5357fedb254832"></span><code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id301" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable offset current CapMem cell again. </p>
<p>:param connection: Connection to the chip to run on. </p>
</dd></dl>

<dl class="py function">
<dt id="id302">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_m_a_d_c_1ab3c4f42cdb1f4061753c62d8b2a3cc44"></span><code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id302" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares chip for calibration. </p>
<p>Disable leak, set a low reset voltage and the offset current. Note that only the amplitude of the current is set but it is not enabled.</p>
<p>:param connection: Connection to the chip to calibrate. </p>
</dd></dl>

<dl class="py function">
<dt id="id303">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_m_a_d_c_1aa13b97e4c9a46e40e9fc275b0318ddd9"></span><code class="sig-name descname"><span class="pre">stimulate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">self</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">halco.NeuronConfigOnDLS</span> <span class="pre">neuron_coord</span></em>, <em class="sig-param"><span class="pre">hal.Timer.Value</span> <span class="pre">stimulation_time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id303" title="Permalink to this definition">¶</a></dt>
<dd><p>Empty function. </p>
<p>The offset current is enabled already in the <code class="docutils literal notranslate"><span class="pre">neuron_config_readout</span></code>, therefore no stimuli are neccesary.</p>
<p>:param builder: Builder to append neuron resets to. :param neuron_coord: Coordinate of neuron which is currently recorded. :param stimulation_time: Timer value at beginning of stimulation.</p>
<p>:return: Builder with neuron resets appended. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="py attribute">
<dt id="id291">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_m_a_d_c_1a2ce737e6d367c9745a8f568183897a7b"></span><code class="sig-name descname"><span class="pre">neuron_configs</span></code><a class="headerlink" href="#id291" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id292">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_m_a_d_c_1a91eda20c0d1dc5e0786adb2ad0214718"></span><code class="sig-name descname"><span class="pre">sampling_time</span></code><a class="headerlink" href="#id292" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id293">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_m_a_d_c_1a45d77a4cc7b98fecc03cf23baeea9b39"></span><code class="sig-name descname"><span class="pre">target</span></code><a class="headerlink" href="#id293" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id294">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_m_a_d_c_1ad72449a84ebb45e4448a544a37448625"></span><code class="sig-name descname"><span class="pre">wait_between_neurons</span></code><a class="headerlink" href="#id294" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-members">Private Members</p>
<dl class="py attribute">
<dt id="id295">
<span class="target" id="classcalix_1_1spiking_1_1neuron__threshold_1_1_threshold_calib_m_a_d_c_1aae0b825f1c38c26204e56c4935852fbe"></span><code class="sig-name descname"><span class="pre">_wait_before_stimulation</span></code><a class="headerlink" href="#id295" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt>
<span class="target" id="classcalix_1_1common_1_1exceptions_1_1_too_few_samples_error"></span><code class="sig-name descname"><span class="pre">calix.common.exceptions.TooFewSamplesError</span> <span class="pre">:</span> <span class="pre">public</span> <span class="pre">calix.common.exceptions.CalibrationError</span></code></dt>
<dd><p>The number of received MADC samples is significantly lower than expected. </p>
<p>This is likely an FPGA-related problem. A longer wait between neurons can help to mitigate the issue. </p>
</dd></dl>

<dl class="cpp type">
<dt id="_CPPv44base">
<span id="_CPPv34base"></span><span id="_CPPv24base"></span><span id="base"></span><span class="target" id="namespacebase"></span><em class="property"><span class="pre">namespace</span> </em><code class="sig-name descname"><span class="pre">base</span></code><a class="headerlink" href="#_CPPv44base" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp type">
<dt id="_CPPv44cadc">
<span id="_CPPv34cadc"></span><span id="_CPPv24cadc"></span><span id="cadc"></span><span class="target" id="namespacecadc"></span><em class="property"><span class="pre">namespace</span> </em><code class="sig-name descname"><span class="pre">cadc</span></code><a class="headerlink" href="#_CPPv44cadc" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="calix">
<span class="target" id="namespacecalix"></span><em class="property"><span class="pre">module</span> </em><code class="sig-name descname"><span class="pre">calix</span></code><a class="headerlink" href="#calix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="calix.common">
<span class="target" id="namespacecalix_1_1common"></span><em class="property"><span class="pre">module</span> </em><code class="sig-name descname"><span class="pre">common</span></code><a class="headerlink" href="#calix.common" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="calix.common.algorithms">
<span class="target" id="namespacecalix_1_1common_1_1algorithms"></span><em class="property"><span class="pre">module</span> </em><code class="sig-name descname"><span class="pre">algorithms</span></code><a class="headerlink" href="#calix.common.algorithms" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides algorithms for running calibrations. </p>
<p>Those algorithms need a Calibration instance which, among other settings, yields instructions for configuring parameters and measuring results. </p>
</dd></dl>

<dl class="py class">
<dt id="calix.common.base">
<span class="target" id="namespacecalix_1_1common_1_1base"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.common.</span></code><code class="sig-name descname"><span class="pre">base</span></code><a class="headerlink" href="#calix.common.base" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides abstract base classes for calibrations and algorithms. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix.common.base.run">
<span class="target" id="namespacecalix_1_1common_1_1base_1abbc6a85b6bf3e20ed62493a3220ee83e"></span><code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.base.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps the stadls run function. </p>
<p>Includes a barrier, blocking for the omnibus being idle, before the end of the program. The finished program is returned, such that, e.g., spikes are accessible.</p>
<p>:param connection: Connection to the chip to execute on. :param builder: Builder to execute.</p>
<p>:return: Program compiled by builder.done() that is executed. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-variables">Variables</p>
<dl class="py attribute">
<dt id="calix.common.base.ParameterRange">
<span class="target" id="namespacecalix_1_1common_1_1base_1ae79f25f0e51af86b093c7611ca6ed169"></span><code class="sig-name descname"><span class="pre">ParameterRange</span></code><em class="property"> <span class="pre">=</span> <span class="pre">namedtuple(&quot;ParameterRange&quot;,</span> <span class="pre">[&quot;lower&quot;,</span> <span class="pre">&quot;upper&quot;])</span></em><a class="headerlink" href="#calix.common.base.ParameterRange" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.common.boundary_check">
<span class="target" id="namespacecalix_1_1common_1_1boundary__check"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.common.</span></code><code class="sig-name descname"><span class="pre">boundary_check</span></code><a class="headerlink" href="#calix.common.boundary_check" title="Permalink to this definition">¶</a></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix.common.boundary_check.check_range_boundaries">
<span class="target" id="namespacecalix_1_1common_1_1boundary__check_1a6405ed32e1c731c9c5f97a78ea78cad4"></span><code class="sig-name descname"><span class="pre">check_range_boundaries</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">parameters</span></em>, <em class="sig-param"><span class="pre">ParameterRange</span> <span class="pre">boundaries</span></em>, <em class="sig-param"><span class="pre">Optional[List[str]]</span> <span class="pre">errors=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.boundary_check.check_range_boundaries" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if parameters are in a given range and sets them to the limits if they exceed the range. </p>
<p>If error messages are given, returns those if a parameter has reached the limits or has gone beyond.</p>
<p>:param parameters: Array of parameters to check. :param boundaries: Parameter range to be checked for. :param errors: List of error messages to print when parameter exceeds respective boundaries, in format [err_lower, err_upper]. Message needs to include placeholer ‘{0}’ where indices of the violating parameters are inserted.</p>
<p>:return: <a class="reference internal" href="#classcalix_1_1common_1_1boundary__check_1_1_boundary_check_result"><span class="std std-ref">BoundaryCheckResult</span></a>, containing parameters within boundaries, error mask and optional error messages. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.common.cadc">
<span class="target" id="namespacecalix_1_1common_1_1cadc"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.common.</span></code><code class="sig-name descname"><span class="pre">cadc</span></code><a class="headerlink" href="#calix.common.cadc" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrates all CADC channels on Hicann-X for a given dynamic range. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix.common.cadc.calibrate">
<span class="target" id="namespacecalix_1_1common_1_1cadc_1a57ab946001bb84ed52a398c1da7be095"></span><code class="sig-name descname"><span class="pre">calibrate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">Optional[CADCCalibTarget]</span> <span class="pre">target=None</span></em>, <em class="sig-param"><span class="pre">Optional[CADCCalibOptions]</span> <span class="pre">options=None</span></em>, <em class="sig-param"><span class="pre">*Optional[base.ParameterRange]</span> <span class="pre">dynamic_range=None</span></em>, <em class="sig-param"><span class="pre">Optional[base.ParameterRange]</span> <span class="pre">read_range=None</span></em>, <em class="sig-param"><span class="pre">Optional[bool]</span> <span class="pre">calibrate_offsets=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.cadc.calibrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrates all the CADCs (top, bottom, causal, acausal) to work in a given dynamic range (given as CapMem LSB voltage settings). </p>
<p>After calling this function, the CADC is left in a calibrated state, ready for usage.</p>
<p>Part 1 sets the reset voltage of the CADC ramp depending on the given minimum of the dynamic range for readout. The reset voltage is set slightly below this desired readout, such that the CADC reads read_range.lower (default: 20) there (to avoid clipping of channels that get high offsets later).</p>
<p>Part 2 sets the ramp current (steepness) depending on the given maximum of the dynamic range for readout. The current is set such that the ramp crosses the upper end of the dynamic readout range when the counter reads read_range.upper (default: 220). This is partly to avoid the last part of the dynamic range as the ramp will become less linear, and again to avoid clipping of channels with higher offsets.</p>
<p>Part 3 applies a constant calibration voltage to all CADC channels, chosen in the middle of the dynamic range, and requires all channels to read the same result. The digital offsets are set to compensate the observed differences in reads.</p>
<p>:param connection: Connection to a chip that this calibration will run on. :param target: Target parameters for calibration, given as an instance of <a class="reference internal" href="#classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_target"><span class="std std-ref">CADCCalibTarget</span></a>. Refer there for the individual parameters. :param options: Further options for calibration, given as an instance of <a class="reference internal" href="#classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_options"><span class="std std-ref">CADCCalibOptions</span></a>. Refer there for the individual parameters.</p>
<p>:returns: <a class="reference internal" href="#classcalix_1_1common_1_1cadc_1_1_c_a_d_c_calib_result"><span class="std std-ref">CADCCalibResult</span></a>, containing the settings for the CADC ramps of each quadrant and the digital offsets and calibration success of each channel. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.common.cadc_evaluation">
<span class="target" id="namespacecalix_1_1common_1_1cadc__evaluation"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.common.</span></code><code class="sig-name descname"><span class="pre">cadc_evaluation</span></code><a class="headerlink" href="#calix.common.cadc_evaluation" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides functions which are helpful when evaluating the success of a CADC calibration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix.common.cadc_evaluation.check_calibration_success">
<span class="target" id="namespacecalix_1_1common_1_1cadc__evaluation_1ad1c4f5de608820af3003bdccd5e9e912"></span><code class="sig-name descname"><span class="pre">check_calibration_success</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">read_data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.cadc_evaluation.check_calibration_success" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare the given uncalibrated reads to a new read that is done with the supplied builder/connection. </p>
<p>Logs a warning if the deviation of reads after calibration is still high.</p>
<p>:param connection: Connection to the chip to run on. :param builder: Builder to append read instructions to. :param read_data: Array of reads before calibration. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.common.cadc_evaluation.compare_results">
<span class="target" id="namespacecalix_1_1common_1_1cadc__evaluation_1aa53660f71a7d7a0530967833f0989aff"></span><code class="sig-name descname"><span class="pre">compare_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">uncalibrated_data</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">calibrated_data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.cadc_evaluation.compare_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare results with calibrated offset and uncalibrated reads. </p>
<p>Logs the mean and standard deviation of CADC reads before and after calibration.</p>
<p>:param uncalibrated_data: Array of CADC samples that will be used as data before calibration. :param calibrated_data: Array of CADC samples after calibration. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.common.cadc_helpers">
<span class="target" id="namespacecalix_1_1common_1_1cadc__helpers"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.common.</span></code><code class="sig-name descname"><span class="pre">cadc_helpers</span></code><a class="headerlink" href="#calix.common.cadc_helpers" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides functions for reading the CADCs and configuring for calibration purposes. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix.common.cadc_helpers.cadc_read_row">
<span class="target" id="namespacecalix_1_1common_1_1cadc__helpers_1ad6d6d314b65915ba343b19c1a56b0b72"></span><code class="sig-name descname"><span class="pre">cadc_read_row</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">halco.SynramOnDLS</span> <span class="pre">synram</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.cadc_helpers.cadc_read_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Read one row of CADCs and return the read ticket. </p>
<p>:param builder: Builder to append the read instruction to. :param synram: Synram coordinate of row to read.</p>
<p>:return: Tuple containing:<ul class="simple">
<li><p>Builder with read instruction appended</p></li>
<li><p>CADC read ticket </p></li>
</ul>
</p>
</dd></dl>

<dl class="py function">
<dt id="calix.common.cadc_helpers.configure_chip">
<span class="target" id="namespacecalix_1_1common_1_1cadc__helpers_1a9430dec490ba7ccdb3ed5fae03679174"></span><code class="sig-name descname"><span class="pre">configure_chip</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.cadc_helpers.configure_chip" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures the chip from an arbitrary state to run CADC calibration. </p>
<p>Set relevant CapMem values of the CADC, connect debug lines to the CADC and set all CADCChannels to default (with zero offsets).</p>
<p>:param builder: Builder to append chip configuration commands to. :return: Builder with configuring commands appended. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.common.cadc_helpers.configure_readout_cadc_debug">
<span class="target" id="namespacecalix_1_1common_1_1cadc__helpers_1ae1b2868842daac1b443b9aa7bf577ac2"></span><code class="sig-name descname"><span class="pre">configure_readout_cadc_debug</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.cadc_helpers.configure_readout_cadc_debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the readout chain configuration in a way that allows reading the capmem debug cell output voltage at the CADC debug line. </p>
<p>Enables the capmem debug output on stp_v_charge_0.</p>
<p>:param builder: Builder to append the bit-configuration to. :return: Builder with configuration appended to. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.common.cadc_helpers.convert_success_masks">
<span class="target" id="namespacecalix_1_1common_1_1cadc__helpers_1ae235f80462655454c41a4fa8cbd14ddb"></span><code class="sig-name descname"><span class="pre">convert_success_masks</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">quadrant_mask</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.cadc_helpers.convert_success_masks" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a mask showing the calibration success of quadrants to a mask showing the success of each channel. </p>
<p>If a quadrant shows False, all channels on that quadrants are set to False.</p>
<p>:param quadrant_mask: Boolean array of length 4, i.e. matching the quadrants on chip.</p>
<p>:return: Boolean array of length 1024, i.e. matching all CADC channels. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.common.cadc_helpers.read_cadcs">
<span class="target" id="namespacecalix_1_1common_1_1cadc__helpers_1a7b5936ec815f3bad86b17338f28b240a"></span><code class="sig-name descname"><span class="pre">read_cadcs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.cadc_helpers.read_cadcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Read all CADC channels in order top causal, top acausal, bottom causal, bottom acausal. </p>
<p>Dump results into a numpy array.</p>
<p>The readout of the top row is triggered before the bottom row, such that there is a delay of some 100 us between the measurements.</p>
<p>:param connection: Connection to a chip to read CADC channels from. :param builder: Optional builder to be run before reading the CADCs. This allows reading fast after doing other operations.</p>
<p>:return: Array containing integer results for each channel. The order is top causal, top acausal, bottom causal, bottom acausal; within these blocks the channels are ordered from left to right. The order of returned results corresponds to the enums of halco.CADCChannelConfigOnDLS. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.common.cadc_helpers.reshape_cadc_quadrants">
<span class="target" id="namespacecalix_1_1common_1_1cadc__helpers_1a766c9b8d9f3c6a0736ad9c72ee14346d"></span><code class="sig-name descname"><span class="pre">reshape_cadc_quadrants</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">cadc_results</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.cadc_helpers.reshape_cadc_quadrants" title="Permalink to this definition">¶</a></dt>
<dd><p>Reshapes an array containing all CADC samples as obtained with the <a class="reference internal" href="#namespacecalix_1_1common_1_1cadc__helpers_1a7b5936ec815f3bad86b17338f28b240a"><span class="std std-ref">read_cadcs()</span></a> function (shape: (1024,)) into a two-dimensional array that holds the CADC results per quadrant (shape: (4, 256)). </p>
<p>:param cadc_results: Flat array of CADC results.</p>
<p>:return: Two-dimensional array of CADC results with the first index being the index of the Quadrant. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.common.exceptions">
<span class="target" id="namespacecalix_1_1common_1_1exceptions"></span><em class="property"><span class="pre">module</span> </em><code class="sig-name descname"><span class="pre">exceptions</span></code><a class="headerlink" href="#calix.common.exceptions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="calix.common.helpers">
<span class="target" id="namespacecalix_1_1common_1_1helpers"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.common.</span></code><code class="sig-name descname"><span class="pre">helpers</span></code><a class="headerlink" href="#calix.common.helpers" title="Permalink to this definition">¶</a></dt>
<dd><p>Various helper functions that are more general and thus not contained in one of the named modules. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix.common.helpers.capmem_noise">
<span class="target" id="namespacecalix_1_1common_1_1helpers_1ade1a57018f157271dfb2742321854832"></span><code class="sig-name descname"><span class="pre">capmem_noise</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">int</span> <span class="pre">start=-5</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">end=6</span></em>, <em class="sig-param"><span class="pre">Optional[Union[int</span></em>, <em class="sig-param"><span class="pre">Tuple[int]]]</span> <span class="pre">size=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.helpers.capmem_noise" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates random integers between start and end-1. </p>
<p>Used mainly to vary CapMem settings in order to avoid setting many cells to the same value.</p>
<p>:param start: Lower end of the random range. :param end: One above the upper end of the random range. :param size: Number/shape of values to draw. If None, a single integer is returned.</p>
<p>:return: Array with integer noise, or single integer. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.common.helpers.capmem_set_neuron_cells">
<span class="target" id="namespacecalix_1_1common_1_1helpers_1a6aa5bedd123985618d2f92c9cb782f77"></span><code class="sig-name descname"><span class="pre">capmem_set_neuron_cells</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">Dict[halco.CapMemRowOnCapMemBlock</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">config</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.helpers.capmem_set_neuron_cells" title="Permalink to this definition">¶</a></dt>
<dd><p>Set single CapMem rows on the neurons to the desired values. </p>
<p>Expects parameters to be configured along with the desired row coordinates. The parameters can either be a numpy array of integer values, which are written to the neurons directly, or a single value, which is written only after adding some noise of +/- 5, if the range allows. Values of zero are not changed, turning something off is always possible.</p>
<p>:param builder: Builder to append configuration to. :param config: Dict which contains pairs of CapMemRowOnCapMemBlock coordinates and either a single CapMemCell value or an array of CapMemCell values. In case a single non-zero value is given, it is changed to an array with noise and this array is written to hardware. This aims to reduce the crosstalk between CapMem cells.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.common.helpers.capmem_set_quadrant_cells">
<span class="target" id="namespacecalix_1_1common_1_1helpers_1a09e8d9c53a8917a7af7ec260fc5ddacf"></span><code class="sig-name descname"><span class="pre">capmem_set_quadrant_cells</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">Dict[halco.CapMemCellOnCapMemBlock</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">config</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.helpers.capmem_set_quadrant_cells" title="Permalink to this definition">¶</a></dt>
<dd><p>Set multiple CapMem cells that are global per quadrant to the same provided values. </p>
<p>:param builder: Builder to append configuration to. :param config: Dict with the desired configuration.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.common.helpers.wait">
<span class="target" id="namespacecalix_1_1common_1_1helpers_1a011ed223a133415e416adfaef2071c48"></span><code class="sig-name descname"><span class="pre">wait</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">pq.quantity.Quantity</span> <span class="pre">waiting_time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.helpers.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Waits for a given amount of time. </p>
<p>This function appends instructions to the given builder which first reset the timer and then wait until the given time is reached.</p>
<p>:param builder: Builder to add wait instruction to. :param waiting_time: Time to wait for.</p>
<p>:return: Builder with wait instruction added to. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.common.helpers.wait_for_us">
<span class="target" id="namespacecalix_1_1common_1_1helpers_1ac65e9e35e5044e95c9f5b7ed7531aaca"></span><code class="sig-name descname"><span class="pre">wait_for_us</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">float</span> <span class="pre">waiting_time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.helpers.wait_for_us" title="Permalink to this definition">¶</a></dt>
<dd><p>Waits for a given amount of time in us. </p>
<p>This function appends instructions to the given builder which first reset the timer and then wait until the given time is reached.</p>
<p>:note: This function is deprecated. Use <code class="docutils literal notranslate"><a class="reference internal" href="#namespacecalix_1_1common_1_1helpers_1a011ed223a133415e416adfaef2071c48"><span class="std std-ref"><span class="pre">wait()</span></span></a></code> instead.</p>
<p>:param builder: Builder to add wait instruction to. :param waiting_time: Time in us to wait for.</p>
<p>:return: Builder with wait instruction added to. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.common.madc_base">
<span class="target" id="namespacecalix_1_1common_1_1madc__base"></span><em class="property"><span class="pre">module</span> </em><code class="sig-name descname"><span class="pre">madc_base</span></code><a class="headerlink" href="#calix.common.madc_base" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides an abstract base class for calibrations utilizing the MADC. </p>
</dd></dl>

<dl class="py class">
<dt id="calix.common.synapse">
<span class="target" id="namespacecalix_1_1common_1_1synapse"></span><em class="property"><span class="pre">module</span> </em><code class="sig-name descname"><span class="pre">synapse</span></code><a class="headerlink" href="#calix.common.synapse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="calix.constants">
<span class="target" id="namespacecalix_1_1constants"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.</span></code><code class="sig-name descname"><span class="pre">constants</span></code><a class="headerlink" href="#calix.constants" title="Permalink to this definition">¶</a></dt>
<dd><p>Global constants used for calibrations. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-variables">Variables</p>
<dl class="py attribute">
<dt id="calix.constants.cadc_reliable_range">
<span class="target" id="namespacecalix_1_1constants_1ac06cec99f2729511cdd16233247ca68b"></span><code class="sig-name descname"><span class="pre">cadc_reliable_range</span></code><em class="property"> <span class="pre">=</span> <span class="pre">base.ParameterRange(30,</span> <span class="pre">210)</span></em><a class="headerlink" href="#calix.constants.cadc_reliable_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.constants.capmem_level_off_time">
<span class="target" id="namespacecalix_1_1constants_1a45afa7c8476d6f2149add14666d1e179"></span><code class="sig-name descname"><span class="pre">capmem_level_off_time</span></code><em class="property"> <span class="pre">=</span> <span class="pre">20000</span> <span class="pre">*</span> <span class="pre">pq.us</span></em><a class="headerlink" href="#calix.constants.capmem_level_off_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.constants.tau_mem_range">
<span class="target" id="namespacecalix_1_1constants_1a09ba1b8f5e29faeec8a399e6a06a8abf"></span><code class="sig-name descname"><span class="pre">tau_mem_range</span></code><em class="property"> <span class="pre">=</span> <span class="pre">base.ParameterRange(0.1</span> <span class="pre">*</span> <span class="pre">pq.us,</span> <span class="pre">100</span> <span class="pre">*</span> <span class="pre">pq.us)</span></em><a class="headerlink" href="#calix.constants.tau_mem_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.constants.tau_syn_range">
<span class="target" id="namespacecalix_1_1constants_1a04e4b431ab6898bdc2ce10dd83492e8d"></span><code class="sig-name descname"><span class="pre">tau_syn_range</span></code><em class="property"> <span class="pre">=</span> <span class="pre">base.ParameterRange(0.1</span> <span class="pre">*</span> <span class="pre">pq.us,</span> <span class="pre">100</span> <span class="pre">*</span> <span class="pre">pq.us)</span></em><a class="headerlink" href="#calix.constants.tau_syn_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.hagen">
<span class="target" id="namespacecalix_1_1hagen"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.</span></code><code class="sig-name descname"><span class="pre">hagen</span></code><a class="headerlink" href="#calix.hagen" title="Permalink to this definition">¶</a></dt>
<dd><p>Module for calibrating the HICANN-X chips for usage in hagen mode, i.e. </p>
<p>for multiply-accumulate operation. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix.hagen.calibrate">
<span class="target" id="namespacecalix_1_1hagen_1a88ad0ba5d4bffbc6378fd7aa8c6ea6f5"></span><code class="sig-name descname"><span class="pre">calibrate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">Optional[HagenCalibrationTarget]</span> <span class="pre">target=None</span></em>, <em class="sig-param"><span class="pre">Optional[HagenCalibrationOptions]</span> <span class="pre">options=None</span></em>, <em class="sig-param"><span class="pre">*dict</span> <span class="pre">cadc_kwargs=None</span></em>, <em class="sig-param"><span class="pre">dict</span> <span class="pre">neuron_kwargs=None</span></em>, <em class="sig-param"><span class="pre">dict</span> <span class="pre">synapse_driver_kwargs=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.calibrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a full calibration for hagen mode: Calibrate CADCs to a suitable dynamic range. </p>
<p>Calibrate neurons, calibrate synapse drivers.</p>
<p>The chip has to be initialized first, which can be done using the stadls ExperimentInit().</p>
<p>The individual calibrations’ default parameters can be overwritten by providing the appropriate arguments.</p>
<p>:param connection: Connection to the chip to calibrate. :param target: Target parameters for calibration, given as an instance of <a class="reference internal" href="#classcalix_1_1hagen_1_1_hagen_calibration_target"><span class="std std-ref">HagenCalibrationTarget</span></a>. :param options: Further options for calibration, given as an instance of <a class="reference internal" href="#classcalix_1_1hagen_1_1_hagen_calibration_options"><span class="std std-ref">HagenCalibrationOptions</span></a>.</p>
<p>:return: <a class="reference internal" href="#classcalix_1_1hagen_1_1_hagen_calibration_result"><span class="std std-ref">HagenCalibrationResult</span></a>, containing cadc, neuron and synapse driver results. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.calibrate_for_synin_integration">
<span class="target" id="namespacecalix_1_1hagen_1a828408b76cf1c5f89ef9c7197848e302"></span><code class="sig-name descname"><span class="pre">calibrate_for_synin_integration</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">Optional[HagenSyninCalibrationTarget]</span> <span class="pre">target=None</span></em>, <em class="sig-param"><span class="pre">Optional[HagenSyninCalibrationOptions]</span> <span class="pre">options=None</span></em>, <em class="sig-param"><span class="pre">*dict</span> <span class="pre">cadc_kwargs=None</span></em>, <em class="sig-param"><span class="pre">dict</span> <span class="pre">synapse_driver_kwargs=None</span></em>, <em class="sig-param"><span class="pre">Optional[int]</span> <span class="pre">synapse_dac_bias=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.calibrate_for_synin_integration" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate the chip for integration on synaptic input lines. </p>
<p>Calibrate CADC, synapse drivers, and synapse DAC bias.</p>
<p>:param connection: Connection to the chip to calibrate. :param target: Calibration target parameters. :param options: Further options for calibration.</p>
<p>:return: Calibration result for integration on the synaptic input lines. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.hagen.multiplication">
<span class="target" id="namespacecalix_1_1hagen_1_1multiplication"></span><em class="property"><span class="pre">module</span> </em><code class="sig-name descname"><span class="pre">multiplication</span></code><a class="headerlink" href="#calix.hagen.multiplication" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a class which handles multiplication of vectors with matrices on the synaptic input line. </p>
</dd></dl>

<dl class="py class">
<dt id="calix.hagen.neuron">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.hagen.</span></code><code class="sig-name descname"><span class="pre">neuron</span></code><a class="headerlink" href="#calix.hagen.neuron" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate neurons for integrating synaptic inputs, as it is desired using the hagen mode. </p>
<p>Call the function calibrate(connection) to run the calibration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix.hagen.neuron.calibrate">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron_1af6a24b6c707b26e187f7277440ba84ab"></span><code class="sig-name descname"><span class="pre">calibrate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection,</span> <span class="pre">Optional[NeuronCalibTarget]</span> <span class="pre">target=None,</span> <span class="pre">Optional[NeuronCalibOptions]</span> <span class="pre">options=None,</span> <span class="pre">*Optional[Union[int,</span> <span class="pre">np.ndarray]]</span> <span class="pre">target_leak_read=None,</span> <span class="pre">Optional[pq.Quantity]</span> <span class="pre">tau_mem=None,</span> <span class="pre">Optional[pq.Quantity]</span> <span class="pre">tau_syn=None,</span> <span class="pre">Optional[int]</span> <span class="pre">i_synin_gm=None,</span> <span class="pre">Optional[float]</span> <span class="pre">target_noise=None,</span> <span class="pre">Optional[halco.AtomicNeuronOnDLS]</span> <span class="pre">readout_neuron=None,</span> <span class="pre">Optional[Callable[[hxcomm.ConnectionHandle],</span> <span class="pre">None]]</span> <span class="pre">initial_configuration=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron.calibrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up the neurons for integration. </p>
<p>This calibration aims to equalize the neurons’ leak and reset potentials as well as the synaptic input strength and time constants.</p>
<p>Initially, the leak bias currents are calibrated such that the membrane time constants are equal for all neurons. This has to be done before matching the synaptic input strengths, as a neuron with higher leakage would show smaller integrated amplitudes even if the current inputs were matched. For this calibration, the neurons are reset to a potential below the leak, and the rise of the voltage is captured using the CADCs. This allows to roughly match the membrane time constant to the given value.</p>
<p>The synaptic input OTA bias currents are calibrated such that they yield the same charge output to the membrane for each synaptic input. The synaptic input reference potentials are recalibrated in every run of the search for the bias currents, as the required voltage offset between the two inputs of the OTA changes with the bias current.</p>
<p>Afterwards, the leak OTA bias current is reduced while keeping the noise in CADC readouts after the integration near the target. Reducing the target noise results in higher leak bias currents and thus a lower membrane time constant, which means fast decay of the synaptic inputs. Increasing the target noise means the neuron does a better job at integrating the inputs, but at the cost of reproducibility of the results, since noise of the synaptic input is more amplified. Apart from the pure statistical noise, systematic offsets are considered in this part of the calibration. The leak potential was calibrated before adjusting the leak biases. If a neuron drifts away from the expected leak potential, the leak bias current will be increased as well.</p>
<p>The whole leak bias current readjustment can be disabled by setting the parameter target_noise to None.</p>
<p>After setting the leak bias currents low, the resting potential of the neurons is prone to floating away from the leak potential. Thus, the synaptic input reference potentials are recalibrated, which can compensate systematic effects like a constant leakage current onto the membrane. Eventually, leak and reset potentials are calibrated.</p>
<p>Requirements:<ul class="simple">
<li><p>The CADCs are enabled and calibrated. You can achieve this using the function <code class="docutils literal notranslate"><a class="reference internal" href="#namespacecalix_1_1common_1_1cadc_1a57ab946001bb84ed52a398c1da7be095"><span class="std std-ref"><span class="pre">calix.common.cadc.calibrate()</span></span></a></code>.</p></li>
</ul>
</p>
<p>:param connection: Connection to the chip to calibrate. :param target: Calibration target, given as an instance of <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_target"><span class="std std-ref">NeuronCalibTarget</span></a>. Refer there for the individual parameters. :param options: Further calibration options, given as an instance of <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_options"><span class="std std-ref">NeuronCalibOptions</span></a>. Refer there for the individual parameters.</p>
<p>:return: <a class="reference internal" href="#classcalix_1_1hagen_1_1neuron_1_1_neuron_calib_result"><span class="std std-ref">NeuronCalibResult</span></a>, containing all calibrated parameters.</p>
<p>:raises ValueError: If target parameters are not in a feasible range. :raises ValueError: If target parameters are not shaped as specified. :raises TypeError: If time constants are not given with a unit from the <code class="docutils literal notranslate"><span class="pre">quantities</span></code> package. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron.calibrate_baseline">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron_1a5652fbc99302c0fc53848d1fba1a909a"></span><code class="sig-name descname"><span class="pre">calibrate_baseline</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">target_read=128</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron.calibrate_baseline" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate the CADC channel offsets such that the neuron baseline, that is reading shortly after a reset without getting synaptic input, reads the given target value. </p>
<p>This calibration can only be called after the neuron calibration has finished, as it permanently overwrites the CADC offsets. Thus, the CADCs can no longer read constant voltages precisely.</p>
<p>This eases the calculation of amplitudes of inputs, as no extra baseline read is required.</p>
<p>:param connection: Connection to the chip to calibrate. :param target_read: Target CADC read of all neurons at baseline.</p>
<p>:return: CalibrationResult, containing:<ul class="simple">
<li><p>Calibrated CADC channel offsets.</p></li>
<li><p>Success mask of calibration - False for CADC channels that could not be matched to the target read. </p></li>
</ul>
</p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.hagen.neuron_evaluation">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__evaluation"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.hagen.</span></code><code class="sig-name descname"><span class="pre">neuron_evaluation</span></code><a class="headerlink" href="#calix.hagen.neuron_evaluation" title="Permalink to this definition">¶</a></dt>
<dd><p>Functions to print statistics of the neuron membrane potentials per quadrant. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix.hagen.neuron_evaluation.measure_quadrant_results">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__evaluation_1a5bb5e3fc8b9c5415470ea4d51d784826"></span><code class="sig-name descname"><span class="pre">measure_quadrant_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">success_mask=np.ones(halco.NeuronConfigOnDLS.size</span></em>, <em class="sig-param"><span class="pre">dtype=np.bool)</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_evaluation.measure_quadrant_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure the current membrane potentials (without any inputs) and log statistics by quadrant at DEBUG level. </p>
<p>:param connection: Connection to chip to run on. :param success_mask: Mask of successfully calibrated neurons. Neurons which have failed are excluded when calculating statistics. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.hagen.neuron_helpers">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.hagen.</span></code><code class="sig-name descname"><span class="pre">neuron_helpers</span></code><a class="headerlink" href="#calix.hagen.neuron_helpers" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides functions for reading neuron membrane potentials and configuring them for integration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix.hagen.neuron_helpers.cadc_read_neuron_potentials">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1a8294c629808fe01321208641d3f78f8f"></span><code class="sig-name descname"><span class="pre">cadc_read_neuron_potentials</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.cadc_read_neuron_potentials" title="Permalink to this definition">¶</a></dt>
<dd><p>Read from the CADCs and interpret the results as membrane potentials. </p>
<p>Use acausal and causal channels for reading neuron output voltages. We expect the neurons’ readout amplifiers to be enabled and connected to both acausal and causal channels. We return the mean of the two channels as a neuron membrane read.</p>
<p>When supplying a builder, it is used to read. Note that between reading top and bottom neurons, some 100 us pass, i.e. this function is not suitable for reading integrated amplitudes.</p>
<p>:param connection: Connection to chip to read membrane potentials. :param builder: Builder to append read instructions to before execution.</p>
<p>:return: Numpy array containing the results for all neurons. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.cadc_read_neurons_repetitive">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1ae3610d30b1b5141e52a15b1207dd57e0"></span><code class="sig-name descname"><span class="pre">cadc_read_neurons_repetitive</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">*halco.SynramOnDLS</span> <span class="pre">synram</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">n_reads=50</span></em>, <em class="sig-param"><span class="pre">pq.quantity.Quantity</span> <span class="pre">wait_time=1000</span> <span class="pre">*pq.us</span></em>, <em class="sig-param"><span class="pre">bool</span> <span class="pre">reset=False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.cadc_read_neurons_repetitive" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the potential from all neurons multiple times. </p>
<p>Reads all CADC channels multiple times and calculates the mean of acausal and causal reads as neuron voltage. Note that the CADCs have to be connected to the neurons for this to make sense. Returns a 2-dimensional array of the results.</p>
<p>:param connection: Connection to the chip to run on. :param builder: Builder to use for reads. Gets executed along the way. :param synram: Synram coordinate to read neuron potentials from. :param n_reads: Number of reads to execute for all channels. :param wait_time: Time to wait between two successive reads. :param reset: Select whether the neurons’ membranes are connected to the reset potential some 30 us before measuring.</p>
<p>:return: Array containing all obtained values. The first dimension is the number of reads, the second the number of neurons on synram. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.configure_chip">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1ac4114467612d149d5130cc95f9d2dea2"></span><code class="sig-name descname"><span class="pre">configure_chip</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">v_leak=700</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">n_synapse_rows=8</span></em>, <em class="sig-param"><span class="pre">Optional[halco.AtomicNeuronOnDLS]</span> <span class="pre">readout_neuron=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.configure_chip" title="Permalink to this definition">¶</a></dt>
<dd><p>Does all the necessary configurations on the chip to start calibrating the neurons for usage in hagen mode. </p>
<p>Configures neurons statically for integration, sets synapse connections, global synapse driver and PADI settings, CapMem and readout settings.</p>
<p>:param builder: Builder to append configuration to. :param v_leak: Leak potential CapMem setting to start calibrations with. :param n_synapse_rows: Number of synapse rows to enable. :param readout_neuron: Coordinate of the neuron to be connected to a readout pad, i.e. can be observed using an oscilloscope. or the MADC. The neuron is connected to the upper pad via readout mux 0, CADC ramp is connected to the lower pad via readout mux 1. If None, neither the CADC ramp nor the neuron is connected to the pads, the readout chain configuration is untouched.</p>
<p>:return: Tuple containing:<ul class="simple">
<li><p>Builder with configuration instructions appended.</p></li>
<li><p>Dict of configured neuron CapMem parameters. </p></li>
</ul>
</p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.configure_integration">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1a4f17737b05a11e685e7a9ac18d400dae"></span><code class="sig-name descname"><span class="pre">configure_integration</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.configure_integration" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies static configuration required for integrate-operation of the neurons in hagen mode. </p>
<p>Configures the chip such that the CADCs can read out neuron membranes. This means setting the switches to connect the columns to the CADC.</p>
<p>:param builder: Builder to append configuration instructions to.</p>
<p>:return: Builder with configuration. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.configure_readout_neurons">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1ad17d796162d5cc616211055fd0e164b9"></span><code class="sig-name descname"><span class="pre">configure_readout_neurons</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">halco.AtomicNeuronOnDLS</span> <span class="pre">readout_neuron</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.configure_readout_neurons" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the readout such that the membrane potential of one neuron and the CADC ramp is available at the pads. </p>
<p>When using an oscilloscope, you may set the trigger to the CADC ramp in order to observe CADC measurements. Note, however, that connecting a simple cable to the CADC ramp output will not suffice, a low-capacitance probe is required to read the ramp correctly.</p>
<p>:param builder: Builder to append configuration to. :param readout_neuron: Coordinate of the neuron to be connected to a readout pad, i.e. can be observed using an oscilloscope.</p>
<p>:return: Builder with configuration instructions. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.configure_stp_and_padi">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1aac84e9f5b75c58ff77606719536a0d9d"></span><code class="sig-name descname"><span class="pre">configure_stp_and_padi</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.configure_stp_and_padi" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure global STP config and PADI bus config to default. </p>
<p>:param builder: Builder to append instructions to.</p>
<p>:return: Builder with instructions appended. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.configure_synapses">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1afb394eda2bb2203d7623ceead6d7338a"></span><code class="sig-name descname"><span class="pre">configure_synapses</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">n_synapse_rows=8</span></em>, <em class="sig-param"><span class="pre">*hal.SynapseQuad.Label</span> <span class="pre">stimulation_address=hal.SynapseQuad.Label(0)</span></em>, <em class="sig-param"><span class="pre">hal.SynapseQuad.Weight</span> <span class="pre">weight=hal.SynapseQuad.Weight(10)</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.configure_synapses" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures the synapses such that events can be sent to the neurons. </p>
<p>The given number of synapse rows are enabled. This function does not configure synapse drivers, as they need to select excitatory/inhibitory row modes when events are sent.</p>
<p>:param builder: Builder to append configuration instructions to. :param n_synapse_rows: Number of rows in which the synapses are enabled. :param stimulation_address: Address to use for inputs. Disabled synapses get set to (stimulation_address + 1) % address_range. :param weight: Weight of enabled synapses.</p>
<p>:return: Builder with configuration. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.enable_all_synapse_drivers">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1aa8184dddd0d6f346b296f21f721063f5"></span><code class="sig-name descname"><span class="pre">enable_all_synapse_drivers</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">hal.SynapseDriverConfig.RowMode</span> <span class="pre">row_mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.enable_all_synapse_drivers" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure synapse drivers to drive both connected rows of synapses either excitatory or inhibitory. </p>
<p>All drivers listen to all row select addresses of PADI events.</p>
<p>:param builder: Builder to append configuration to. :param row_mode: Row mode (excitatory/inhibitory) to use for both rows.</p>
<p>:return: Builder with configuration appended. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.inspect_read_tickets">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1a5928987f20bc754faf63c9f7338fa544"></span><code class="sig-name descname"><span class="pre">inspect_read_tickets</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">Union[sta.ContainerTicket_CADCSampleRow</span></em>, <em class="sig-param"><span class="pre">List[sta.ContainerTicket_CADCSampleRow]]</span> <span class="pre">read_tickets</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.inspect_read_tickets" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate the given read tickets and return the contained results as an array. </p>
<p>The values are extracted from the tickets and for each column (and ticket) the average of the causal and acausal channel is calculated. Note that this only makes sense if both causal and acausal channels are connected to the same potential, here reading from the neurons.</p>
<p>:param read_tickets: List of read tickets to be evaluated, or single ticket.</p>
<p>:return: Array of CADC averaged reads. If a single ticket is provided, the array is one-dimensional, containing results for all reads in a row. If a list of tickets is provided, the array is two-dimensional, with the outer dimension matching the order of tickets in the list. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.neuron_backend_config_default">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1ad6b3dba14901211a65dcc2ce0a482bec"></span><code class="sig-name descname"><span class="pre">neuron_backend_config_default</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.neuron_backend_config_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron backend config suitable for hagen mode. </p>
<p>Only the refractory time settings (counter and clock) are set, otherwise it is default constructed.</p>
<p>:return: NeuronBackendConfig suitable for integration. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.neuron_config_default">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1a8216af8e1881b5124725607eda031120"></span><code class="sig-name descname"><span class="pre">neuron_config_default</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.neuron_config_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a neuron configuration suitable for integration. </p>
<p>Mainly, the synaptic inputs and membrane readout get enabled. Enabling leak divisions allows to achieve long membrane time constants, as required for integration.</p>
<p>:return: NeuronConfig suitable for integration. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.reconfigure_synaptic_input">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1ab998195ce87aea8bbee3e8f6cee855f1"></span><code class="sig-name descname"><span class="pre">reconfigure_synaptic_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">Optional[Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">excitatory_biases=None</span></em>, <em class="sig-param"><span class="pre">Optional[Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">inhibitory_biases=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.reconfigure_synaptic_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconfigures the excitatory and inhibitory synaptic inputs of all neurons. </p>
<p>If excitatory_biases are given, they are written to the excitatory synaptic input bias current cells. If the bias current is zero, it is disabled in the neuron config, if another number is given, it is enabled. If a single integer is given, all neurons are configured to this value plus some noise. If an array of values is provided, each neuron’s synaptic input OTA bias is set to the given values.</p>
<p>If excitatory_biases are None, the excitatory synaptic input is not reconfigured at all. Configuring the inhibitory synaptic input works similarly.</p>
<p>This function reads the current neuron config, turns on/off the desired synaptic inputs as described above, and writes the config back to the neurons.</p>
<p>:param connection: Connection to chip to run on. :param excitatory_biases: Neuron excitatory synaptic input OTA bias current setting to configure. :param inhibitory_biases: Neuron excitatory synaptic input OTA bias current setting to configure. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.reset_neurons">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1aeb458c7b309f24d03754165160805caf"></span><code class="sig-name descname"><span class="pre">reset_neurons</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">halco.SynramOnDLS</span> <span class="pre">synram=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.reset_neurons" title="Permalink to this definition">¶</a></dt>
<dd><p>Trigger an artificial reset in all neurons. </p>
<p>The membrane potential gets pulled back to the reset potential.</p>
<p>:param builder: Builder to append reset instructions to. :param synram: Synram of neurons to be reset. If None, all neurons on the chip are reset.</p>
<p>:return: Builder with reset instructions appended. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.reshape_neuron_quadrants">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1ad5bc0903ea0282b4b03660f6ed5beb8c"></span><code class="sig-name descname"><span class="pre">reshape_neuron_quadrants</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">neuron_reads</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.reshape_neuron_quadrants" title="Permalink to this definition">¶</a></dt>
<dd><p>Reshape the flat reads for all neurons on the chip to a two-dimensional array containing the 4 quadrants in the first dimension and 128 neuron reads each in the second dimension. </p>
<p>:param neuron_reads: Flat array of 512 neuron reads.</p>
<p>:return: Reshaped array containing quadrant results. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.set_analog_neuron_config">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1afb418f25d611b16aacfdfc29c300b6c4"></span><code class="sig-name descname"><span class="pre">set_analog_neuron_config</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">v_leak</span></em>, <em class="sig-param"><span class="pre">Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">i_leak</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.set_analog_neuron_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure all neurons’ CapMem cells to the given v_leak potential and the given i_leak bias current. </p>
<p>The other parameters are chosen as usable defaults, the reset potential is set equal to the leak potential. Also, we turn off the synaptic input bias currents, since the synaptic inputs can not be used without calibration. The reset bias current is set maximum.</p>
<p>:param builder: Builder to append the configuration to. :param v_leak: CapMem setting of the leak potential for all neurons. If an array is given, it is written to the neurons following enumeration of <code class="docutils literal notranslate"><span class="pre">halco.NeuronConfig</span></code>s. If a single integer is given, some noise (+- 5) is added before writing the values. The reset voltage is set as well, always equal to the leak voltage. :param i_leak: CapMem setting of the leak bias current for all neurons, noise will be added as for v_leak.</p>
<p>:return: Tuple containing:<ul class="simple">
<li><p>Builder with configuration instructions appended.</p></li>
<li><p>Dict containing the exact configured parameters for each neuron. </p></li>
</ul>
</p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.neuron_helpers.set_global_capmem_config">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1a8d1bbe82aea54317367f2ddc629a190c"></span><code class="sig-name descname"><span class="pre">set_global_capmem_config</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_helpers.set_global_capmem_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Set required global bias currents to static values. </p>
<p>:param builder: Builder to append instructions to.</p>
<p>:return: Builder with instructions appended. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-variables">Variables</p>
<dl class="py attribute">
<dt id="calix.hagen.neuron_helpers._coord">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1a7f863497c6f39de5fcb12d76a3da37f3"></span><code class="sig-name descname"><span class="pre">_coord</span></code><em class="property"> <span class="pre">=</span> <span class="pre">halco.NeuronResetQuadOnDLS(_quad_coord,</span> <span class="pre">_synram)</span></em><a class="headerlink" href="#calix.hagen.neuron_helpers._coord" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.hagen.neuron_helpers.neuron_reset_builders">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__helpers_1a68d78e99250e0732b232e1638fc8a0ce"></span><code class="sig-name descname"><span class="pre">neuron_reset_builders</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{_coord:</span> <span class="pre">sta.PlaybackProgramBuilder()</span> <span class="pre">for</span> <span class="pre">_coordin</span> <span class="pre">halco.iter_all(halco.SynramOnDLS)}</span></em><a class="headerlink" href="#calix.hagen.neuron_helpers.neuron_reset_builders" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.hagen.neuron_leak_bias">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__leak__bias"></span><em class="property"><span class="pre">module</span> </em><code class="sig-name descname"><span class="pre">neuron_leak_bias</span></code><a class="headerlink" href="#calix.hagen.neuron_leak_bias" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="calix.hagen.neuron_potentials">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__potentials"></span><em class="property"><span class="pre">module</span> </em><code class="sig-name descname"><span class="pre">neuron_potentials</span></code><a class="headerlink" href="#calix.hagen.neuron_potentials" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides functions to calibrate leak and reset potential. </p>
</dd></dl>

<dl class="py class">
<dt id="calix.hagen.neuron_synin">
<span class="target" id="namespacecalix_1_1hagen_1_1neuron__synin"></span><em class="property"><span class="pre">module</span> </em><code class="sig-name descname"><span class="pre">neuron_synin</span></code><a class="headerlink" href="#calix.hagen.neuron_synin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="calix.hagen.synapse_driver">
<span class="target" id="namespacecalix_1_1hagen_1_1synapse__driver"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.hagen.</span></code><code class="sig-name descname"><span class="pre">synapse_driver</span></code><a class="headerlink" href="#calix.hagen.synapse_driver" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a function to calibrate the synapse drivers for hagen-mode input activation encoding. </p>
<p>This boils down to calibrating the STP ramp current such that the emitted amplitudes utilize the available dynamic range, and calibrating the hagen-mode DAC offsets such that different drivers yield the same amplitudes.</p>
<p>These calibrations are performed on the synaptic input lines, therefore we require calibrated CADCs, but the neurons don’t need to be calibrated. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix.hagen.synapse_driver.calibrate">
<span class="target" id="namespacecalix_1_1hagen_1_1synapse__driver_1a451f4fef7587c0200599d7ce971d0e2c"></span><code class="sig-name descname"><span class="pre">calibrate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">Optional[SynapseDriverCalibOptions]</span> <span class="pre">options=None</span></em>, <em class="sig-param"><span class="pre">Optional[hal.SynapseQuad.Label]</span> <span class="pre">offset_test_activation=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.synapse_driver.calibrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate the synapse drivers’ STP offsets such that the amplitudes match when using hagen mode. </p>
<p>The STP ramp currents are calibrated such that drivers connected to each CapMem Block use the available dynamic range. To achieve that, we (1) select the drivers with median amplitudes per quadrant, (2) measure the maximum amplitudes generated by these drivers, (3) set the ramp current such that the activation scales amplitudes sensibly.</p>
<p>The hagen-mode DAC offsets are calibrated for each driver afterwards.</p>
<p>Requirements:<ul class="simple">
<li><p>Chip is initialized.</p></li>
<li><p>CADCs are calibrated. You can use <code class="docutils literal notranslate"><a class="reference internal" href="#namespacecalix_1_1common_1_1cadc_1a57ab946001bb84ed52a398c1da7be095"><span class="std std-ref"><span class="pre">calix.common.cadc.calibrate()</span></span></a></code> to achieve this.</p></li>
<li><p>Neuron readout is connected to the CADC lines and global bias currents are set. You can use <code class="docutils literal notranslate"><a class="reference internal" href="#namespacecalix_1_1hagen_1_1neuron__helpers_1ac4114467612d149d5130cc95f9d2dea2"><span class="std std-ref"><span class="pre">calix.hagen.neuron_helpers.configure_chip()</span></span></a></code> to achieve this.</p></li>
</ul>
</p>
<p>:param connection: Connection to the chip to run on. :param options: Calibration options, given as an instance of <a class="reference internal" href="#classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_calib_options"><span class="std std-ref">SynapseDriverCalibOptions</span></a>.</p>
<p>:return: <a class="reference internal" href="#classcalix_1_1hagen_1_1synapse__driver_1_1_synapse_driver_calib_result"><span class="std std-ref">SynapseDriverCalibResult</span></a> containing STP ramp currents for the CapMem blocks, offsets for the drivers, and a success mask. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.hagen.synapse_driver.preconfigure_capmem">
<span class="target" id="namespacecalix_1_1hagen_1_1synapse__driver_1aefcc00c2c91844169a8e06f78035ea83"></span><code class="sig-name descname"><span class="pre">preconfigure_capmem</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sta.PlaybackProgramBuilder</span> <span class="pre">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.synapse_driver.preconfigure_capmem" title="Permalink to this definition">¶</a></dt>
<dd><p>Set necessary static biases required for hagen mode. </p>
<p>:param builder: Builder to append configuration instructions to.</p>
<p>:return: Builder with configuration instructions appended. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-variables">Variables</p>
<dl class="py attribute">
<dt id="calix.hagen.synapse_driver.DEFAULT_STP_OFFSET">
<span class="target" id="namespacecalix_1_1hagen_1_1synapse__driver_1a4324f61cdf8fde75ea657e83a427fb25"></span><code class="sig-name descname"><span class="pre">DEFAULT_STP_OFFSET</span></code><em class="property"> <span class="pre">=</span> <span class="pre">hal.SynapseDriverConfig.Offset.max</span> <span class="pre">//</span> <span class="pre">2</span></em><a class="headerlink" href="#calix.hagen.synapse_driver.DEFAULT_STP_OFFSET" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix.hagen.synapse_driver.RANGE_LIMIT">
<span class="target" id="namespacecalix_1_1hagen_1_1synapse__driver_1a7011af6172d7d13b41f33f1f60f893cc"></span><code class="sig-name descname"><span class="pre">RANGE_LIMIT</span></code><em class="property"> <span class="pre">=</span> <span class="pre">0.9</span></em><a class="headerlink" href="#calix.hagen.synapse_driver.RANGE_LIMIT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.spiking">
<span class="target" id="namespacecalix_1_1spiking"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.</span></code><code class="sig-name descname"><span class="pre">spiking</span></code><a class="headerlink" href="#calix.spiking" title="Permalink to this definition">¶</a></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix.spiking.calibrate">
<span class="target" id="namespacecalix_1_1spiking_1aa2b4e786e8520c39f9f0e5a2285922ff"></span><code class="sig-name descname"><span class="pre">calibrate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">Optional[SpikingCalibrationTarget]</span> <span class="pre">target=None</span></em>, <em class="sig-param"><span class="pre">Optional[SpikingCalibrationOptions]</span> <span class="pre">options=None</span></em>, <em class="sig-param"><span class="pre">*Optional[dict]</span> <span class="pre">cadc_kwargs=None</span></em>, <em class="sig-param"><span class="pre">Optional[dict]</span> <span class="pre">neuron_kwargs=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.calibrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a full calibration for spiking mode: Calibrate CADCs to a suitable dynamic range. </p>
<p>Calibrate neurons.</p>
<p>The chip has to be initialized first, which can be done using the stadls ExperimentInit().</p>
<p>The individual calibrations’ default parameters can be overwritten by providing cadc_ or neuron_kwargs, respectively.</p>
<p>After the “usual” neuron calibration has finished, the CADC calibration is repeated in order to mitigate CapMem crosstalk effects. Afterwards, the neuron potentials are calibrated once again.</p>
<p>:param connection: Connection to the chip to calibrate. :param target: Target parameters for calibration, given as an instance of <a class="reference internal" href="#classcalix_1_1spiking_1_1_spiking_calibration_target"><span class="std std-ref">SpikingCalibrationTarget</span></a>. :param options: Further options for calibration, given as an instance of <a class="reference internal" href="#classcalix_1_1spiking_1_1_spiking_calibration_options"><span class="std std-ref">SpikingCalibrationOptions</span></a>.</p>
<p>:return: <a class="reference internal" href="#classcalix_1_1spiking_1_1_spiking_calibration_result"><span class="std std-ref">SpikingCalibrationResult</span></a>, containing cadc and neuron results. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.spiking.neuron">
<span class="target" id="namespacecalix_1_1spiking_1_1neuron"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.spiking.</span></code><code class="sig-name descname"><span class="pre">neuron</span></code><a class="headerlink" href="#calix.spiking.neuron" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides an interface for calibrating LIF neurons. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix.spiking.neuron.calibrate">
<span class="target" id="namespacecalix_1_1spiking_1_1neuron_1a0b0b4b15c78331ca1f9f28ae1c6ee369"></span><code class="sig-name descname"><span class="pre">calibrate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">Optional[NeuronCalibTarget]</span> <span class="pre">target=None</span></em>, <em class="sig-param"><span class="pre">Optional[NeuronCalibOptions]</span> <span class="pre">options=None</span></em>, <em class="sig-param"><span class="pre">*Optional[Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">leak=None</span></em>, <em class="sig-param"><span class="pre">Optional[Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">reset=None</span></em>, <em class="sig-param"><span class="pre">Optional[Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">threshold=None</span></em>, <em class="sig-param"><span class="pre">Optional[pq.Quantity]</span> <span class="pre">tau_mem=None</span></em>, <em class="sig-param"><span class="pre">Optional[pq.Quantity]</span> <span class="pre">tau_syn=None</span></em>, <em class="sig-param"><span class="pre">Optional[Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">i_synin_gm=None</span></em>, <em class="sig-param"><span class="pre">Optional[Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">membrane_capacitance=None</span></em>, <em class="sig-param"><span class="pre">Optional[pq.Quantity]</span> <span class="pre">refractory_time=None</span></em>, <em class="sig-param"><span class="pre">Optional[int]</span> <span class="pre">synapse_dac_bias=None</span></em>, <em class="sig-param"><span class="pre">Optional[halco.AtomicNeuronOnDLS]</span> <span class="pre">readout_neuron=None</span></em>, <em class="sig-param"><span class="pre">Optional[pq.Quantity]</span> <span class="pre">holdoff_time=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.neuron.calibrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate neurons for spiking operation in the LIF model. </p>
<p>Parts of the calibration use the CADC, thus it has to be calibrated beforehand. All parameters are given in a “technical” domain. Parameters can be single values or numpy arrays shaped (512,), matching the number of neurons.</p>
<p>Requirements:<ul class="simple">
<li><p>The CADCs are enabled and calibrated. You can achieve this using the function <code class="docutils literal notranslate"><a class="reference internal" href="#namespacecalix_1_1common_1_1cadc_1a57ab946001bb84ed52a398c1da7be095"><span class="std std-ref"><span class="pre">calix.common.cadc.calibrate()</span></span></a></code>.</p></li>
</ul>
</p>
<p>:param connection: Connection to the chip to calibrate. :param target: Calibration target, given as an instance of <a class="reference internal" href="#classcalix_1_1spiking_1_1neuron_1_1_neuron_calib_target"><span class="std std-ref">NeuronCalibTarget</span></a>. Refer there for the individual parameters. :param options: Further options for neuron calibration.</p>
<p>:raises TypeError: If time constants are not given with a unit from the <code class="docutils literal notranslate"><span class="pre">quantities</span></code> package. :raises ValueError: If parameters are badly shaped or out of feasible range. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.spiking.neuron.calibrate_leak_over_threshold">
<span class="target" id="namespacecalix_1_1spiking_1_1neuron_1a31d6c24fcefe5f75e3199cac277232dd"></span><code class="sig-name descname"><span class="pre">calibrate_leak_over_threshold</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">NeuronCalibResult</span> <span class="pre">result</span></em>, <em class="sig-param"><span class="pre">pq.Quantity</span> <span class="pre">leak_over_threshold_rate=100</span> <span class="pre">*pq.kHz</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.neuron.calibrate_leak_over_threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate neurons to a specific firing rate in leak over threshold setup, by adjusting the threshold. </p>
<p>The previously chosen threshold is disregarded here, it is not necessary to choose a leak over threshold setup beforehand. There has to be sufficient range between the reset and leak potential, though, in order to calibrate the threshold in between the two.</p>
<p>:param connection: Connection to the chip to calibrate. :param result: Result of the previous neuron calibration. The spike thresholds will be adjusted. :param leak_over_threshold_rate: Target spike rate, given with a unit in the hardware time domain (so usual values are 10 to 100 kHz). The threshold is calibrated such that the neuron spikes with the given rate without any synaptic input. The previously calibrated threshold is threfore overwritten. If configuring an array in order to set individual targets per neuron, use a rate of zero to leave the threshold untouched. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.spiking.neuron.refine_potentials">
<span class="target" id="namespacecalix_1_1spiking_1_1neuron_1a18960a83aa1d84ade916cf6d1d414d10"></span><code class="sig-name descname"><span class="pre">refine_potentials</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">NeuronCalibResult</span> <span class="pre">result</span></em>, <em class="sig-param"><span class="pre">Optional[NeuronCalibTarget]</span> <span class="pre">target=None</span></em>, <em class="sig-param"><span class="pre">*Optional[Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">leak=None</span></em>, <em class="sig-param"><span class="pre">Optional[Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">reset=None</span></em>, <em class="sig-param"><span class="pre">Optional[Union[int</span></em>, <em class="sig-param"><span class="pre">np.ndarray]]</span> <span class="pre">threshold=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.neuron.refine_potentials" title="Permalink to this definition">¶</a></dt>
<dd><p>Re-calibrate the leak, reset and threshold potentials. </p>
<p>This can be useful to minimize the effects of CapMem crosstalk on the end calibration. For best results, first run/apply a neuron calibration and then re-run the CADC calibration, as it is also affected by the neuron calibration. Call this function last.</p>
<p>:param connection: Connection to the chip to re-calibrate. :param result: Result of the previous neuron calibration. The potentials will be overwritten by the refinement. :param target: Calibration target parameters. Only the potentials (leak, reset, threshold) will be used and re-calibrated. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.spiking.neuron_calib_parts">
<span class="target" id="namespacecalix_1_1spiking_1_1neuron__calib__parts"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.spiking.</span></code><code class="sig-name descname"><span class="pre">neuron_calib_parts</span></code><a class="headerlink" href="#calix.spiking.neuron_calib_parts" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper functions representing parts of the spiking neuron calibration. </p>
<p>These functions are intended to be called in a specific order, as it is done in the spiking neuron calibration - please use caution in case you call them directly. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix.spiking.neuron_calib_parts.calibrate_synapse_dac_bias">
<span class="target" id="namespacecalix_1_1spiking_1_1neuron__calib__parts_1ad48fbe590a12521102f9efc832837eaf"></span><code class="sig-name descname"><span class="pre">calibrate_synapse_dac_bias</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">synapse_dac_bias</span></em>, <em class="sig-param"><span class="pre">neuron._CalibrationResultInternal</span> <span class="pre">calib_result</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.neuron_calib_parts.calibrate_synapse_dac_bias" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate the synapse DAC bias. </p>
<p>First, configure the target parameters on each quadrant. Then, calibrate each quadrant’s parameters such that the minimum amplitude of those measured previously on the quadrants is reached.</p>
<p>:param connection: Connection to chip to run on. :param synapse_dac_bias: Target CapMem value for calibration. :param calib_result: Calibration result. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.spiking.neuron_calib_parts.calibrate_synaptic_input">
<span class="target" id="namespacecalix_1_1spiking_1_1neuron__calib__parts_1adf98d1678bd32213e67c48d52059402c"></span><code class="sig-name descname"><span class="pre">calibrate_synaptic_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">neuron.NeuronCalibTarget</span> <span class="pre">target</span></em>, <em class="sig-param"><span class="pre">neuron._CalibrationResultInternal</span> <span class="pre">calib_result</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">target_cadc_reads</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.neuron_calib_parts.calibrate_synaptic_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Run calibration of (current-based) synaptic inputs. </p>
<p>:param connection: Connection to chip to run on. :param target: Target parameters for neuron calibration. :param calib_result: Calibration result to store parameters in. :param target_cadc_reads: CADC samples at resting potential, with synaptic input disabled. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.spiking.neuron_calib_parts.calibrate_synin_references">
<span class="target" id="namespacecalix_1_1spiking_1_1neuron__calib__parts_1af764b93613858c4f38726f78e6a49f98"></span><code class="sig-name descname"><span class="pre">calibrate_synin_references</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">target_cadc_reads</span></em>, <em class="sig-param"><span class="pre">neuron._CalibrationResultInternal</span> <span class="pre">calib_result</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.neuron_calib_parts.calibrate_synin_references" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate synaptic input OTA reference potentials such that the given target CADC reads are reached with synaptic inputs enabled, i.e., set to the bias currents in the calib result. </p>
<p>:param connection: Connection to chip to run on. :param target_cadc_reads: Target CADC reads, obtained at leak potential with synaptic inputs disabled. :param calib_result: Result of neuron calibration. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.spiking.neuron_calib_parts.calibrate_tau_mem">
<span class="target" id="namespacecalix_1_1spiking_1_1neuron__calib__parts_1a17d34988bd27b3c21cbffedc72cb5298"></span><code class="sig-name descname"><span class="pre">calibrate_tau_mem</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">pq.Quantity</span> <span class="pre">tau_mem</span></em>, <em class="sig-param"><span class="pre">neuron._CalibrationResultInternal</span> <span class="pre">calib_result</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.neuron_calib_parts.calibrate_tau_mem" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate membrane time constant to given target. </p>
<p>:param connection: Connection to chip to run on. :param tau_mem: Target membrane time constant. :param calib_result: Neuron calibration result. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.spiking.neuron_calib_parts.calibrate_tau_syn">
<span class="target" id="namespacecalix_1_1spiking_1_1neuron__calib__parts_1a9e672ecd6c5af3b01b80c2f5b749fa9d"></span><code class="sig-name descname"><span class="pre">calibrate_tau_syn</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">np.ndarray</span> <span class="pre">tau_syn</span></em>, <em class="sig-param"><span class="pre">neuron._CalibrationResultInternal</span> <span class="pre">calib_result</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.neuron_calib_parts.calibrate_tau_syn" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate synaptic input time constant to given target. </p>
<p>:param connection: Connection to chip to run on. :param tau_syn: Target synaptic input time constant. :param calib_result: Calibration result to store parameters in. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.spiking.neuron_calib_parts.disable_synin_and_threshold">
<span class="target" id="namespacecalix_1_1spiking_1_1neuron__calib__parts_1a8fd880d6e42798eb9373c95d8e5b8099"></span><code class="sig-name descname"><span class="pre">disable_synin_and_threshold</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">neuron._CalibrationResultInternal</span> <span class="pre">calib_result</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.neuron_calib_parts.disable_synin_and_threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure neurons with synaptic input OTAs and spike threshold disabled. </p>
<p>This is a benign state in which many other parameters can be calibrated more easily.</p>
<p>:param connection: Connection to chip to run on. :param calib_result: Neuron calibration result. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.spiking.neuron_calib_parts.finalize_synin_calib">
<span class="target" id="namespacecalix_1_1spiking_1_1neuron__calib__parts_1a2f89acb1761985c1c11a850d3c56c966"></span><code class="sig-name descname"><span class="pre">finalize_synin_calib</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">neuron._CalibrationResultInternal</span> <span class="pre">calib_result</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.neuron_calib_parts.finalize_synin_calib" title="Permalink to this definition">¶</a></dt>
<dd><p>Un-set some of the hagen-mode specific parameters that were set in <code class="docutils literal notranslate"><span class="pre">prepare_for_synin_calib</span></code>. </p>
<p>The synaptic input time constant is re-set to the user-selected value, that was calibrated previously. We don’t change the membrane time constant here, as it will be calibrated only afterwards.</p>
<p>:param connection: Connection to chip to run on. :param calib_result: Calibration result to store parameters in. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.spiking.neuron_calib_parts.prepare_for_synin_calib">
<span class="target" id="namespacecalix_1_1spiking_1_1neuron__calib__parts_1a5d99c147bf2e0946dc98da0fda634ddd"></span><code class="sig-name descname"><span class="pre">prepare_for_synin_calib</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">hxcomm.ConnectionHandle</span> <span class="pre">connection</span></em>, <em class="sig-param"><span class="pre">neuron.NeuronCalibOptions</span> <span class="pre">options</span></em>, <em class="sig-param"><span class="pre">neuron._CalibrationResultInternal</span> <span class="pre">calib_result</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.neuron_calib_parts.prepare_for_synin_calib" title="Permalink to this definition">¶</a></dt>
<dd><p>Preconfigure the chip for synaptic input calibration. </p>
<p>Select a hagen-mode-like setup, i.e. calibrate membrane time constant to a high value and synaptic input time constant to a low value.</p>
<p>Note that there is a corresponding function <code class="docutils literal notranslate"><span class="pre">finalize_synin_calib</span></code> that undoes some of these changes, i.e. re-applies the synaptic input time constant to the user-selected value.</p>
<p>:param connection: Connection to chip to run on. :param options: Further options for calibration. :param calib_result: Calibration result to store parameters in.</p>
<p>:return: Array of target CADC reads at resting potential, to be used as reference point during synaptic input calib. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.spiking.neuron_threshold">
<span class="target" id="namespacecalix_1_1spiking_1_1neuron__threshold"></span><em class="property"><span class="pre">module</span> </em><code class="sig-name descname"><span class="pre">neuron_threshold</span></code><a class="headerlink" href="#calix.spiking.neuron_threshold" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="calix.spiking.refractory_period">
<span class="target" id="namespacecalix_1_1spiking_1_1refractory__period"></span><em class="property"><span class="pre">module</span> </em><code class="sig-prename descclassname"><span class="pre">calix.spiking.</span></code><code class="sig-name descname"><span class="pre">refractory_period</span></code><a class="headerlink" href="#calix.spiking.refractory_period" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculations related to determining the refractory clock scales as well as counter values. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix.spiking.refractory_period._calculate_clock_cycles">
<span class="target" id="namespacecalix_1_1spiking_1_1refractory__period_1a6183378a7c79236a97c6e6f69f8a53a1"></span><code class="sig-name descname"><span class="pre">_calculate_clock_cycles</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">pq.Quantity</span> <span class="pre">refractory_times</span></em>, <em class="sig-param"><span class="pre">int</span> <span class="pre">clock_scale</span></em>, <em class="sig-param"><span class="pre">pq.Quantity</span> <span class="pre">f_base</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.refractory_period._calculate_clock_cycles" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert refractory time to clock cycles. </p>
<p>:param refractory_times: Refractory times in time unit. :param clock_scale: Clock scaler of refrectory clock :param f_base: Base frequency of the refractory clock. :return: Refractory times in clock cycles. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.spiking.refractory_period._calculate_clock_scale">
<span class="target" id="namespacecalix_1_1spiking_1_1refractory__period_1a7a5465dfbe1852f0af682d52920f9f06"></span><code class="sig-name descname"><span class="pre">_calculate_clock_scale</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">pq.Quantity</span> <span class="pre">min_time_per_cycle</span></em>, <em class="sig-param"><span class="pre">pq.Quantity</span> <span class="pre">f_base</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.refractory_period._calculate_clock_scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate clock scale needed to have at least the given amount of time per cycle. </p>
<p>:param min_time_per_cycle: Minimum time one cycle should take. :param f_base: Base frequency of the refractory clock. :return: Minimum clock scale for which one cycle needs at least the given time. </p>
</dd></dl>

<dl class="py function">
<dt id="calix.spiking.refractory_period._clock_period">
<span class="target" id="namespacecalix_1_1spiking_1_1refractory__period_1a06c7afa7b378ff911ba39826dfd671ac"></span><code class="sig-name descname"><span class="pre">_clock_period</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">int</span> <span class="pre">clock_scale</span></em>, <em class="sig-param"><span class="pre">pq.Quantity</span> <span class="pre">f_base</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.refractory_period._clock_period" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate period of refractory clock. </p>
<p>:param clock_scale: Scalinf factor of refrctory clock. :param f_base: Base frequency of the refractory clock. :return: Period length of refractory clock </p>
</dd></dl>

<dl class="py function">
<dt id="calix.spiking.refractory_period.calculate_settings">
<span class="target" id="namespacecalix_1_1spiking_1_1refractory__period_1a80c2e97b80121a6b4d947b56feb51391"></span><code class="sig-name descname"><span class="pre">calculate_settings</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">pq.Quantity</span> <span class="pre">tau_ref</span></em>, <em class="sig-param"><span class="pre">pq.Quantity</span> <span class="pre">holdoff_time=0</span> <span class="pre">*pq.us</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.refractory_period.calculate_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine scales of fast and slow clock as well as refractory counter settings of individual neurons. </p>
<p>On BSS-2 the refractory period is made up of a “reset period” where the potential is clamped to the reset potential and a “holdoff period” in which the membrane can evolve freely but no new spikes are triggered.</p>
<p>In this function the clock scalers and counter values are chosen such that the given targets for both parameters can be fulfilled.</p>
<p>:param tau_ref: Target refractory times. This is the total time in which the neuron does not emit new spikes and therefore includes the holdoff period. :param holdoff_time: Target length of the holdoff period. Note: Due to hardware constraint the holdoff period is always at least one clock cycle long. For a target of zero the minimal holdoff period is chosen.</p>
<p>:return: Clock settings.</p>
<p>:raises ValueError: If <code class="docutils literal notranslate"><span class="pre">tau_ref</span></code> and <code class="docutils literal notranslate"><span class="pre">holdoff_time</span></code> have different sizes and none of them is a scalar value. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-variables">Variables</p>
<dl class="py attribute">
<dt id="calix.spiking.refractory_period._clock_base_frequency">
<span class="target" id="namespacecalix_1_1spiking_1_1refractory__period_1afbefe778a90b573e5272214e14d16bfb"></span><code class="sig-name descname"><span class="pre">_clock_base_frequency</span></code><em class="property"> <span class="pre">=</span> <span class="pre">hal.ADPLL().calculate_output_frequency(output=hal.ADPLL().Output.core_1)</span> <span class="pre">*</span> <span class="pre">pq.Hz</span></em><a class="headerlink" href="#calix.spiking.refractory_period._clock_base_frequency" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="py class">
<dt id="calix.spiking.synapse_driver">
<span class="target" id="namespacecalix_1_1spiking_1_1synapse__driver"></span><em class="property"><span class="pre">module</span> </em><code class="sig-name descname"><span class="pre">synapse_driver</span></code><a class="headerlink" href="#calix.spiking.synapse_driver" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a calibration class for the synapse driver STP offset for the usual spiking mode. </p>
</dd></dl>

<dl class="py class">
<dt id="calix_generate_default_calibration">
<span class="target" id="namespacecalix__generate__default__calibration"></span><em class="property"><span class="pre">module</span> </em><code class="sig-name descname"><span class="pre">calix_generate_default_calibration</span></code><a class="headerlink" href="#calix_generate_default_calibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute all available default calibration and saves them in all available data formats. </p>
<p>If result files already exist, they are overwritten. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="calix_generate_default_calibration.run_and_save_all">
<span class="target" id="namespacecalix__generate__default__calibration_1a8f6e53128b73736fd9c3c29b0218e987"></span><code class="sig-name descname"><span class="pre">run_and_save_all</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">Path</span> <span class="pre">deployment_folder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix_generate_default_calibration.run_and_save_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes all available default calibrations and saves them to all available file formats. </p>
<p>:param deployment_folder: Path calibration results are deployed to. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-variables">Variables</p>
<dl class="py attribute">
<dt id="calix_generate_default_calibration.args">
<span class="target" id="namespacecalix__generate__default__calibration_1a41f2f2b32222bd242650394de778392b"></span><code class="sig-name descname"><span class="pre">args</span></code><em class="property"> <span class="pre">=</span> <span class="pre">parser.parse_args()</span></em><a class="headerlink" href="#calix_generate_default_calibration.args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix_generate_default_calibration.depl_folder">
<span class="target" id="namespacecalix__generate__default__calibration_1a36499b1e3eff664e1a544c680c750cbe"></span><code class="sig-name descname"><span class="pre">depl_folder</span></code><em class="property"> <span class="pre">=</span> <span class="pre">Path(args.deployment_folder)</span></em><a class="headerlink" href="#calix_generate_default_calibration.depl_folder" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix_generate_default_calibration.exist_ok">
<span class="target" id="namespacecalix__generate__default__calibration_1a374ca2ed2d48a708b7e47f177c92e9e7"></span><code class="sig-name descname"><span class="pre">exist_ok</span></code><a class="headerlink" href="#calix_generate_default_calibration.exist_ok" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix_generate_default_calibration.help">
<span class="target" id="namespacecalix__generate__default__calibration_1a787b98921cced101c507dce31d06d446"></span><code class="sig-name descname"><span class="pre">help</span></code><a class="headerlink" href="#calix_generate_default_calibration.help" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix_generate_default_calibration.log">
<span class="target" id="namespacecalix__generate__default__calibration_1a15973b8b4431caa1d838bc916e60a403"></span><code class="sig-name descname"><span class="pre">log</span></code><em class="property"> <span class="pre">=</span> <span class="pre">logger.get(&quot;calix&quot;)</span></em><a class="headerlink" href="#calix_generate_default_calibration.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix_generate_default_calibration.parents">
<span class="target" id="namespacecalix__generate__default__calibration_1a61c354ec1015911b71a570e9a2ca28af"></span><code class="sig-name descname"><span class="pre">parents</span></code><a class="headerlink" href="#calix_generate_default_calibration.parents" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix_generate_default_calibration.parser">
<span class="target" id="namespacecalix__generate__default__calibration_1a09298204126cada90d7625902bfdbacf"></span><code class="sig-name descname"><span class="pre">parser</span></code><em class="property"> <span class="pre">=</span> <span class="pre">argparse.ArgumentParser(description=__doc__)</span></em><a class="headerlink" href="#calix_generate_default_calibration.parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="calix_generate_default_calibration.True">
<span class="target" id="namespacecalix__generate__default__calibration_1a6dc8a62462ab74106569cfe7f68d846a"></span><code class="sig-name descname"><span class="pre">True</span></code><a class="headerlink" href="#calix_generate_default_calibration.True" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="cpp type">
<dt id="_CPPv412hagen_neuron">
<span id="_CPPv312hagen_neuron"></span><span id="_CPPv212hagen_neuron"></span><span id="hagen_neuron"></span><span class="target" id="namespacehagen__neuron"></span><em class="property"><span class="pre">namespace</span> </em><code class="sig-name descname"><span class="pre">hagen_neuron</span></code><a class="headerlink" href="#_CPPv412hagen_neuron" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp type">
<dt id="_CPPv49madc_base">
<span id="_CPPv39madc_base"></span><span id="_CPPv29madc_base"></span><span id="madc_base"></span><span class="target" id="namespacemadc__base"></span><em class="property"><span class="pre">namespace</span> </em><code class="sig-name descname"><span class="pre">madc_base</span></code><a class="headerlink" href="#_CPPv49madc_base" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp type">
<dt id="_CPPv414multiplication">
<span id="_CPPv314multiplication"></span><span id="_CPPv214multiplication"></span><span id="multiplication"></span><span class="target" id="namespacemultiplication"></span><em class="property"><span class="pre">namespace</span> </em><code class="sig-name descname"><span class="pre">multiplication</span></code><a class="headerlink" href="#_CPPv414multiplication" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="neuron_icc_bias">
<span class="target" id="namespaceneuron__icc__bias"></span><em class="property"><span class="pre">module</span> </em><code class="sig-name descname"><span class="pre">neuron_icc_bias</span></code><a class="headerlink" href="#neuron_icc_bias" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="plateau_potential">
<span class="target" id="namespaceplateau__potential"></span><em class="property"><span class="pre">module</span> </em><code class="sig-name descname"><span class="pre">plateau_potential</span></code><a class="headerlink" href="#plateau_potential" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate neurons to generate plateau potentials when spiking and saving the calibration result to disk. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="py function">
<dt id="plateau_potential.plateau_potential_decay">
<span class="target" id="namespaceplateau__potential_1ab2bccb69cc7d22a3f3326d5d8f927e6a"></span><code class="sig-name descname"><span class="pre">plateau_potential_decay</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">*Union[float</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">v_leak</span></em>, <em class="sig-param"><span class="pre">Union[float</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">v_reset</span></em>, <em class="sig-param"><span class="pre">Union[float</span></em>, <em class="sig-param"><span class="pre">np.ndarray]</span> <span class="pre">v_thres</span></em>, <em class="sig-param"><span class="pre">pq.quantity.Quantity</span> <span class="pre">tau_mem</span></em><span class="sig-paren">)</span><a class="headerlink" href="#plateau_potential.plateau_potential_decay" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function. </p>
<p>Calculate time needed to exponentially decay below threshold.</p>
<p>In case of plateau potentials the reset potential is above the threshold potential. In this function we calculate how long the membrane needs to relax below the threshold potential if a simple leaky-integrate-and-fire neuron is assumed. If the reset potential is below threshold, i.e. no plateau potential is configured, zero is returned.</p>
<p>:param v_leak: Target leak potentials. :param v_reset: Target reset potentials. :param v_thres: Target threshold potentials. :param tau_mem: Target membrane time constants. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-variables">Variables</p>
<dl class="py attribute">
<dt id="plateau_potential._">
<span class="target" id="namespaceplateau__potential_1acac8dd0b015ce4757c0e4284d9a70389"></span><code class="sig-name descname"><span class="pre">_</span></code><a class="headerlink" href="#plateau_potential._" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="plateau_potential.builder">
<span class="target" id="namespaceplateau__potential_1add40ab7d1e217428033b04a2fc5a0fda"></span><code class="sig-name descname"><span class="pre">builder</span></code><em class="property"> <span class="pre">=</span> <span class="pre">sta.PlaybackProgramBuilderDumper()</span></em><a class="headerlink" href="#plateau_potential.builder" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the calibration. </p>
</dd></dl>

<dl class="py attribute">
<dt id="plateau_potential.calibration_result">
<span class="target" id="namespaceplateau__potential_1a1b27bccdcfb381cda5cb026369c0a1ad"></span><code class="sig-name descname"><span class="pre">calibration_result</span></code><em class="property"> <span class="pre">=</span> <span class="pre">calix.spiking.calibrate(connection,neuron_kwargs=neuron_args)</span></em><a class="headerlink" href="#plateau_potential.calibration_result" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="plateau_potential.mode">
<span class="target" id="namespaceplateau__potential_1ab86ab69b1b9ad1ae8e037e21b893fd9c"></span><code class="sig-name descname"><span class="pre">mode</span></code><a class="headerlink" href="#plateau_potential.mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="plateau_potential.neuron_args">
<span class="target" id="namespaceplateau__potential_1a6ec732ce0764579b47df9f53b294ad19"></span><code class="sig-name descname"><span class="pre">neuron_args</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{'leak':</span> <span class="pre">50,'threshold':</span> <span class="pre">80,'reset':</span> <span class="pre">100,'tau_mem':</span> <span class="pre">10</span> <span class="pre">*</span> <span class="pre">pq.us}</span></em><a class="headerlink" href="#plateau_potential.neuron_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Define calibration target. </p>
<p>On BSS-2 plateau potentials are emulated by the refractory mechanism. Instead of choosing a reset near the leak potential it is chosen above the threshold: </p>
</dd></dl>

<dl class="py attribute">
<dt id="plateau_potential.target_file">
<span class="target" id="namespaceplateau__potential_1ab3fb79a476d8fef49190c4ae6143e563"></span><code class="sig-name descname"><span class="pre">target_file</span></code><em class="property"> <span class="pre">=</span> <span class="pre">Path('my_calibration.pbin')</span></em><a class="headerlink" href="#plateau_potential.target_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Save calibration as portable binary. </p>
</dd></dl>

<dl class="py attribute">
<dt id="plateau_potential.tau_mem">
<span class="target" id="namespaceplateau__potential_1a24ab8257362c399220834d294e9226b4"></span><code class="sig-name descname"><span class="pre">tau_mem</span></code><a class="headerlink" href="#plateau_potential.tau_mem" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="plateau_potential.v_leak">
<span class="target" id="namespaceplateau__potential_1a28fb3bb7631d992825aa4f6b84106cf7"></span><code class="sig-name descname"><span class="pre">v_leak</span></code><a class="headerlink" href="#plateau_potential.v_leak" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="plateau_potential.v_reset">
<span class="target" id="namespaceplateau__potential_1ac108249b0a7f057b22def49eac1bea09"></span><code class="sig-name descname"><span class="pre">v_reset</span></code><a class="headerlink" href="#plateau_potential.v_reset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="plateau_potential.v_thres">
<span class="target" id="namespaceplateau__potential_1aca51793db7feb26b39d4316c3ffa2afb"></span><code class="sig-name descname"><span class="pre">v_thres</span></code><a class="headerlink" href="#plateau_potential.v_thres" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="cpp type">
<dt id="_CPPv43sta">
<span id="_CPPv33sta"></span><span id="_CPPv23sta"></span><span id="sta"></span><span class="target" id="namespacesta"></span><em class="property"><span class="pre">namespace</span> </em><code class="sig-name descname"><span class="pre">sta</span></code><a class="headerlink" href="#_CPPv43sta" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp type">
<dt id="_CPPv4St">
<span id="_CPPv3St"></span><span id="_CPPv2St"></span><span id="std"></span><span class="target" id="namespacestd"></span><em class="property"><span class="pre">namespace</span> </em><code class="sig-name descname"><span class="pre">std</span></code><a class="headerlink" href="#_CPPv4St" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>STL namespace. </p>
</dd></dl>

<dl class="file">
<dt>
<span class="target" id="____init_____8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">__init__.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="common_2____init_____8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">__init__.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="hagen_2____init_____8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">__init__.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="spiking_2____init_____8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">__init__.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="algorithms_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">algorithms.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="base_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">base.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="boundary__check_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">boundary_check.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="cadc_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">cadc.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="cadc__evaluation_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">cadc_evaluation.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="cadc__helpers_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">cadc_helpers.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="exceptions_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">exceptions.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="helpers_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">helpers.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="madc__base_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">madc_base.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="synapse_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">synapse.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="constants_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">constants.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="plateau__potential_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">plateau_potential.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="multiplication_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">multiplication.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="neuron__evaluation_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">neuron_evaluation.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="neuron__helpers_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">neuron_helpers.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="neuron__leak__bias_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">neuron_leak_bias.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="neuron__potentials_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">neuron_potentials.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="neuron__synin_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">neuron_synin.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="neuron__icc__bias_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">neuron_icc_bias.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="calix__generate__default__calibration_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">calix_generate_default_calibration.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="hagen_2neuron_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">neuron.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="spiking_2neuron_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">neuron.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="neuron__calib__parts_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">neuron_calib_parts.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="neuron__threshold_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">neuron_threshold.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="refractory__period_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">refractory_period.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="hagen_2synapse__driver_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">synapse_driver.py</span></code></dt>
<dd></dd></dl>

<dl class="file">
<dt>
<span class="target" id="spiking_2synapse__driver_8py"></span><em><span class="pre">file</span></em> <code class="sig-name descname"><span class="pre">synapse_driver.py</span></code></dt>
<dd></dd></dl>

<dl class="dir">
<dt>
<span class="target" id="dir_c35a4213fddb628e2be6588952b4aa7a"></span><em><span class="pre">dir</span></em> <code class="sig-name descname"><span class="pre">/jenkins/jenlib_workspaces_f9/doc_gerrit_documentation-brainscales2-dependencies.ZG9jX2dlcnJpdF9kb2N1bWVudGF0aW9uLWJyYWluc2NhbGVzMi1kZXBlbmRlbmNpZXMjNzU2MQ.x/calix</span></code></dt>
<dd></dd></dl>

<dl class="dir">
<dt>
<span class="target" id="dir_82a35310634ec59f1204b5a89ab180c2"></span><em><span class="pre">dir</span></em> <code class="sig-name descname"><span class="pre">/jenkins/jenlib_workspaces_f9/doc_gerrit_documentation-brainscales2-dependencies.ZG9jX2dlcnJpdF9kb2N1bWVudGF0aW9uLWJyYWluc2NhbGVzMi1kZXBlbmRlbmNpZXMjNzU2MQ.x/calix/src/py/calix</span></code></dt>
<dd></dd></dl>

<dl class="dir">
<dt>
<span class="target" id="dir_5f8140149f6c25fac289bffcf217ba0f"></span><em><span class="pre">dir</span></em> <code class="sig-name descname"><span class="pre">/jenkins/jenlib_workspaces_f9/doc_gerrit_documentation-brainscales2-dependencies.ZG9jX2dlcnJpdF9kb2N1bWVudGF0aW9uLWJyYWluc2NhbGVzMi1kZXBlbmRlbmNpZXMjNzU2MQ.x/calix/src/py/calix/common</span></code></dt>
<dd></dd></dl>

<dl class="dir">
<dt>
<span class="target" id="dir_79dd501e695b0ff0539e6dfe8c054e50"></span><em><span class="pre">dir</span></em> <code class="sig-name descname"><span class="pre">/jenkins/jenlib_workspaces_f9/doc_gerrit_documentation-brainscales2-dependencies.ZG9jX2dlcnJpdF9kb2N1bWVudGF0aW9uLWJyYWluc2NhbGVzMi1kZXBlbmRlbmNpZXMjNzU2MQ.x/calix/src/py/calix/examples</span></code></dt>
<dd></dd></dl>

<dl class="dir">
<dt>
<span class="target" id="dir_1a13b09fb48f7daf03bf32d21388e4f1"></span><em><span class="pre">dir</span></em> <code class="sig-name descname"><span class="pre">/jenkins/jenlib_workspaces_f9/doc_gerrit_documentation-brainscales2-dependencies.ZG9jX2dlcnJpdF9kb2N1bWVudGF0aW9uLWJyYWluc2NhbGVzMi1kZXBlbmRlbmNpZXMjNzU2MQ.x/calix/src/py/calix/hagen</span></code></dt>
<dd></dd></dl>

<dl class="dir">
<dt>
<span class="target" id="dir_d9b46f0c81a5bc28bd701ca679fdd154"></span><em><span class="pre">dir</span></em> <code class="sig-name descname"><span class="pre">/jenkins/jenlib_workspaces_f9/doc_gerrit_documentation-brainscales2-dependencies.ZG9jX2dlcnJpdF9kb2N1bWVudGF0aW9uLWJyYWluc2NhbGVzMi1kZXBlbmRlbmNpZXMjNzU2MQ.x/calix/src/py/calix/multicomp</span></code></dt>
<dd></dd></dl>

<dl class="dir">
<dt>
<span class="target" id="dir_8638feb6d3d74ce8c52c6a166958a78e"></span><em><span class="pre">dir</span></em> <code class="sig-name descname"><span class="pre">/jenkins/jenlib_workspaces_f9/doc_gerrit_documentation-brainscales2-dependencies.ZG9jX2dlcnJpdF9kb2N1bWVudGF0aW9uLWJyYWluc2NhbGVzMi1kZXBlbmRlbmNpZXMjNzU2MQ.x/calix/src/py</span></code></dt>
<dd></dd></dl>

<dl class="dir">
<dt>
<span class="target" id="dir_d19dcf94b302e45079f65ed711419664"></span><em><span class="pre">dir</span></em> <code class="sig-name descname"><span class="pre">/jenkins/jenlib_workspaces_f9/doc_gerrit_documentation-brainscales2-dependencies.ZG9jX2dlcnJpdF9kb2N1bWVudGF0aW9uLWJyYWluc2NhbGVzMi1kZXBlbmRlbmNpZXMjNzU2MQ.x/calix/src/py/calix/scripts</span></code></dt>
<dd></dd></dl>

<dl class="dir">
<dt>
<span class="target" id="dir_99cd149c1e2c45a11fa03ec83bb2f7d6"></span><em><span class="pre">dir</span></em> <code class="sig-name descname"><span class="pre">/jenkins/jenlib_workspaces_f9/doc_gerrit_documentation-brainscales2-dependencies.ZG9jX2dlcnJpdF9kb2N1bWVudGF0aW9uLWJyYWluc2NhbGVzMi1kZXBlbmRlbmNpZXMjNzU2MQ.x/calix/src/py/calix/spiking</span></code></dt>
<dd></dd></dl>

<dl class="dir">
<dt>
<span class="target" id="dir_e78734f8a9c4496b3b751d186a730c09"></span><em><span class="pre">dir</span></em> <code class="sig-name descname"><span class="pre">/jenkins/jenlib_workspaces_f9/doc_gerrit_documentation-brainscales2-dependencies.ZG9jX2dlcnJpdF9kb2N1bWVudGF0aW9uLWJyYWluc2NhbGVzMi1kZXBlbmRlbmNpZXMjNzU2MQ.x/calix/src</span></code></dt>
<dd></dd></dl>

</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="api_hxcomm.html" class="btn btn-neutral float-left" title="API Reference: hxcomm" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2023, Electronic Vision(s).

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>