<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>calix.hagen.synapse_driver.STPRampCalib &mdash; BrainScaleS-2 Documentation 0.0.1 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/visions.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="calix.hagen.synapse_driver.SynapseDriverCalibOptions" href="calix.hagen.synapse_driver.SynapseDriverCalibOptions.html" />
    <link rel="prev" title="calix.hagen.synapse_driver.HagenDACOffsetCalib" href="calix.hagen.synapse_driver.HagenDACOffsetCalib.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> BrainScaleS-2 Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../brainscales2-demos/index.html">Demos &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_components.html">Software Components</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../apis.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../apis_python.html">Python API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pynn_brainscales.brainscales2.html">pynn_brainscales.brainscales2</a></li>
<li class="toctree-l3"><a class="reference internal" href="hxtorch.html">hxtorch</a></li>
<li class="toctree-l3"><a class="reference internal" href="pygrenade_vx.html">pygrenade_vx</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="calix.html">calix</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="calix.calib_cache.html">calix.calib_cache</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.common.html">calix.common</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.constants.html">calix.constants</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="calix.hagen.html">calix.hagen</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.spiking.html">calix.spiking</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../apis_cpp.html">C++ API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BrainScaleS-2 Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../apis.html">BrainScaleS-2 API Documentation</a> &raquo;</li>
          <li><a href="../apis_python.html">BrainScaleS-2 API Documentation</a> &raquo;</li>
          <li><a href="calix.html">calix</a> &raquo;</li>
          <li><a href="calix.hagen.html">calix.hagen</a> &raquo;</li>
          <li><a href="calix.hagen.synapse_driver.html">calix.hagen.synapse_driver</a> &raquo;</li>
      <li>calix.hagen.synapse_driver.STPRampCalib</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/calix.hagen.synapse_driver.STPRampCalib.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="calix-hagen-synapse-driver-stprampcalib">
<h1>calix.hagen.synapse_driver.STPRampCalib<a class="headerlink" href="#calix-hagen-synapse-driver-stprampcalib" title="Permalink to this headline"></a></h1>
<dl class="py class">
<dt id="calix.hagen.synapse_driver.STPRampCalib">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">calix.hagen.synapse_driver.</span></code><code class="sig-name descname"><span class="pre">STPRampCalib</span></code><a class="headerlink" href="#calix.hagen.synapse_driver.STPRampCalib" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="calix.common.base.Calib.html#calix.common.base.Calib" title="calix.common.base.Calib"><code class="xref py py-class docutils literal notranslate"><span class="pre">calix.common.base.Calib</span></code></a></p>
<p>Search synapse driver STP ramp currents such that the mean amplitudes
of drivers on different CapMem blocks are the same.</p>
<p>This is necessary as 64 drivers each, which are connected to the same
CapMem block, receive the same bias current, but different instances
of the CapMem can drive different currents at the same setting.
This calibration counters systematic deviations in amplitudes between
synapse drivers on different quadrants.</p>
<p>The amplitudes are measured with the neurons in integration mode.
In order to obtain a representative result for a quadrant’s
amplitudes with the STP offsets not calibrated yet, we select
an “average” driver for each CapMem block during the prelude.
The median of their amplitudes is used as calibration target.</p>
<p>Requirements:
* Synapse DAC bias is calibrated.
* Static synapse driver bias currents are set. This can be achieved</p>
<blockquote>
<div><p>using <cite>preconfigure_capmem()</cite>.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>test_activation</strong> – Hagen-mode activation to use when
determining the ramp slope. Should be low, close but not
equal to zero. Make sure to change the target amplitude
accordingly when changing the test_activation.</p></li>
<li><p><strong>n_parallel_measurements</strong> – Number of parallel measurements
to execute when measuring results.</p></li>
<li><p><strong>offset_calib</strong> – Instance of calibration used for Hagen DAC
offset. This calibration is called each time after changing
the STP ramp currents, before measuring results.</p></li>
<li><p><strong>log</strong> – Logger used to log outputs.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="calix.hagen.synapse_driver.STPRampCalib.__init__">
<code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.synapse_driver.STPRampCalib.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.hagen.synapse_driver.STPRampCalib.__init__" title="calix.hagen.synapse_driver.STPRampCalib.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>()</p></td>
<td><p>Initialize self.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#calix.hagen.synapse_driver.STPRampCalib.calculate_quadrant_means" title="calix.hagen.synapse_driver.STPRampCalib.calculate_quadrant_means"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_quadrant_means</span></code></a>(results)</p></td>
<td><p>Calculate mean amplitudes per quadrant from an array of all drivers’ amplitudes.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.hagen.synapse_driver.STPRampCalib.configure_parameters" title="calix.hagen.synapse_driver.STPRampCalib.configure_parameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">configure_parameters</span></code></a>(builder, parameters)</p></td>
<td><p>Configure the given STP ramp currents to the CapMem quadrants.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#calix.hagen.synapse_driver.STPRampCalib.measure_results" title="calix.hagen.synapse_driver.STPRampCalib.measure_results"><code class="xref py py-obj docutils literal notranslate"><span class="pre">measure_results</span></code></a>(connection, builder)</p></td>
<td><p>Measure the amplitudes of all drivers at a low activation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.hagen.synapse_driver.STPRampCalib.postlude" title="calix.hagen.synapse_driver.STPRampCalib.postlude"><code class="xref py py-obj docutils literal notranslate"><span class="pre">postlude</span></code></a>(connection)</p></td>
<td><p>Print the calibrated ramp currents.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#calix.hagen.synapse_driver.STPRampCalib.prelude" title="calix.hagen.synapse_driver.STPRampCalib.prelude"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prelude</span></code></a>(connection)</p></td>
<td><p>Measure maximum amplitude per driver, using a high ramp bias current and a high activation.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="calix.hagen.synapse_driver.STPRampCalib.calculate_quadrant_means">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">calculate_quadrant_means</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="headerlink" href="#calix.hagen.synapse_driver.STPRampCalib.calculate_quadrant_means" title="Permalink to this definition"></a></dt>
<dd><p>Calculate mean amplitudes per quadrant from an array of
all drivers’ amplitudes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>results</strong> – Results from all synapse drivers on chip.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Mean results of all drivers on a quadrant.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.hagen.synapse_driver.STPRampCalib.configure_parameters">
<code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">builder</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a><a class="headerlink" href="#calix.hagen.synapse_driver.STPRampCalib.configure_parameters" title="Permalink to this definition"></a></dt>
<dd><p>Configure the given STP ramp currents to the CapMem quadrants.</p>
<p>The STP calibration current is set equal to this ramp current:
The ramp offset calibration works by sinking part of the
ramp current within the first 2 ns of the ramp generation phase.
The calibration current controls the sinked current, therefore it
is sensible to scale it with the sourced (ramp) current.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>builder</strong> – Builder to append configuration to.</p></li>
<li><p><strong>parameters</strong> – STP ramp currents to set.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Builder with configuration appended.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.hagen.synapse_driver.STPRampCalib.measure_results">
<code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">builder</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="headerlink" href="#calix.hagen.synapse_driver.STPRampCalib.measure_results" title="Permalink to this definition"></a></dt>
<dd><p>Measure the amplitudes of all drivers at a low activation.</p>
<p>This corresponds to a high DAC voltage, i.e. the end of
the ramp. We return the mean amplitude per quadrant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection</strong> – Connection to the chip to run on.</p></li>
<li><p><strong>builder</strong> – Builder to measure results with.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array of STP amplitudes per quadrant.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.hagen.synapse_driver.STPRampCalib.postlude">
<code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#calix.hagen.synapse_driver.STPRampCalib.postlude" title="Permalink to this definition"></a></dt>
<dd><p>Print the calibrated ramp currents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>connection</strong> – Connection to the chip to run on.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.hagen.synapse_driver.STPRampCalib.prelude">
<code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#calix.hagen.synapse_driver.STPRampCalib.prelude" title="Permalink to this definition"></a></dt>
<dd><p>Measure maximum amplitude per driver, using a high ramp bias
current and a high activation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>connection</strong> – Connection to the chip to run on.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="calix.hagen.synapse_driver.HagenDACOffsetCalib.html" class="btn btn-neutral float-left" title="calix.hagen.synapse_driver.HagenDACOffsetCalib" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="calix.hagen.synapse_driver.SynapseDriverCalibOptions.html" class="btn btn-neutral float-right" title="calix.hagen.synapse_driver.SynapseDriverCalibOptions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Electronic Vision(s).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>