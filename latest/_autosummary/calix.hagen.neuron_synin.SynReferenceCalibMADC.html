<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>calix.hagen.neuron_synin.SynReferenceCalibMADC &mdash; BrainScaleS-2 Documentation 0.0.1 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/visions.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="calix.hagen.neuron_synin.SynTimeConstantCalib" href="calix.hagen.neuron_synin.SynTimeConstantCalib.html" />
    <link rel="prev" title="calix.hagen.neuron_synin.SynReferenceCalib" href="calix.hagen.neuron_synin.SynReferenceCalib.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> BrainScaleS-2 Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../brainscales2-demos/index.html">Demos &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_components.html">Software Components</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../apis.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../apis_python.html">Python API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pynn_brainscales.brainscales2.html">pynn_brainscales.brainscales2</a></li>
<li class="toctree-l3"><a class="reference internal" href="hxtorch.html">hxtorch</a></li>
<li class="toctree-l3"><a class="reference internal" href="pygrenade_vx.html">pygrenade_vx</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="calix.html">calix</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="calix.calib_cache.html">calix.calib_cache</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.common.html">calix.common</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.constants.html">calix.constants</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="calix.hagen.html">calix.hagen</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.spiking.html">calix.spiking</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../apis_cpp.html">C++ API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BrainScaleS-2 Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../apis.html">BrainScaleS-2 API Documentation</a> &raquo;</li>
          <li><a href="../apis_python.html">BrainScaleS-2 API Documentation</a> &raquo;</li>
          <li><a href="calix.html">calix</a> &raquo;</li>
          <li><a href="calix.hagen.html">calix.hagen</a> &raquo;</li>
          <li><a href="calix.hagen.neuron_synin.html">calix.hagen.neuron_synin</a> &raquo;</li>
      <li>calix.hagen.neuron_synin.SynReferenceCalibMADC</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/calix.hagen.neuron_synin.SynReferenceCalibMADC.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="calix-hagen-neuron-synin-synreferencecalibmadc">
<h1>calix.hagen.neuron_synin.SynReferenceCalibMADC<a class="headerlink" href="#calix-hagen-neuron-synin-synreferencecalibmadc" title="Permalink to this headline"></a></h1>
<dl class="py class">
<dt id="calix.hagen.neuron_synin.SynReferenceCalibMADC">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">calix.hagen.neuron_synin.</span></code><code class="sig-name descname"><span class="pre">SynReferenceCalibMADC</span></code><a class="headerlink" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="calix.common.madc_base.Calib.html#calix.common.madc_base.Calib" title="calix.common.madc_base.Calib"><code class="xref py py-class docutils literal notranslate"><span class="pre">calix.common.madc_base.Calib</span></code></a></p>
<p>Calibrate synaptic input reference potentials using the MADC.</p>
<p>This calibration requires the leak bias currents to be zero, which
is set in the prelude. The leak bias currents are NOT restored,
since the target use case is PPU-based hagen mode integration with
leakage disabled.</p>
<p>As for all calibrations based on the MADC calibration, neuron
configurations and readout configuration are changed during
calibration and restored afterwards.</p>
<p>To measure the current output of the synaptic input OTA, the membrane
potential is observed while floating (with the leak term disabled).
Initially, the membrane is reset. Once the refractory period ends and
the reset is released, we fit to the membrane potential: If a constant
current flows onto the membrane, it increases or decreases linearly.
We search the reference potential settings for minimum constant currents,
i.e. such that the membrane potential stays constant after the reset is
released.</p>
<p>Requirements:
* The synaptic input is enabled and configured with the desired bias</p>
<blockquote>
<div><p>currents (i_bias_synin_{exc,inh}_gm).</p>
</div></blockquote>
<ul class="simple">
<li><p>The refractory time has to be set as <cite>expected_refractory_time</cite>.
We use this parameter to select the start time of the fit.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_runs</strong> – Take the average of multiple measurements in each
step of the calibration. Defaults to 1 (no averaging).</p></li>
<li><p><strong>expected_refractory_time</strong> – Configured refractory time. Used
to determine the start point of the linear fit, which should
begin once the reset is released and the membrane potential
starts drifting.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="calix.hagen.neuron_synin.SynReferenceCalibMADC.__init__">
<code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.__init__" title="calix.hagen.neuron_synin.SynReferenceCalibMADC.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>()</p></td>
<td><p>Initialize self.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.configure_parameters" title="calix.hagen.neuron_synin.SynReferenceCalibMADC.configure_parameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">configure_parameters</span></code></a>(builder, parameters)</p></td>
<td><p>Configures the given array of synaptic input reference potentials.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.evaluate" title="calix.hagen.neuron_synin.SynReferenceCalibMADC.evaluate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">evaluate</span></code></a>(samples)</p></td>
<td><p>Evaluates the obtained MADC samples.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.measure_results" title="calix.hagen.neuron_synin.SynReferenceCalibMADC.measure_results"><code class="xref py py-obj docutils literal notranslate"><span class="pre">measure_results</span></code></a>(connection, builder)</p></td>
<td><p>Executes multiple measurements on chip, returns the mean result.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.neuron_config_disabled" title="calix.hagen.neuron_synin.SynReferenceCalibMADC.neuron_config_disabled"><code class="xref py py-obj docutils literal notranslate"><span class="pre">neuron_config_disabled</span></code></a>(neuron_coord)</p></td>
<td><p>Return a neuron config with readout disabled.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.neuron_config_readout" title="calix.hagen.neuron_synin.SynReferenceCalibMADC.neuron_config_readout"><code class="xref py py-obj docutils literal notranslate"><span class="pre">neuron_config_readout</span></code></a>(neuron_coord)</p></td>
<td><p>Return a neuron config with readout enabled.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.prelude" title="calix.hagen.neuron_synin.SynReferenceCalibMADC.prelude"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prelude</span></code></a>(connection)</p></td>
<td><p>Prepares chip for calibration.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.stimulate" title="calix.hagen.neuron_synin.SynReferenceCalibMADC.stimulate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stimulate</span></code></a>(builder, neuron_coord, …)</p></td>
<td><p>Reset the neuron’s membrane potential.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="calix.hagen.neuron_synin.SynReferenceCalibMADC.configure_parameters">
<code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">builder</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a><a class="headerlink" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.configure_parameters" title="Permalink to this definition"></a></dt>
<dd><p>Configures the given array of synaptic input reference potentials.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>builder</strong> – Builder to append configuration instructions to.</p></li>
<li><p><strong>parameters</strong> – Array of reference potentials to set up.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Builder with configuration appended.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.hagen.neuron_synin.SynReferenceCalibMADC.evaluate">
<code class="sig-name descname"><span class="pre">evaluate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">samples</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="headerlink" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.evaluate" title="Permalink to this definition"></a></dt>
<dd><p>Evaluates the obtained MADC samples.</p>
<p>To each neuron’s MADC samples, a linear function is fitted,
and the slope is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>samples</strong> – MADC samples obtained for each neuron.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Numpy array of fitted slopes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.hagen.neuron_synin.SynReferenceCalibMADC.measure_results">
<code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">builder</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="headerlink" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.measure_results" title="Permalink to this definition"></a></dt>
<dd><p>Executes multiple measurements on chip, returns the mean result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection</strong> – Connection to the chip to calibrate.</p></li>
<li><p><strong>builder</strong> – Builder to append measurement program to.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Numpy array of mean results.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.hagen.neuron_synin.SynReferenceCalibMADC.neuron_config_disabled">
<code class="sig-name descname"><span class="pre">neuron_config_disabled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">neuron_coord</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pyhaldls_vx_v3.NeuronConfig</span><a class="headerlink" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.neuron_config_disabled" title="Permalink to this definition"></a></dt>
<dd><p>Return a neuron config with readout disabled.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Neuron config with readout disabled.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.hagen.neuron_synin.SynReferenceCalibMADC.neuron_config_readout">
<code class="sig-name descname"><span class="pre">neuron_config_readout</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">neuron_coord</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pyhaldls_vx_v3.NeuronConfig</span><a class="headerlink" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.neuron_config_readout" title="Permalink to this definition"></a></dt>
<dd><p>Return a neuron config with readout enabled.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Neuron config with readout enabled.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.hagen.neuron_synin.SynReferenceCalibMADC.prelude">
<code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.prelude" title="Permalink to this definition"></a></dt>
<dd><p>Prepares chip for calibration.</p>
<p>Enables the MADC and sets the leak bias currents to zero.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>connection</strong> – Connection to the chip to calibrate.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.hagen.neuron_synin.SynReferenceCalibMADC.stimulate">
<code class="sig-name descname"><span class="pre">stimulate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">builder</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">neuron_coord</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhalco_hicann_dls_vx_v3.NeuronConfigOnDLS</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stimulation_time</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhaldls_vx_v3.Timer.Value</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a><a class="headerlink" href="#calix.hagen.neuron_synin.SynReferenceCalibMADC.stimulate" title="Permalink to this definition"></a></dt>
<dd><p>Reset the neuron’s membrane potential.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>builder</strong> – Builder to append resets to.</p></li>
<li><p><strong>neuron_coord</strong> – Coordinate of neuron which is currently recorded.</p></li>
<li><p><strong>stimulation_time</strong> – Timer value at beginning of stimulation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Builder with reset appended.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="calix.hagen.neuron_synin.SynReferenceCalib.html" class="btn btn-neutral float-left" title="calix.hagen.neuron_synin.SynReferenceCalib" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="calix.hagen.neuron_synin.SynTimeConstantCalib.html" class="btn btn-neutral float-right" title="calix.hagen.neuron_synin.SynTimeConstantCalib" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Electronic Vision(s).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>