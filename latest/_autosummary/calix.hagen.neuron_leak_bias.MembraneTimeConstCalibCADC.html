<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC &mdash; BrainScaleS-2 Documentation 0.0.1 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/visions.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="calix.hagen.neuron_leak_bias.MembraneTimeConstCalibOffset" href="calix.hagen.neuron_leak_bias.MembraneTimeConstCalibOffset.html" />
    <link rel="prev" title="calix.hagen.neuron_leak_bias.LeakBiasCalib" href="calix.hagen.neuron_leak_bias.LeakBiasCalib.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> BrainScaleS-2 Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../brainscales2-demos/index.html">Demos &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_components.html">Software Components</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../apis.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../apis_python.html">Python API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pynn_brainscales.brainscales2.html">pynn_brainscales.brainscales2</a></li>
<li class="toctree-l3"><a class="reference internal" href="hxtorch.html">hxtorch</a></li>
<li class="toctree-l3"><a class="reference internal" href="pygrenade_vx.html">pygrenade_vx</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="calix.html">calix</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="calix.calib_cache.html">calix.calib_cache</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.common.html">calix.common</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.constants.html">calix.constants</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="calix.hagen.html">calix.hagen</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.spiking.html">calix.spiking</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../apis_cpp.html">C++ API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BrainScaleS-2 Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../apis.html">BrainScaleS-2 API Documentation</a> &raquo;</li>
          <li><a href="../apis_python.html">BrainScaleS-2 API Documentation</a> &raquo;</li>
          <li><a href="calix.html">calix</a> &raquo;</li>
          <li><a href="calix.hagen.html">calix.hagen</a> &raquo;</li>
          <li><a href="calix.hagen.neuron_leak_bias.html">calix.hagen.neuron_leak_bias</a> &raquo;</li>
      <li>calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="calix-hagen-neuron-leak-bias-membranetimeconstcalibcadc">
<h1>calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC<a class="headerlink" href="#calix-hagen-neuron-leak-bias-membranetimeconstcalibcadc" title="Permalink to this headline"></a></h1>
<dl class="py class">
<dt id="calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">calix.hagen.neuron_leak_bias.</span></code><code class="sig-name descname"><span class="pre">MembraneTimeConstCalibCADC</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_time_const</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">quantities.quantity.Quantity</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">array(60.)</span> <span class="pre">*</span> <span class="pre">us</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_amplitude</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="calix.common.base.Calib.html#calix.common.base.Calib" title="calix.common.base.Calib"><code class="xref py py-class docutils literal notranslate"><span class="pre">calix.common.base.Calib</span></code></a></p>
<p>Find the leak conductivity by resetting the neuron’s membrane to a
potential significantly below the leak potential.</p>
<p>The reset potential v_reset is set below the leak potential v_leak.
After a reset the membrane voltage rises towards the leak potential v_leak.
As the membrane voltage rises, the CADCs are used to read the voltage at a
specified time after the reset.
The leak bias current gets calibrated such that the voltage after the
desired time has risen to <cite>v_leak - (v_leak - v_reset)/e</cite>. Therefore, the
specified time should be roughly the membrane time constant.</p>
<p>The leak potential gets recalibrated every time the bias current
is changed, as changing the OTA bias current also changes the
required offset between its inputs. The target CADC reads at leak
potential are acquired at the beginning of the calibration with the
existing neuron configuration. The median of all reads is taken as target.</p>
<p>This class provides functions for configuring leak bias currents
and reading the potentials of neurons a specific time after reset.</p>
<p>Requirements:
* Neuron membrane readout is connected to the CADCs (causal and acausal).
* The currently selected leak potential is not too low, such that the</p>
<blockquote>
<div><p>target_amplitude can still be subtracted from the CADC reads at leak
potential without leaving the desired operating range of the leak
OTA or the dynamic range of the CADCs.</p>
</div></blockquote>
<ul class="simple">
<li><p>The target membrane time constant is long, above some 30 us.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_amplitude</strong> – Target amplitude for (v_leak - v_reset), given
in CADC reads.</p></li>
<li><p><strong>target_time_const</strong> – Target membrane time constant.</p></li>
<li><p><a class="reference internal" href="calix.hagen.neuron.NeuronCalibTarget.html#calix.hagen.neuron.NeuronCalibTarget.target_leak_read" title="calix.hagen.neuron.NeuronCalibTarget.target_leak_read"><strong>target_leak_read</strong></a> – Target CADC read at leak potential.</p></li>
<li><p><strong>leak_calibration</strong> – LeakPotentialCalib class instance used for
recalibration of leak potential after changing the bias current.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if target_time_constant is not a single value.</p>
</dd>
</dl>
<dl class="py method">
<dt id="calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.__init__">
<code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_time_const</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">quantities.quantity.Quantity</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">array(60.)</span> <span class="pre">*</span> <span class="pre">us</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_amplitude</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.__init__" title="calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>([target_time_const, target_amplitude])</p></td>
<td><p>Initialize self.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.configure_parameters" title="calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.configure_parameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">configure_parameters</span></code></a>(builder, parameters)</p></td>
<td><p>Configure the leak OTA bias currents of all neurons to the given values.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.measure_results" title="calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.measure_results"><code class="xref py py-obj docutils literal notranslate"><span class="pre">measure_results</span></code></a>(connection, builder)</p></td>
<td><p>Calibrate the leak potentials such that the CADC reads match the read targets.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.postlude" title="calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.postlude"><code class="xref py py-obj docutils literal notranslate"><span class="pre">postlude</span></code></a>(connection)</p></td>
<td><p>Function to do necessary postconfiguring of the chip.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.prelude" title="calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.prelude"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prelude</span></code></a>(connection)</p></td>
<td><p>Read leak potentials, calibrate reset potential to leak - amplitude.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.configure_parameters">
<code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">builder</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a><a class="headerlink" href="#calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.configure_parameters" title="Permalink to this definition"></a></dt>
<dd><p>Configure the leak OTA bias currents of all neurons to the given
values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>builder</strong> – Builder to append configuration instructions to.</p></li>
<li><p><strong>parameters</strong> – Array of leak OTA bias current settings to
configure the CapMem cells to.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Builder with configuration appended.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.measure_results">
<code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">builder</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="headerlink" href="#calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.measure_results" title="Permalink to this definition"></a></dt>
<dd><p>Calibrate the leak potentials such that the CADC reads match
the read targets.
Reset the neurons and wait for the target time constant.
Measure the membrane potentials using the CADCs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection</strong> – Connection to the chip to run on.</p></li>
<li><p><strong>builder</strong> – Builder to run.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array of CADC reads after reset and wait.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.postlude">
<code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.postlude" title="Permalink to this definition"></a></dt>
<dd><p>Function to do necessary postconfiguring of the chip.
If not overwritten, this function does nothing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>connection</strong> – Connection to the chip to be calibrated.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.prelude">
<code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#calix.hagen.neuron_leak_bias.MembraneTimeConstCalibCADC.prelude" title="Permalink to this definition"></a></dt>
<dd><p>Read leak potentials, calibrate reset potential to leak - amplitude.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>connection</strong> – Connection to the chip to run on.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="calix.common.exceptions.CalibNotSuccessful.html#calix.common.exceptions.CalibNotSuccessful" title="calix.common.exceptions.CalibNotSuccessful"><strong>CalibNotSuccessful</strong></a> – If the target CADC read at
reset potential is below the reliable range of the CADC
for more than 5% of the neurons.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="calix.hagen.neuron_leak_bias.LeakBiasCalib.html" class="btn btn-neutral float-left" title="calix.hagen.neuron_leak_bias.LeakBiasCalib" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="calix.hagen.neuron_leak_bias.MembraneTimeConstCalibOffset.html" class="btn btn-neutral float-right" title="calix.hagen.neuron_leak_bias.MembraneTimeConstCalibOffset" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Electronic Vision(s).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>