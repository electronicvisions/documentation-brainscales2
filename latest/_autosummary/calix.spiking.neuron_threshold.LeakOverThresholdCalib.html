<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>calix.spiking.neuron_threshold.LeakOverThresholdCalib &mdash; BrainScaleS-2 Documentation 0.0.1 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/visions.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="calix.spiking.neuron_threshold.NeuronThresholdCalib" href="calix.spiking.neuron_threshold.NeuronThresholdCalib.html" />
    <link rel="prev" title="calix.spiking.neuron_threshold.deepcopy" href="calix.spiking.neuron_threshold.deepcopy.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> BrainScaleS-2 Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../brainscales2-demos/index.html">Demos &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_components.html">Software Components</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../apis.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api_pynn-brainscales2.html">PyNN API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_hxtorch.html">hxtorch API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_grenade.html">grenade API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_haldls.html">haldls API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_lola.html">lola API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_stadls.html">stadls API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_fisch.html">fisch API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_hxcomm.html">hxcomm API</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../api_calix.html">calix API</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="calix.html">calix</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="calix.calibrate.html">calix.calibrate</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.calib_cache.html">calix.calib_cache</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.common.html">calix.common</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.constants.html">calix.constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.hagen.html">calix.hagen</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="calix.spiking.html">calix.spiking</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api_hate.html">hate API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BrainScaleS-2 Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../apis.html">BrainScaleS-2 API Documentation</a> &raquo;</li>
          <li><a href="../api_calix.html">API Reference: calix</a> &raquo;</li>
          <li><a href="calix.html">calix</a> &raquo;</li>
          <li><a href="calix.spiking.html">calix.spiking</a> &raquo;</li>
          <li><a href="calix.spiking.neuron_threshold.html">calix.spiking.neuron_threshold</a> &raquo;</li>
      <li>calix.spiking.neuron_threshold.LeakOverThresholdCalib</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/calix.spiking.neuron_threshold.LeakOverThresholdCalib.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="calix-spiking-neuron-threshold-leakoverthresholdcalib">
<h1>calix.spiking.neuron_threshold.LeakOverThresholdCalib<a class="headerlink" href="#calix-spiking-neuron-threshold-leakoverthresholdcalib" title="Permalink to this headline"></a></h1>
<dl class="py class">
<dt id="calix.spiking.neuron_threshold.LeakOverThresholdCalib">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">calix.spiking.neuron_threshold.</span></code><code class="sig-name descname"><span class="pre">LeakOverThresholdCalib</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">quantities.quantity.Quantity</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">array(100.)</span> <span class="pre">*</span> <span class="pre">kHz</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.neuron_threshold.LeakOverThresholdCalib" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">calix.spiking.neuron_threshold._SpikeCounterCalib</span></code></p>
<p>Calibrate the neurons’ spike threshold such that the given
spike rate is achieved in a leak over threshold setup,
without any synaptic input.</p>
<p>Requirements:
* The leak potential is set sufficiently high and the reset potential</p>
<blockquote>
<div><p>is set sufficiently low, such that there is some range for the
threshold potential in between the two.</p>
</div></blockquote>
<ul class="simple">
<li><p>While the target spike rates can be different between neurons, their
dynamic range is limited to roughly a factor of 10 (i.e. the maximum
target should not be more than 10 times the minimum target).
This is due to the precision of the spike counter: Slowly spiking
neurons would spike only a few times during the accumulation time,
while quickly spiking neurons would almost saturate the counter.
You can work around this by running the calibration multiple times
and cherry-picking from the results.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>threshold_at_reset</strong> – Threshold parameters calibrated at the
reset potential. Will be used as a lower boundary during the
calibration to spike rates.</p></li>
<li><p><a class="reference internal" href="calix.common.boundary_check.BoundaryCheckResult.html#calix.common.boundary_check.BoundaryCheckResult.parameters" title="calix.common.boundary_check.BoundaryCheckResult.parameters"><strong>parameters</strong></a> – Latest threshold parameters configured on the
chip, saved during configure_parameters and reused during
measure_results. There, we compare them against
threshold_at_reset in order to keep the threshold potential
above the reset potential.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="calix.spiking.neuron_threshold.LeakOverThresholdCalib.__init__">
<code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">quantities.quantity.Quantity</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">array(100.)</span> <span class="pre">*</span> <span class="pre">kHz</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.neuron_threshold.LeakOverThresholdCalib.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>target</strong> – Target spike rate in leak over threshold setup.</p>
</dd>
</dl>
<p>Neurons with a target of 0 are calibrated to an arbitrary firing
rate between the maximum and minimum requested value.
:raises ValueError: if the target is negative or all zero.</p>
</dd></dl>

<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.spiking.neuron_threshold.LeakOverThresholdCalib.__init__" title="calix.spiking.neuron_threshold.LeakOverThresholdCalib.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>([target])</p></td>
<td><p><dl class="field-list simple">
<dt class="field-odd">param target</dt>
<dd class="field-odd"><p>Target spike rate in leak over threshold setup.</p>
</dd>
</dl>
</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#calix.spiking.neuron_threshold.LeakOverThresholdCalib.configure_parameters" title="calix.spiking.neuron_threshold.LeakOverThresholdCalib.configure_parameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">configure_parameters</span></code></a>(builder, parameters)</p></td>
<td><p>Configure the given spike threshold potentials in the given builder.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.spiking.neuron_threshold.LeakOverThresholdCalib.measure_results" title="calix.spiking.neuron_threshold.LeakOverThresholdCalib.measure_results"><code class="xref py py-obj docutils literal notranslate"><span class="pre">measure_results</span></code></a>(connection, builder)</p></td>
<td><p>Measures the spike rate without synaptic input.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#calix.spiking.neuron_threshold.LeakOverThresholdCalib.postlude" title="calix.spiking.neuron_threshold.LeakOverThresholdCalib.postlude"><code class="xref py py-obj docutils literal notranslate"><span class="pre">postlude</span></code></a>(connection)</p></td>
<td><p>Function to do necessary postconfiguring of the chip.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.spiking.neuron_threshold.LeakOverThresholdCalib.prelude" title="calix.spiking.neuron_threshold.LeakOverThresholdCalib.prelude"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prelude</span></code></a>(connection)</p></td>
<td><p>Measure reset potential and store it as a lower boundary for the parameter space.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#calix.spiking.neuron_threshold.LeakOverThresholdCalib.run" title="calix.spiking.neuron_threshold.LeakOverThresholdCalib.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(connection, algorithm[, target])</p></td>
<td><p>Use the provided algorithm to find optimal parameters.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="calix.spiking.neuron_threshold.LeakOverThresholdCalib.configure_parameters">
<code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">builder</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a><a class="headerlink" href="#calix.spiking.neuron_threshold.LeakOverThresholdCalib.configure_parameters" title="Permalink to this definition"></a></dt>
<dd><p>Configure the given spike threshold potentials in the
given builder.</p>
<p>Also saves the parameters in an ivar, so we can check them against
the minimum feasible range (at the reset potential) later.</p>
<p>Note: Saving the parameters is part of working around a bug in
the digital neuron backend. On HICANN-X v3, it may be possible
to use the base function if the bug is fixed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>builder</strong> – Builder to append configuration instructions to.</p></li>
<li><p><strong>parameters</strong> – Threshold potential for each neuron.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Builder with configuration appended.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.spiking.neuron_threshold.LeakOverThresholdCalib.measure_results">
<code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">builder</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="headerlink" href="#calix.spiking.neuron_threshold.LeakOverThresholdCalib.measure_results" title="Permalink to this definition"></a></dt>
<dd><p>Measures the spike rate without synaptic input.</p>
<p>Measure number of spikes with spike counters. Also, the
previously configured parameters are inspected:
If they indicate the threshold is set below the reset
potential, a high spike count is returned, in order to have the
threshold potential be increased by the algorithm.</p>
<p>Note: The replacing low spike counts with high numbers works
around a bug in the digital neuron backend. On HICANN-X v3, it
may be possible to just use the base function, if the bug is fixed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection</strong> – Connection to a chip.</p></li>
<li><p><strong>builder</strong> – Builder to append read instructions to.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array with the number of spikes during the accumulation time.
If the counter has overflown, the value is set to a high value.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.spiking.neuron_threshold.LeakOverThresholdCalib.postlude">
<code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#calix.spiking.neuron_threshold.LeakOverThresholdCalib.postlude" title="Permalink to this definition"></a></dt>
<dd><p>Function to do necessary postconfiguring of the chip.
If not overwritten, this function does nothing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>connection</strong> – Connection to the chip to be calibrated.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.spiking.neuron_threshold.LeakOverThresholdCalib.prelude">
<code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.spiking.neuron_threshold.LeakOverThresholdCalib.prelude" title="Permalink to this definition"></a></dt>
<dd><p>Measure reset potential and store it as a lower boundary for
the parameter space.</p>
<p>Since the spike rate will be zero both if the threshold is too
high (above the leak) or too low (below the reset), we calibrate
the threshold at reset potential and will later use these value
as a lower boundary for feasible parameters.</p>
<p>Note: This is likely caused by a bug in the digital neuron backend.
Starting with HICANN-X v3, it may be possible to drop this entire
prelude, as spike rates should then be highest if the threshold
is lower than the reset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>connection</strong> – Connection to the chip to run on.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.spiking.neuron_threshold.LeakOverThresholdCalib.run">
<code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="calix.common.base.Algorithm.html#calix.common.base.Algorithm" title="calix.common.base.Algorithm"><span class="pre">calix.common.base.Algorithm</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">numbers.Integral</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="calix.common.base.ParameterCalibResult.html#calix.common.base.ParameterCalibResult" title="calix.common.base.ParameterCalibResult"><span class="pre">calix.common.base.ParameterCalibResult</span></a><a class="headerlink" href="#calix.spiking.neuron_threshold.LeakOverThresholdCalib.run" title="Permalink to this definition"></a></dt>
<dd><p>Use the provided algorithm to find optimal parameters.</p>
<p>Calls prelude function, calls algorithm.run(), calls postlude function.
If self.target is not defined after the prelude function, the
calibration target is required as a parameter to this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection</strong> – Connection to the chip to calibrate.</p></li>
<li><p><strong>algorithm</strong> – Instance of an algorithm to be used for
calibration. Will be hooked to the calibration during running
and unhooked afterwards.</p></li>
<li><p><strong>target</strong> – Target result to be aimed for. If given, this target
is used. If None, the attribute self.target is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – If neither the target parameter or the attribute
self.target are defined.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>ParameterCalibResult, containing the optimal
parameters.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="calix.spiking.neuron_threshold.deepcopy.html" class="btn btn-neutral float-left" title="calix.spiking.neuron_threshold.deepcopy" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="calix.spiking.neuron_threshold.NeuronThresholdCalib.html" class="btn btn-neutral float-right" title="calix.spiking.neuron_threshold.NeuronThresholdCalib" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Electronic Vision(s).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>