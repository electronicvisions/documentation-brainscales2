<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>calix.common.base.Calib &mdash; BrainScaleS-2 Documentation 0.0.1 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/visions.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="calix.common.base.CalibOptions" href="calix.common.base.CalibOptions.html" />
    <link rel="prev" title="calix.common.base.Algorithm" href="calix.common.base.Algorithm.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            BrainScaleS-2 Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../brainscales2-demos/index.html">Demos &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_components.html">Software Components</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../apis.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../apis_python.html">Python API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pynn_brainscales.brainscales2.html">pynn_brainscales.brainscales2</a></li>
<li class="toctree-l3"><a class="reference internal" href="hxtorch.html">hxtorch</a></li>
<li class="toctree-l3"><a class="reference internal" href="pygrenade_vx.html">pygrenade_vx</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="calix.html">calix</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="calix.calib_cache.html">calix.calib_cache</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="calix.common.html">calix.common</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.constants.html">calix.constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.hagen.html">calix.hagen</a></li>
<li class="toctree-l4"><a class="reference internal" href="calix.spiking.html">calix.spiking</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../apis_cpp.html">C++ API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BrainScaleS-2 Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../apis.html">BrainScaleS-2 API Documentation</a></li>
          <li class="breadcrumb-item"><a href="../apis_python.html">BrainScaleS-2 API Documentation</a></li>
          <li class="breadcrumb-item"><a href="calix.html">calix</a></li>
          <li class="breadcrumb-item"><a href="calix.common.html">calix.common</a></li>
          <li class="breadcrumb-item"><a href="calix.common.base.html">calix.common.base</a></li>
      <li class="breadcrumb-item active">calix.common.base.Calib</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/calix.common.base.Calib.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="calix-common-base-calib">
<h1>calix.common.base.Calib<a class="headerlink" href="#calix-common-base-calib" title="Permalink to this headline"></a></h1>
<dl class="py class">
<dt id="calix.common.base.Calib">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">calix.common.base.</span></code><code class="sig-name descname"><span class="pre">Calib</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameter_range</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="calix.common.base.ParameterRange.html#calix.common.base.ParameterRange" title="calix.common.base.ParameterRange"><span class="pre">calix.common.base.ParameterRange</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_instances</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inverted</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.base.Calib" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Base class for calibration applications.</p>
<p>Accepts parameter range and other generally important settings.
From here, Calibrations can be derived, implementing functions for
at least measuring results and configuring parameters.
Only one-dimensional calibrations are supported, i.e. only one variable is
adjusted to move towards a desired target value.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parameter_range</strong> – Allowed range for parameter.</p></li>
<li><p><strong>inverted</strong> – Invert calibration, i.e. expect a higher parameter
returning a lower result. Defaults to False.</p></li>
<li><p><strong>n_instances</strong> – Number of objects (e.g. neurons) to calibrate.</p></li>
<li><p><strong>errors</strong> – Error messages to be logged when instances of the
calibration have reached the parameter_range boundaries. If None,
nothing will be logged. The first (second) error message is used
when the lower (upper) bound is reached.
Error messages are expected to support the .format() operation.
As parameter {0}, the indices of failed instances are inserted, as
parameter {1}, the respective boundary value is inserted.</p></li>
<li><p><a class="reference internal" href="calix.common.base.CalibResult.html#calix.common.base.CalibResult.target" title="calix.common.base.CalibResult.target"><strong>target</strong></a> – Target read for calibration. Can be found during
prelude, otherwise needs to be supplied to the run() method.</p></li>
<li><p><strong>result</strong> – List: Calibrated parameters and success mask.
Only available after run() has been called.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if parameter_range has a bad shape or is too small.</p>
</dd>
</dl>
<dl class="py method">
<dt id="calix.common.base.Calib.__init__">
<code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameter_range</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="calix.common.base.ParameterRange.html#calix.common.base.ParameterRange" title="calix.common.base.ParameterRange"><span class="pre">calix.common.base.ParameterRange</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_instances</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inverted</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#calix.common.base.Calib.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.common.base.Calib.__init__" title="calix.common.base.Calib.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>(parameter_range, n_instances[, …])</p></td>
<td><p>Initialize self.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#calix.common.base.Calib.configure_parameters" title="calix.common.base.Calib.configure_parameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">configure_parameters</span></code></a>(builder, parameters)</p></td>
<td><p>Function to set up parameters for testing.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.common.base.Calib.measure_results" title="calix.common.base.Calib.measure_results"><code class="xref py py-obj docutils literal notranslate"><span class="pre">measure_results</span></code></a>(connection, builder)</p></td>
<td><p>Function to measure the observable.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#calix.common.base.Calib.postlude" title="calix.common.base.Calib.postlude"><code class="xref py py-obj docutils literal notranslate"><span class="pre">postlude</span></code></a>(connection)</p></td>
<td><p>Function to do necessary postconfiguring of the chip.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#calix.common.base.Calib.prelude" title="calix.common.base.Calib.prelude"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prelude</span></code></a>(connection)</p></td>
<td><p>Function to do necessary pre-configuration or other things that are required during the actual calibration, like finding the target values.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#calix.common.base.Calib.run" title="calix.common.base.Calib.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(connection, algorithm[, target])</p></td>
<td><p>Use the provided algorithm to find optimal parameters.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="calix.common.base.Calib.configure_parameters">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">configure_parameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">builder</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a><a class="headerlink" href="#calix.common.base.Calib.configure_parameters" title="Permalink to this definition"></a></dt>
<dd><p>Function to set up parameters for testing.</p>
<p>Use the provided builder to append instructions that configure the
provided parameters. Then return the builder again.
If one needs to wait between configuring the parameters and measuring,
e.g. after setting a new CapMem value, this should be done here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>builder</strong> – Program Builder to which configuration instructions
can be appended.</p></li>
<li><p><strong>parameters</strong> – Array of parameters that should be set up. Only
integer parameters will be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The Program Builder with instructions to set up the given
parameters appended.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.common.base.Calib.measure_results">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">measure_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">builder</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="calix.common.base.WriteRecordingPlaybackProgramBuilder.html#calix.common.base.WriteRecordingPlaybackProgramBuilder" title="calix.common.base.WriteRecordingPlaybackProgramBuilder"><span class="pre">calix.common.base.WriteRecordingPlaybackProgramBuilder</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="headerlink" href="#calix.common.base.Calib.measure_results" title="Permalink to this definition"></a></dt>
<dd><p>Function to measure the observable.</p>
<p>Typically this will read the CADC channels and return an array of
the obtained reads. Use the provided builder to append read
instructions, run it using the provided connection. If necessary,
treat the results in any way, e.g. calculate statistics per quadrant
if calibrating global settings. Then return an array that fits the
number of parameters to update.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection</strong> – Connection where builder can be executed in order to
measure results.</p></li>
<li><p><strong>builder</strong> – Builder where instructions to read something can be
appended.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An array with the measurement results in a shape that
corresponds to the calibration instances. Any type that allows
comparison to a calibration target using an operator <cite>&lt;</cite> is
allowed, in particular int and float.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.common.base.Calib.postlude">
<code class="sig-name descname"><span class="pre">postlude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#calix.common.base.Calib.postlude" title="Permalink to this definition"></a></dt>
<dd><p>Function to do necessary postconfiguring of the chip.
If not overwritten, this function does nothing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>connection</strong> – Connection to the chip to be calibrated.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.common.base.Calib.prelude">
<code class="sig-name descname"><span class="pre">prelude</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#calix.common.base.Calib.prelude" title="Permalink to this definition"></a></dt>
<dd><p>Function to do necessary pre-configuration or other things that
are required during the actual calibration, like finding the
target values.
If not overwritten, this function does nothing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>connection</strong> – Connection to the chip to be calibrated.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="calix.common.base.Calib.run">
<code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pyhxcomm_vx.ConnectionHandle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="calix.common.base.Algorithm.html#calix.common.base.Algorithm" title="calix.common.base.Algorithm"><span class="pre">calix.common.base.Algorithm</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">numbers.Integral</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="calix.common.base.ParameterCalibResult.html#calix.common.base.ParameterCalibResult" title="calix.common.base.ParameterCalibResult"><span class="pre">calix.common.base.ParameterCalibResult</span></a><a class="headerlink" href="#calix.common.base.Calib.run" title="Permalink to this definition"></a></dt>
<dd><p>Use the provided algorithm to find optimal parameters.</p>
<p>Calls prelude function, calls algorithm.run(), calls postlude function.
If self.target is not defined after the prelude function, the
calibration target is required as a parameter to this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection</strong> – Connection to the chip to calibrate.</p></li>
<li><p><strong>algorithm</strong> – Instance of an algorithm to be used for
calibration. Will be hooked to the calibration during running
and unhooked afterwards.</p></li>
<li><p><strong>target</strong> – Target result to be aimed for. If given, this target
is used. If None, the attribute self.target is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – If neither the target parameter or the attribute
self.target are defined.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>ParameterCalibResult, containing the optimal
parameters.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="calix.common.base.Algorithm.html" class="btn btn-neutral float-left" title="calix.common.base.Algorithm" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="calix.common.base.CalibOptions.html" class="btn btn-neutral float-right" title="calix.common.base.CalibOptions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Electronic Vision(s).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>