

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>stadls &mdash; BrainScaleS-2 Documentation 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/visions.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> BrainScaleS-2 Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../brainscales2-demos/index.html">Demos &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apis.html">API Reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BrainScaleS-2 Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>stadls</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/haldls/stadls.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="stadls">
<span id="id1"></span><h1>stadls<a class="headerlink" href="#stadls" title="Permalink to this headline">¶</a></h1>
<p>This layer provides an representation for hardware runtime control.
It makes use of <a class="reference internal" href="../fisch/introduction.html#fisch"><span class="std std-ref">fisch</span></a> and <a class="reference internal" href="../hxcomm/introduction.html#hxcomm"><span class="std std-ref">hxcomm</span></a>.</p>
<div class="section" id="rationale-of-low-level-experiment-execution">
<h2>Rationale of (low-level) experiment execution<a class="headerlink" href="#rationale-of-low-level-experiment-execution" title="Permalink to this headline">¶</a></h2>
<p>The basic design goal of Playback programs is that we can asynchronously create, run and evaluate these programs.
A Program typically represents a “atomic” part of an experiment to be executed on hardware.
Motivation: pipelining of programs, experiment streams, etc.
Due to the asynchronous design errors can be only detected after the program has run and the result data is available.</p>
<p>Contents of a playback program are “instructions” that can come from 3 categories:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read</span></code>s</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write</span></code>s</p></li>
<li><p><em>barriers</em></p></li>
</ul>
<p>For read and write it’s clear what the FPGA performs.
Spike events are implemented as writes.
From the software perspective the combination of asynchronous execution and result data in <code class="docutils literal notranslate"><span class="pre">read</span></code>s is interesting.
We implement a mechanism which is similar to <a class="reference external" href="https://en.cppreference.com/w/cpp/thread/promise">promises</a>.
The program itself manages memory for the future result of an instruction.
The program execution on the FPGA progresses FPGA time.</p>
<p>On the other hand, barriers “block” any further program execution until a condition is met:</p>
<ul class="simple">
<li><p>either a target time has been reached (by waiting),</p></li>
<li><p>or a timed wait interval has been completed,</p></li>
<li><p>or a read result shows an expected value after polling,</p></li>
<li><p>or a communication channel is idle (e.g. omnibus, jtag, …).</p></li>
</ul>
<p>The latter can be used to verify that something has happend, i.e. a certain value <code class="docutils literal notranslate"><span class="pre">X</span></code> has been reached at some register location.</p>
<p>For everything there are FPGA-handled timeouts that are generated during execution of the program.
The software can evaluate the occurence of such timeout events after the program has been run.
In addition to such events, in such <em>trace</em> programs for each <code class="docutils literal notranslate"><span class="pre">read</span></code> in the playback program, a matching result value is stored.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2023, Electronic Vision(s).

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>